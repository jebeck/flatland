exports.ids=[0],exports.modules={107:function(t,r,n){"use strict";n.r(r);var e=n(544),i=n(68),o=n(549);function a(){var t,r,n=Object(o.a)().unknown(void 0),s=n.domain,u=n.range,c=0,h=1,f=!1,l=0,g=0,m=.5;function p(){var n=s().length,i=h<c,o=i?h:c,a=i?c:h;t=(a-o)/Math.max(1,n-l+2*g),f&&(t=Math.floor(t)),o+=(a-o-t*(n-l))*m,r=t*(1-l),f&&(o=Math.round(o),r=Math.round(r));var p=Object(e.a)(n).map((function(r){return o+t*r}));return u(i?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(s(t),p()):s()},n.range=function(t){return arguments.length?([c,h]=t,c=+c,h=+h,p()):[c,h]},n.rangeRound=function(t){return[c,h]=t,c=+c,h=+h,f=!0,p()},n.bandwidth=function(){return r},n.step=function(){return t},n.round=function(t){return arguments.length?(f=!!t,p()):f},n.padding=function(t){return arguments.length?(l=Math.min(1,g=+t),p()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),p()):l},n.paddingOuter=function(t){return arguments.length?(g=+t,p()):g},n.align=function(t){return arguments.length?(m=Math.max(0,Math.min(1,t)),p()):m},n.copy=function(){return a(s(),[c,h]).round(f).paddingInner(l).paddingOuter(g).align(m)},i.b.apply(p(),arguments)}function s(){return function t(r){var n=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return t(n())},r}(a.apply(null,arguments).paddingInner(1))}var u=n(106),c=n(71);function h(t){var r;function n(t){return isNaN(t=+t)?r:t}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,c.a),n):t.slice()},n.unknown=function(t){return arguments.length?(r=t,n):r},n.copy=function(){return h(t).unknown(r)},t=arguments.length?Array.from(t,c.a):[0,1],Object(u.b)(n)}var f=n(35),l=n(23),g=function(t,r){var n,e=0,i=(t=t.slice()).length-1,o=t[e],a=t[i];return a<o&&(n=e,e=i,i=n,n=o,o=a,a=n),t[e]=r.floor(o),t[i]=r.ceil(a),t},m=n(53);function p(t){return Math.log(t)}function v(t){return Math.exp(t)}function d(t){return-Math.log(-t)}function w(t){return-Math.exp(-t)}function y(t){return isFinite(t)?+("1e"+t):t<0?0:t}function M(t){return function(r){return-t(-r)}}function b(t){var r,n,e=t(p,v),i=e.domain,o=10;function a(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(r){return Math.log(r)/t})}(o),n=function(t){return 10===t?y:t===Math.E?Math.exp:function(r){return Math.pow(t,r)}}(o),i()[0]<0?(r=M(r),n=M(n),t(d,w)):t(p,v),e}return e.base=function(t){return arguments.length?(o=+t,a()):o},e.domain=function(t){return arguments.length?(i(t),a()):i()},e.ticks=function(t){var e,a=i(),s=a[0],u=a[a.length-1];(e=u<s)&&(g=s,s=u,u=g);var c,h,l,g=r(s),m=r(u),p=null==t?10:+t,v=[];if(!(o%1)&&m-g<p){if(g=Math.floor(g),m=Math.ceil(m),s>0){for(;g<=m;++g)for(h=1,c=n(g);h<o;++h)if(!((l=c*h)<s)){if(l>u)break;v.push(l)}}else for(;g<=m;++g)for(h=o-1,c=n(g);h>=1;--h)if(!((l=c*h)<s)){if(l>u)break;v.push(l)}v.length||(v=Object(f.a)(s,u,p))}else v=Object(f.a)(g,m,Math.min(m-g,p)).map(n);return e?v.reverse():v},e.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=Object(l.a)(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/e.ticks().length);return function(t){var e=t/n(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=a?i(t):""}},e.nice=function(){return i(g(i(),{floor:function(t){return n(Math.floor(r(t)))},ceil:function(t){return n(Math.ceil(r(t)))}}))},e}function x(){var t=b(Object(m.d)()).domain([1,10]);return t.copy=function(){return Object(m.a)(t,x()).base(t.base())},i.b.apply(t,arguments),t}function S(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function C(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function T(t){var r=1,n=t(S(r),C(r));return n.constant=function(n){return arguments.length?t(S(r=+n),C(r)):r},Object(u.b)(n)}function E(){var t=T(Object(m.d)());return t.copy=function(){return Object(m.a)(t,E()).constant(t.constant())},i.b.apply(t,arguments)}function R(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function A(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function k(t){return t<0?-t*t:t*t}function N(t){var r=t(m.c,m.c),n=1;function e(){return 1===n?t(m.c,m.c):.5===n?t(A,k):t(R(n),R(1/n))}return r.exponent=function(t){return arguments.length?(n=+t,e()):n},Object(u.b)(r)}function D(){var t=N(Object(m.d)());return t.copy=function(){return Object(m.a)(t,D()).exponent(t.exponent())},i.b.apply(t,arguments),t}function j(){return D.apply(null,arguments).exponent(.5)}function O(t){return Math.sign(t)*t*t}function z(){var t,r=Object(m.b)(),n=[0,1],e=!1;function o(n){var i=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(r(n));return isNaN(i)?t:e?Math.round(i):i}return o.invert=function(t){return r.invert(O(t))},o.domain=function(t){return arguments.length?(r.domain(t),o):r.domain()},o.range=function(t){return arguments.length?(r.range((n=Array.from(t,c.a)).map(O)),o):n.slice()},o.rangeRound=function(t){return o.range(t).round(!0)},o.round=function(t){return arguments.length?(e=!!t,o):e},o.clamp=function(t){return arguments.length?(r.clamp(t),o):r.clamp()},o.unknown=function(r){return arguments.length?(t=r,o):t},o.copy=function(){return z(r.domain(),n).round(e).clamp(r.clamp()).unknown(t)},i.b.apply(o,arguments),Object(u.b)(o)}var U=n(551),F=n(543),V=n(43);function I(){var t,r=[],n=[],e=[];function o(){var t=0,i=Math.max(1,n.length);for(e=new Array(i-1);++t<i;)e[t-1]=Object(U.a)(r,t/i);return a}function a(r){return isNaN(r=+r)?t:n[Object(F.c)(e,r)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?e[i-1]:r[0],i<e.length?e[i]:r[r.length-1]]},a.domain=function(t){if(!arguments.length)return r.slice();r=[];for(let n of t)null==n||isNaN(n=+n)||r.push(n);return r.sort(V.a),o()},a.range=function(t){return arguments.length?(n=Array.from(t),o()):n.slice()},a.unknown=function(r){return arguments.length?(t=r,a):t},a.quantiles=function(){return e.slice()},a.copy=function(){return I().domain(r).range(n).unknown(t)},i.b.apply(a,arguments)}function _(){var t,r=0,n=1,e=1,o=[.5],a=[0,1];function s(r){return r<=r?a[Object(F.c)(o,r,0,e)]:t}function c(){var t=-1;for(o=new Array(e);++t<e;)o[t]=((t+1)*n-(t-e)*r)/(e+1);return s}return s.domain=function(t){return arguments.length?([r,n]=t,r=+r,n=+n,c()):[r,n]},s.range=function(t){return arguments.length?(e=(a=Array.from(t)).length-1,c()):a.slice()},s.invertExtent=function(t){var i=a.indexOf(t);return i<0?[NaN,NaN]:i<1?[r,o[0]]:i>=e?[o[e-1],n]:[o[i-1],o[i]]},s.unknown=function(r){return arguments.length?(t=r,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return _().domain([r,n]).range(a).unknown(t)},i.b.apply(Object(u.b)(s),arguments)}function P(){var t,r=[.5],n=[0,1],e=1;function o(i){return i<=i?n[Object(F.c)(r,i,0,e)]:t}return o.domain=function(t){return arguments.length?(r=Array.from(t),e=Math.min(r.length,n.length-1),o):r.slice()},o.range=function(t){return arguments.length?(n=Array.from(t),e=Math.min(r.length,n.length-1),o):n.slice()},o.invertExtent=function(t){var e=n.indexOf(t);return[r[e-1],r[e]]},o.unknown=function(r){return arguments.length?(t=r,o):t},o.copy=function(){return P().domain(r).range(n).unknown(t)},i.b.apply(o,arguments)}var L=n(70),q=new Date,Y=new Date;function H(t,r,n,e){function i(r){return t(r=0===arguments.length?new Date:new Date(+r)),r}return i.floor=function(r){return t(r=new Date(+r)),r},i.ceil=function(n){return t(n=new Date(n-1)),r(n,1),t(n),n},i.round=function(t){var r=i(t),n=i.ceil(t);return t-r<n-t?r:n},i.offset=function(t,n){return r(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,e,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<e&&o>0))return s;do{s.push(a=new Date(+n)),r(n,o),t(n)}while(a<n&&n<e);return s},i.filter=function(n){return H((function(r){if(r>=r)for(;t(r),!n(r);)r.setTime(r-1)}),(function(t,e){if(t>=t)if(e<0)for(;++e<=0;)for(;r(t,-1),!n(t););else for(;--e>=0;)for(;r(t,1),!n(t););}))},n&&(i.count=function(r,e){return q.setTime(+r),Y.setTime(+e),t(q),t(Y),Math.floor(n(q,Y))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(e?function(r){return e(r)%t==0}:function(r){return i.count(0,r)%t==0}):i:null}),i}var $=H((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,r){t.setFullYear(t.getFullYear()+r)}),(function(t,r){return r.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));$.every=function(t){return isFinite(t=Math.floor(t))&&t>0?H((function(r){r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)}),(function(r,n){r.setFullYear(r.getFullYear()+n*t)})):null};var Q=$,W=($.range,H((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,r){t.setMonth(t.getMonth()+r)}),(function(t,r){return r.getMonth()-t.getMonth()+12*(r.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),Z=W,X=(W.range,6e4),G=6048e5;function B(t){return H((function(r){r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)}),(function(t,r){t.setDate(t.getDate()+7*r)}),(function(t,r){return(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*X)/G}))}var K=B(0),J=B(1),tt=B(2),rt=B(3),nt=B(4),et=B(5),it=B(6),ot=(K.range,J.range,tt.range,rt.range,nt.range,et.range,it.range,H((function(t){t.setHours(0,0,0,0)}),(function(t,r){t.setDate(t.getDate()+r)}),(function(t,r){return(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*X)/864e5}),(function(t){return t.getDate()-1}))),at=ot,st=(ot.range,H((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*X)}),(function(t,r){t.setTime(+t+36e5*r)}),(function(t,r){return(r-t)/36e5}),(function(t){return t.getHours()}))),ut=st,ct=(st.range,H((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,r){t.setTime(+t+r*X)}),(function(t,r){return(r-t)/X}),(function(t){return t.getMinutes()}))),ht=ct,ft=(ct.range,H((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,r){t.setTime(+t+1e3*r)}),(function(t,r){return(r-t)/1e3}),(function(t){return t.getUTCSeconds()}))),lt=ft,gt=(ft.range,H((function(){}),(function(t,r){t.setTime(+t+r)}),(function(t,r){return r-t})));gt.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?H((function(r){r.setTime(Math.floor(r/t)*t)}),(function(r,n){r.setTime(+r+n*t)}),(function(r,n){return(n-r)/t})):gt:null};var mt=gt;gt.range;function pt(t){return H((function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCDate(t.getUTCDate()+7*r)}),(function(t,r){return(r-t)/G}))}var vt=pt(0),dt=pt(1),wt=pt(2),yt=pt(3),Mt=pt(4),bt=pt(5),xt=pt(6),St=(vt.range,dt.range,wt.range,yt.range,Mt.range,bt.range,xt.range,H((function(t){t.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCDate(t.getUTCDate()+r)}),(function(t,r){return(r-t)/864e5}),(function(t){return t.getUTCDate()-1}))),Ct=St,Tt=(St.range,H((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r)}),(function(t,r){return r.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Tt.every=function(t){return isFinite(t=Math.floor(t))&&t>0?H((function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)}),(function(r,n){r.setUTCFullYear(r.getUTCFullYear()+n*t)})):null};var Et=Tt;Tt.range;function Rt(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function At(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function kt(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}var Nt,Dt,jt,Ot={"-":"",_:" ",0:"0"},zt=/^\s*\d+/,Ut=/^%/,Ft=/[\\^$*+?|[\]().{}]/g;function Vt(t,r,n){var e=t<0?"-":"",i=(e?-t:t)+"",o=i.length;return e+(o<n?new Array(n-o+1).join(r)+i:i)}function It(t){return t.replace(Ft,"\\$&")}function _t(t){return new RegExp("^(?:"+t.map(It).join("|")+")","i")}function Pt(t){for(var r={},n=-1,e=t.length;++n<e;)r[t[n].toLowerCase()]=n;return r}function Lt(t,r,n){var e=zt.exec(r.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function qt(t,r,n){var e=zt.exec(r.slice(n,n+1));return e?(t.u=+e[0],n+e[0].length):-1}function Yt(t,r,n){var e=zt.exec(r.slice(n,n+2));return e?(t.U=+e[0],n+e[0].length):-1}function Ht(t,r,n){var e=zt.exec(r.slice(n,n+2));return e?(t.V=+e[0],n+e[0].length):-1}function $t(t,r,n){var e=zt.exec(r.slice(n,n+2));return e?(t.W=+e[0],n+e[0].length):-1}function Qt(t,r,n){var e=zt.exec(r.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function Wt(t,r,n){var e=zt.exec(r.slice(n,n+2));return e?(t.y=+e[0]+(+e[0]>68?1900:2e3),n+e[0].length):-1}function Zt(t,r,n){var e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function Xt(t,r,n){var e=zt.exec(r.slice(n,n+1));return e?(t.q=3*e[0]-3,n+e[0].length):-1}function Gt(t,r,n){var e=zt.exec(r.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function Bt(t,r,n){var e=zt.exec(r.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function Kt(t,r,n){var e=zt.exec(r.slice(n,n+3));return e?(t.m=0,t.d=+e[0],n+e[0].length):-1}function Jt(t,r,n){var e=zt.exec(r.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function tr(t,r,n){var e=zt.exec(r.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function rr(t,r,n){var e=zt.exec(r.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function nr(t,r,n){var e=zt.exec(r.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function er(t,r,n){var e=zt.exec(r.slice(n,n+6));return e?(t.L=Math.floor(e[0]/1e3),n+e[0].length):-1}function ir(t,r,n){var e=Ut.exec(r.slice(n,n+1));return e?n+e[0].length:-1}function or(t,r,n){var e=zt.exec(r.slice(n));return e?(t.Q=+e[0],n+e[0].length):-1}function ar(t,r,n){var e=zt.exec(r.slice(n));return e?(t.s=+e[0],n+e[0].length):-1}function sr(t,r){return Vt(t.getDate(),r,2)}function ur(t,r){return Vt(t.getHours(),r,2)}function cr(t,r){return Vt(t.getHours()%12||12,r,2)}function hr(t,r){return Vt(1+at.count(Q(t),t),r,3)}function fr(t,r){return Vt(t.getMilliseconds(),r,3)}function lr(t,r){return fr(t,r)+"000"}function gr(t,r){return Vt(t.getMonth()+1,r,2)}function mr(t,r){return Vt(t.getMinutes(),r,2)}function pr(t,r){return Vt(t.getSeconds(),r,2)}function vr(t){var r=t.getDay();return 0===r?7:r}function dr(t,r){return Vt(K.count(Q(t)-1,t),r,2)}function wr(t,r){var n=t.getDay();return t=n>=4||0===n?nt(t):nt.ceil(t),Vt(nt.count(Q(t),t)+(4===Q(t).getDay()),r,2)}function yr(t){return t.getDay()}function Mr(t,r){return Vt(J.count(Q(t)-1,t),r,2)}function br(t,r){return Vt(t.getFullYear()%100,r,2)}function xr(t,r){return Vt(t.getFullYear()%1e4,r,4)}function Sr(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+Vt(r/60|0,"0",2)+Vt(r%60,"0",2)}function Cr(t,r){return Vt(t.getUTCDate(),r,2)}function Tr(t,r){return Vt(t.getUTCHours(),r,2)}function Er(t,r){return Vt(t.getUTCHours()%12||12,r,2)}function Rr(t,r){return Vt(1+Ct.count(Et(t),t),r,3)}function Ar(t,r){return Vt(t.getUTCMilliseconds(),r,3)}function kr(t,r){return Ar(t,r)+"000"}function Nr(t,r){return Vt(t.getUTCMonth()+1,r,2)}function Dr(t,r){return Vt(t.getUTCMinutes(),r,2)}function jr(t,r){return Vt(t.getUTCSeconds(),r,2)}function Or(t){var r=t.getUTCDay();return 0===r?7:r}function zr(t,r){return Vt(vt.count(Et(t)-1,t),r,2)}function Ur(t,r){var n=t.getUTCDay();return t=n>=4||0===n?Mt(t):Mt.ceil(t),Vt(Mt.count(Et(t),t)+(4===Et(t).getUTCDay()),r,2)}function Fr(t){return t.getUTCDay()}function Vr(t,r){return Vt(dt.count(Et(t)-1,t),r,2)}function Ir(t,r){return Vt(t.getUTCFullYear()%100,r,2)}function _r(t,r){return Vt(t.getUTCFullYear()%1e4,r,4)}function Pr(){return"+0000"}function Lr(){return"%"}function qr(t){return+t}function Yr(t){return Math.floor(+t/1e3)}Nt=function(t){var r=t.dateTime,n=t.date,e=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=_t(i),h=Pt(i),f=_t(o),l=Pt(o),g=_t(a),m=Pt(a),p=_t(s),v=Pt(s),d=_t(u),w=Pt(u),y={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:sr,e:sr,f:lr,H:ur,I:cr,j:hr,L:fr,m:gr,M:mr,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:qr,s:Yr,S:pr,u:vr,U:dr,V:wr,w:yr,W:Mr,x:null,X:null,y:br,Y:xr,Z:Sr,"%":Lr},M={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Cr,e:Cr,f:kr,H:Tr,I:Er,j:Rr,L:Ar,m:Nr,M:Dr,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:qr,s:Yr,S:jr,u:Or,U:zr,V:Ur,w:Fr,W:Vr,x:null,X:null,y:Ir,Y:_r,Z:Pr,"%":Lr},b={a:function(t,r,n){var e=g.exec(r.slice(n));return e?(t.w=m[e[0].toLowerCase()],n+e[0].length):-1},A:function(t,r,n){var e=f.exec(r.slice(n));return e?(t.w=l[e[0].toLowerCase()],n+e[0].length):-1},b:function(t,r,n){var e=d.exec(r.slice(n));return e?(t.m=w[e[0].toLowerCase()],n+e[0].length):-1},B:function(t,r,n){var e=p.exec(r.slice(n));return e?(t.m=v[e[0].toLowerCase()],n+e[0].length):-1},c:function(t,n,e){return C(t,r,n,e)},d:Bt,e:Bt,f:er,H:Jt,I:Jt,j:Kt,L:nr,m:Gt,M:tr,p:function(t,r,n){var e=c.exec(r.slice(n));return e?(t.p=h[e[0].toLowerCase()],n+e[0].length):-1},q:Xt,Q:or,s:ar,S:rr,u:qt,U:Yt,V:Ht,w:Lt,W:$t,x:function(t,r,e){return C(t,n,r,e)},X:function(t,r,n){return C(t,e,r,n)},y:Wt,Y:Qt,Z:Zt,"%":ir};function x(t,r){return function(n){var e,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Ot[e=t.charAt(++s)])?e=t.charAt(++s):i="e"===e?" ":"0",(o=r[e])&&(e=o(n,i)),a.push(e),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function S(t,r){return function(n){var e,i,o=kt(1900,void 0,1);if(C(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(!r||"Z"in o||(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(e=At(kt(o.y,0,1))).getUTCDay(),e=i>4||0===i?dt.ceil(e):dt(e),e=Ct.offset(e,7*(o.V-1)),o.y=e.getUTCFullYear(),o.m=e.getUTCMonth(),o.d=e.getUTCDate()+(o.w+6)%7):(i=(e=Rt(kt(o.y,0,1))).getDay(),e=i>4||0===i?J.ceil(e):J(e),e=at.offset(e,7*(o.V-1)),o.y=e.getFullYear(),o.m=e.getMonth(),o.d=e.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?At(kt(o.y,0,1)).getUTCDay():Rt(kt(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,At(o)):Rt(o)}}function C(t,r,n,e){for(var i,o,a=0,s=r.length,u=n.length;a<s;){if(e>=u)return-1;if(37===(i=r.charCodeAt(a++))){if(i=r.charAt(a++),!(o=b[i in Ot?r.charAt(a++):i])||(e=o(t,n,e))<0)return-1}else if(i!=n.charCodeAt(e++))return-1}return e}return(y.x=x(n,y),y.X=x(e,y),y.c=x(r,y),M.x=x(n,M),M.X=x(e,M),M.c=x(r,M),{format:function(t){var r=x(t+="",y);return r.toString=function(){return t},r},parse:function(t){var r=S(t+="",!1);return r.toString=function(){return t},r},utcFormat:function(t){var r=x(t+="",M);return r.toString=function(){return t},r},utcParse:function(t){var r=S(t+="",!0);return r.toString=function(){return t},r}})}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Dt=Nt.format,Nt.parse,jt=Nt.utcFormat,Nt.utcParse;var Hr=1e3,$r=60*Hr,Qr=60*$r,Wr=24*Qr,Zr=7*Wr,Xr=30*Wr,Gr=365*Wr;function Br(t){return new Date(t)}function Kr(t){return t instanceof Date?+t:+new Date(+t)}function Jr(t,r,n,e,i,o,a,s,u){var c=Object(m.b)(),h=c.invert,l=c.domain,p=u(".%L"),v=u(":%S"),d=u("%I:%M"),w=u("%I %p"),y=u("%a %d"),M=u("%b %d"),b=u("%B"),x=u("%Y"),S=[[a,1,Hr],[a,5,5*Hr],[a,15,15*Hr],[a,30,30*Hr],[o,1,$r],[o,5,5*$r],[o,15,15*$r],[o,30,30*$r],[i,1,Qr],[i,3,3*Qr],[i,6,6*Qr],[i,12,12*Qr],[e,1,Wr],[e,2,2*Wr],[n,1,Zr],[r,1,Xr],[r,3,3*Xr],[t,1,Gr]];function C(s){return(a(s)<s?p:o(s)<s?v:i(s)<s?d:e(s)<s?w:r(s)<s?n(s)<s?y:M:t(s)<s?b:x)(s)}function T(r,n,e){if(null==r&&(r=10),"number"==typeof r){var i,o=Math.abs(e-n)/r,a=Object(L.a)((function(t){return t[2]})).right(S,o);return a===S.length?(i=Object(f.c)(n/Gr,e/Gr,r),r=t):a?(i=(a=S[o/S[a-1][2]<S[a][2]/o?a-1:a])[1],r=a[0]):(i=Math.max(Object(f.c)(n,e,r),1),r=s),r.every(i)}return r}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?l(Array.from(t,Kr)):l().map(Br)},c.ticks=function(t){var r,n=l(),e=n[0],i=n[n.length-1],o=i<e;return o&&(r=e,e=i,i=r),r=(r=T(t,e,i))?r.range(e,i+1):[],o?r.reverse():r},c.tickFormat=function(t,r){return null==r?C:u(r)},c.nice=function(t){var r=l();return(t=T(t,r[0],r[r.length-1]))?l(g(r,t)):c},c.copy=function(){return Object(m.a)(c,Jr(t,r,n,e,i,o,a,s,u))},c}var tn=function(){return i.b.apply(Jr(Q,Z,K,at,ut,ht,lt,mt,Dt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},rn=H((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCMonth(t.getUTCMonth()+r)}),(function(t,r){return r.getUTCMonth()-t.getUTCMonth()+12*(r.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),nn=rn,en=(rn.range,H((function(t){t.setUTCMinutes(0,0,0)}),(function(t,r){t.setTime(+t+36e5*r)}),(function(t,r){return(r-t)/36e5}),(function(t){return t.getUTCHours()}))),on=en,an=(en.range,H((function(t){t.setUTCSeconds(0,0)}),(function(t,r){t.setTime(+t+r*X)}),(function(t,r){return(r-t)/X}),(function(t){return t.getUTCMinutes()}))),sn=an,un=(an.range,function(){return i.b.apply(Jr(Et,nn,vt,Ct,on,sn,lt,mt,jt).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),cn=n(548),hn=n(547);function fn(){var t,r,n,e,i,o=0,a=1,s=m.c,u=!1;function c(r){return isNaN(r=+r)?i:s(0===n?.5:(r=(e(r)-t)*n,u?Math.max(0,Math.min(1,r)):r))}function h(t){return function(r){var n,e;return arguments.length?([n,e]=r,s=t(n,e),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,t=e(o=+o),r=e(a=+a),n=t===r?0:1/(r-t),c):[o,a]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=h(cn.a),c.rangeRound=h(hn.a),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return e=i,t=i(o),r=i(a),n=t===r?0:1/(r-t),c}}function ln(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function gn(){var t=Object(u.b)(fn()(m.c));return t.copy=function(){return ln(t,gn())},i.a.apply(t,arguments)}function mn(){var t=b(fn()).domain([1,10]);return t.copy=function(){return ln(t,mn()).base(t.base())},i.a.apply(t,arguments)}function pn(){var t=T(fn());return t.copy=function(){return ln(t,pn()).constant(t.constant())},i.a.apply(t,arguments)}function vn(){var t=N(fn());return t.copy=function(){return ln(t,vn()).exponent(t.exponent())},i.a.apply(t,arguments)}function dn(){return vn.apply(null,arguments).exponent(.5)}function wn(){var t=[],r=m.c;function n(n){if(!isNaN(n=+n))return r((Object(F.c)(t,n,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let n of r)null==n||isNaN(n=+n)||t.push(n);return t.sort(V.a),n},n.interpolator=function(t){return arguments.length?(r=t,n):r},n.range=function(){return t.map((n,e)=>r(e/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(n,e)=>Object(U.a)(t,e/r))},n.copy=function(){return wn(r).domain(t)},i.a.apply(n,arguments)}function yn(t,r){for(var n=0,e=r.length-1,i=r[0],o=new Array(e<0?0:e);n<e;)o[n]=t(i,i=r[++n]);return function(t){var r=Math.max(0,Math.min(e-1,Math.floor(t*=e)));return o[r](t-r)}}function Mn(){var t,r,n,e,i,o,a,s=0,u=.5,c=1,h=1,f=m.c,l=!1;function g(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-r)*(h*t<h*r?e:i),f(l?Math.max(0,Math.min(1,t)):t))}function p(t){return function(r){var n,e,i;return arguments.length?([n,e,i]=r,f=yn(t,[n,e,i]),g):[f(0),f(.5),f(1)]}}return g.domain=function(a){return arguments.length?([s,u,c]=a,t=o(s=+s),r=o(u=+u),n=o(c=+c),e=t===r?0:.5/(r-t),i=r===n?0:.5/(n-r),h=r<t?-1:1,g):[s,u,c]},g.clamp=function(t){return arguments.length?(l=!!t,g):l},g.interpolator=function(t){return arguments.length?(f=t,g):f},g.range=p(cn.a),g.rangeRound=p(hn.a),g.unknown=function(t){return arguments.length?(a=t,g):a},function(a){return o=a,t=a(s),r=a(u),n=a(c),e=t===r?0:.5/(r-t),i=r===n?0:.5/(n-r),h=r<t?-1:1,g}}function bn(){var t=Object(u.b)(Mn()(m.c));return t.copy=function(){return ln(t,bn())},i.a.apply(t,arguments)}function xn(){var t=b(Mn()).domain([.1,1,10]);return t.copy=function(){return ln(t,xn()).base(t.base())},i.a.apply(t,arguments)}function Sn(){var t=T(Mn());return t.copy=function(){return ln(t,Sn()).constant(t.constant())},i.a.apply(t,arguments)}function Cn(){var t=N(Mn());return t.copy=function(){return ln(t,Cn()).exponent(t.exponent())},i.a.apply(t,arguments)}function Tn(){return Cn.apply(null,arguments).exponent(.5)}var En=n(69);n.d(r,"scaleBand",(function(){return a})),n.d(r,"scalePoint",(function(){return s})),n.d(r,"scaleIdentity",(function(){return h})),n.d(r,"scaleLinear",(function(){return u.a})),n.d(r,"scaleLog",(function(){return x})),n.d(r,"scaleSymlog",(function(){return E})),n.d(r,"scaleOrdinal",(function(){return o.a})),n.d(r,"scaleImplicit",(function(){return o.b})),n.d(r,"scalePow",(function(){return D})),n.d(r,"scaleSqrt",(function(){return j})),n.d(r,"scaleRadial",(function(){return z})),n.d(r,"scaleQuantile",(function(){return I})),n.d(r,"scaleQuantize",(function(){return _})),n.d(r,"scaleThreshold",(function(){return P})),n.d(r,"scaleTime",(function(){return tn})),n.d(r,"scaleUtc",(function(){return un})),n.d(r,"scaleSequential",(function(){return gn})),n.d(r,"scaleSequentialLog",(function(){return mn})),n.d(r,"scaleSequentialPow",(function(){return vn})),n.d(r,"scaleSequentialSqrt",(function(){return dn})),n.d(r,"scaleSequentialSymlog",(function(){return pn})),n.d(r,"scaleSequentialQuantile",(function(){return wn})),n.d(r,"scaleDiverging",(function(){return bn})),n.d(r,"scaleDivergingLog",(function(){return xn})),n.d(r,"scaleDivergingPow",(function(){return Cn})),n.d(r,"scaleDivergingSqrt",(function(){return Tn})),n.d(r,"scaleDivergingSymlog",(function(){return Sn})),n.d(r,"tickFormat",(function(){return En.a}))},31:function(t,r,n){"use strict";n.r(r);var e=n(543),i=n(43),o=n(70);function a(t,r){let n=0;if(void 0===r)for(let r of t)null!=r&&(r=+r)>=r&&++n;else{let e=-1;for(let i of t)null!=(i=r(i,++e,t))&&(i=+i)>=i&&++n}return n}function s(t){return 0|t.length}function u(t){return!(t>0)}function c(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function h(...t){const r="function"==typeof t[t.length-1]&&function(t){return r=>t(...r)}(t.pop()),n=(t=t.map(c)).map(s),e=t.length-1,i=new Array(e+1).fill(0),o=[];if(e<0||n.some(u))return o;for(;;){o.push(i.map((r,n)=>t[n][r]));let a=e;for(;++i[a]===n[a];){if(0===a)return r?o.map(r):o;i[a--]=0}}}function f(t,r){var n=0,e=0;return Float64Array.from(t,void 0===r?t=>n+=+t||0:i=>n+=+r(i,e++,t)||0)}var l=function(t,r){return r<t?-1:r>t?1:r>=t?0:NaN};function g(t,r){let n,e=0,i=0,o=0;if(void 0===r)for(let r of t)null!=r&&(r=+r)>=r&&(n=r-i,i+=n/++e,o+=n*(r-i));else{let a=-1;for(let s of t)null!=(s=r(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++e,o+=n*(s-i))}if(e>1)return o/(e-1)}function m(t,r){const n=g(t,r);return n?Math.sqrt(n):n}var p=n(552),v=function(t){return t};function d(t,...r){return b(t,v,v,r)}function w(t,...r){return b(t,Array.from,v,r)}function y(t,r,...n){return b(t,v,r,n)}function M(t,r,...n){return b(t,Array.from,r,n)}function b(t,r,n,e){return function t(i,o){if(o>=e.length)return n(i);const a=new Map,s=e[o++];let u=-1;for(const t of i){const r=s(t,++u,i),n=a.get(r);n?n.push(t):a.set(r,[t])}for(const[r,n]of a)a.set(r,t(n,o));return r(a)}(t,0)}var x=Array.prototype,S=x.slice,C=(x.map,function(t){return function(){return t}}),T=n(544),E=n(35),R=function(t){return Math.ceil(Math.log(a(t))/Math.LN2)+1},A=function(){var t=v,r=p.a,n=R;function i(i){Array.isArray(i)||(i=Array.from(i));var o,a,s=i.length,u=new Array(s);for(o=0;o<s;++o)u[o]=t(i[o],o,i);var c=r(u),h=c[0],f=c[1],l=n(u,h,f);Array.isArray(l)||(l=Object(E.c)(h,f,l),l=Object(T.a)(Math.ceil(h/l)*l,f,l));for(var g=l.length;l[0]<=h;)l.shift(),--g;for(;l[g-1]>f;)l.pop(),--g;var m,p=new Array(g+1);for(o=0;o<=g;++o)(m=p[o]=[]).x0=o>0?l[o-1]:h,m.x1=o<g?l[o]:f;for(o=0;o<s;++o)h<=(a=u[o])&&a<=f&&p[Object(e.c)(l,a,0,g)].push(i[o]);return p}return i.value=function(r){return arguments.length?(t="function"==typeof r?r:C(r),i):t},i.domain=function(t){return arguments.length?(r="function"==typeof t?t:C([t[0],t[1]]),i):r},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?C(S.call(t)):C(t),i):n},i},k=n(551),N=function(t,r,n){return Math.ceil((n-r)/(2*(Object(k.a)(t,.75)-Object(k.a)(t,.25))*Math.pow(a(t),-1/3)))},D=function(t,r,n){return Math.ceil((n-r)/(3.5*m(t)*Math.pow(a(t),-1/3)))},j=n(555);function O(t,r){let n,e=-1,i=-1;if(void 0===r)for(const r of t)++i,null!=r&&(n<r||void 0===n&&r>=r)&&(n=r,e=i);else for(let o of t)null!=(o=r(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,e=i);return e}function z(t,r){let n=0,e=0;if(void 0===r)for(let r of t)null!=r&&(r=+r)>=r&&(++n,e+=r);else{let i=-1;for(let o of t)null!=(o=r(o,++i,t))&&(o=+o)>=o&&(++n,e+=o)}if(n)return e/n}var U=function(t,r){return Object(k.a)(t,.5,r)};function F(t){return Array.from(function*(t){for(const r of t)yield*r}(t))}var V=n(553);function I(t,r){let n,e=-1,i=-1;if(void 0===r)for(const r of t)++i,null!=r&&(n>r||void 0===n&&r>=r)&&(n=r,e=i);else for(let o of t)null!=(o=r(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,e=i);return e}function _(t,r=P){const n=[];let e,i=!1;for(const o of t)i&&n.push(r(e,o)),e=o,i=!0;return n}function P(t,r){return[t,r]}var L=function(t,r){return Array.from(r,r=>t[r])},q=n(556);function Y(t,r=i.a){let n,e=!1;if(1===r.length){let o;for(const a of t){const t=r(a);(e?Object(i.a)(t,o)<0:0===Object(i.a)(t,t))&&(n=a,o=t,e=!0)}}else for(const i of t)(e?r(i,n)<0:0===r(i,i))&&(n=i,e=!0);return n}function H(t,r=i.a){if(1===r.length)return I(t,r);let n,e=-1,o=-1;for(const i of t)++o,(e<0?0===r(i,i):r(i,n)<0)&&(n=i,e=o);return e}function $(t,r=i.a){let n,e=!1;if(1===r.length){let o;for(const a of t){const t=r(a);(e?Object(i.a)(t,o)>0:0===Object(i.a)(t,t))&&(n=a,o=t,e=!0)}}else for(const i of t)(e?r(i,n)>0:0===r(i,i))&&(n=i,e=!0);return n}function Q(t,r=i.a){if(1===r.length)return O(t,r);let n,e=-1,o=-1;for(const i of t)++o,(e<0?0===r(i,i):r(i,n)>0)&&(n=i,e=o);return e}function W(t,r){const n=H(t,r);return n<0?void 0:n}function Z(t,r=0,n=t.length){for(var e,i,o=n-(r=+r);o;)i=Math.random()*o--|0,e=t[o+r],t[o+r]=t[i+r],t[i+r]=e;return t}function X(t,r){let n=0;if(void 0===r)for(let r of t)(r=+r)&&(n+=r);else{let e=-1;for(let i of t)(i=+r(i,++e,t))&&(n+=i)}return n}var G=function(t){if(!(i=t.length))return[];for(var r=-1,n=Object(V.a)(t,B),e=new Array(n);++r<n;)for(var i,o=-1,a=e[r]=new Array(i);++o<i;)a[o]=t[o][r];return e};function B(t){return t.length}var K=function(){return G(arguments)};n.d(r,"bisect",(function(){return e.c})),n.d(r,"bisectRight",(function(){return e.b})),n.d(r,"bisectLeft",(function(){return e.a})),n.d(r,"ascending",(function(){return i.a})),n.d(r,"bisector",(function(){return o.a})),n.d(r,"count",(function(){return a})),n.d(r,"cross",(function(){return h})),n.d(r,"cumsum",(function(){return f})),n.d(r,"descending",(function(){return l})),n.d(r,"deviation",(function(){return m})),n.d(r,"extent",(function(){return p.a})),n.d(r,"group",(function(){return d})),n.d(r,"groups",(function(){return w})),n.d(r,"rollup",(function(){return y})),n.d(r,"rollups",(function(){return M})),n.d(r,"bin",(function(){return A})),n.d(r,"histogram",(function(){return A})),n.d(r,"thresholdFreedmanDiaconis",(function(){return N})),n.d(r,"thresholdScott",(function(){return D})),n.d(r,"thresholdSturges",(function(){return R})),n.d(r,"max",(function(){return j.a})),n.d(r,"maxIndex",(function(){return O})),n.d(r,"mean",(function(){return z})),n.d(r,"median",(function(){return U})),n.d(r,"merge",(function(){return F})),n.d(r,"min",(function(){return V.a})),n.d(r,"minIndex",(function(){return I})),n.d(r,"pairs",(function(){return _})),n.d(r,"permute",(function(){return L})),n.d(r,"quantile",(function(){return k.a})),n.d(r,"quantileSorted",(function(){return k.b})),n.d(r,"quickselect",(function(){return q.a})),n.d(r,"range",(function(){return T.a})),n.d(r,"least",(function(){return Y})),n.d(r,"leastIndex",(function(){return H})),n.d(r,"greatest",(function(){return $})),n.d(r,"greatestIndex",(function(){return Q})),n.d(r,"scan",(function(){return W})),n.d(r,"shuffle",(function(){return Z})),n.d(r,"sum",(function(){return X})),n.d(r,"ticks",(function(){return E.a})),n.d(r,"tickIncrement",(function(){return E.b})),n.d(r,"tickStep",(function(){return E.c})),n.d(r,"transpose",(function(){return G})),n.d(r,"variance",(function(){return g})),n.d(r,"zip",(function(){return K}))},550:function(t,r,n){"use strict";var e=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],n=0;return r?r.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};function i(t,r){return Math.floor(r()*t)}function o(t){for(var r=[],n=0;n<t;n++)r.push(void 0);return r}function a(t,r){return o(t).map((function(){return r}))}function s(t){return a(t,0)}function u(t){return t.reduce((function(t,r){return t+r}))}Object.defineProperty(r,"__esModule",{value:!0}),r.tauRandInt=i,r.tauRand=function(t){return t()},r.norm=function(t){var r,n,i=0;try{for(var o=e(t),a=o.next();!a.done;a=o.next()){var s=a.value;i+=Math.pow(s,2)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return Math.sqrt(i)},r.empty=o,r.range=function(t){return o(t).map((function(t,r){return r}))},r.filled=a,r.zeros=s,r.ones=function(t){return a(t,1)},r.linear=function(t,r,n){return o(n).map((function(e,i){return t+i*((r-t)/(n-1))}))},r.sum=u,r.mean=function(t){return u(t)/t.length},r.max=function(t){for(var r=0,n=0;n<t.length;n++)r=t[n]>r?t[n]:r;return r},r.max2d=function(t){for(var r=0,n=0;n<t.length;n++)for(var e=0;e<t[n].length;e++)r=t[n][e]>r?t[n][e]:r;return r},r.rejectionSample=function(t,r,n){for(var e=s(t),o=0;o<t;o++)for(var a=!0;a;){for(var u=i(r,n),c=!1,h=0;h<o;h++)if(u===e[h]){c=!0;break}c||(a=!1),e[o]=u}return e},r.reshape2d=function(t,r,n){var e=[],i=0;if(t.length!==r*n)throw new Error("Array dimensions must match input length.");for(var o=0;o<r;o++){for(var a=[],s=0;s<n;s++)a.push(t[i]),i+=1;e.push(a),1}return e}},551:function(t,r,n){"use strict";var e=n(555),i=n(553),o=n(556),a=function(t){return null===t?NaN:+t};function s(t,r,n){if(a=(t=Float64Array.from(function*(t,r){if(void 0===r)for(let r of t)null!=r&&(r=+r)>=r&&(yield r);else{let n=-1;for(let e of t)null!=(e=r(e,++n,t))&&(e=+e)>=e&&(yield e)}}(t,n))).length){if((r=+r)<=0||a<2)return Object(i.a)(t);if(r>=1)return Object(e.a)(t);var a,s=(a-1)*r,u=Math.floor(s),c=Object(e.a)(Object(o.a)(t,u).subarray(0,u+1));return c+(Object(i.a)(t.subarray(u+1))-c)*(s-u)}}function u(t,r,n=a){if(e=t.length){if((r=+r)<=0||e<2)return+n(t[0],0,t);if(r>=1)return+n(t[e-1],e-1,t);var e,i=(e-1)*r,o=Math.floor(i),s=+n(t[o],o,t);return s+(+n(t[o+1],o+1,t)-s)*(i-o)}}n.d(r,"a",(function(){return s})),n.d(r,"b",(function(){return u}))},553:function(t,r,n){"use strict";function e(t,r){let n;if(void 0===r)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let e=-1;for(let i of t)null!=(i=r(i,++e,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}n.d(r,"a",(function(){return e}))},555:function(t,r,n){"use strict";function e(t,r){let n;if(void 0===r)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let e=-1;for(let i of t)null!=(i=r(i,++e,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}n.d(r,"a",(function(){return e}))},556:function(t,r,n){"use strict";n.d(r,"a",(function(){return i}));var e=n(43);function i(t,r,n=0,a=t.length-1,s=e.a){for(;a>n;){if(a-n>600){const e=a-n+1,o=r-n+1,u=Math.log(e),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(e-c)/e)*(o-e/2<0?-1:1);i(t,r,Math.max(n,Math.floor(r-o*c/e+h)),Math.min(a,Math.floor(r+(e-o)*c/e+h)),s)}const e=t[r];let u=n,c=a;for(o(t,n,r),s(t[a],e)>0&&o(t,n,a);u<c;){for(o(t,u,c),++u,--c;s(t[u],e)<0;)++u;for(;s(t[c],e)>0;)--c}0===s(t[n],e)?o(t,n,c):(++c,o(t,c,a)),c<=r&&(n=c+1),r<=c&&(a=c-1)}return t}function o(t,r,n){const e=t[r];t[r]=t[n],t[n]=e}},557:function(t,r,n){"use strict";const e=Object.prototype.toString;t.exports=function(t){return e.call(t).endsWith("Array]")}},563:function(t,r,n){"use strict";var e=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var i=e(n(550));function o(t,r){var n=function(n){return i.empty(t).map((function(){return i.filled(r,n)}))},e=[];return e.push(n(-1)),e.push(n(1/0)),e.push(n(0)),e}function a(t,r,n,e,i){r=Math.floor(r);var o=t[0][r],a=t[1][r];t[2][r];if(n>=a[0])return 0;for(var u=0;u<o.length;u++)if(e===o[u])return 0;return s(t,r,n,e,i)}function s(t,r,n,e,i){var o=t[0][r],a=t[1][r],s=t[2][r];if(n>=a[0])return 0;a[0]=n,o[0]=e,s[0]=i;for(var u=0,c=0;;){var h=2*u+1,f=h+1,l=t[0][0].length;if(h>=l)break;if(f>=l){if(!(a[h]>n))break;c=h}else if(a[h]>=a[f]){if(!(n<a[h]))break;c=h}else{if(!(n<a[f]))break;c=f}a[u]=a[c],o[u]=o[c],s[u]=s[c],u=c}return a[u]=n,o[u]=e,s[u]=i,1}function u(t,r,n,e){for(;2*e+1<n;){var i=2*e+1,o=i+1,a=e;if(t[a]<t[i]&&(a=i),o<n&&t[a]<t[o]&&(a=o),a===e)break;var s=t[e];t[e]=t[a],t[a]=s;var u=r[e];r[e]=r[a],r[a]=u,e=a}}r.makeHeap=o,r.rejectionSample=function(t,r,n){for(var e=i.zeros(t),o=0;o<t;o++){for(var a=!0,s=0;a;){s=i.tauRandInt(r,n);for(var u=!1,c=0;c<o;c++)if(s===e[c]){u=!0;break}u||(a=!1)}e[o]=s}return e},r.heapPush=a,r.uncheckedHeapPush=s,r.buildCandidates=function(t,r,n,e,s){for(var u=o(r,e),c=0;c<r;c++)for(var h=0;h<n;h++)if(!(t[0][c][h]<0)){var f=t[0][c][h],l=t[2][c][h],g=i.tauRand(s);a(u,c,g,f,l),a(u,f,g,c,l),t[2][c][h]=0}return u},r.deheapSort=function(t){for(var r=t[0],n=t[1],e=0;e<r.length;e++)for(var i=r[e],o=n[e],a=0;a<i.length-1;a++){var s=i.length-a-1,c=o.length-a-1,h=i[0];i[0]=i[s],i[s]=h;var f=o[0];o[0]=o[c],o[c]=f,u(o,i,c,0)}return{indices:r,weights:n}},r.smallestFlagged=function(t,r){for(var n=t[0][r],e=t[1][r],i=t[2][r],o=1/0,a=-1,s=0;s>n.length;s++)1===i[s]&&e[s]<o&&(o=e[s],a=s);return a>=0?(i[a]=0,Math.floor(n[a])):-1}},564:function(t,r,n){"use strict";var e,i=this&&this.__read||function(t,r){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,i,o=n.call(t),a=[];try{for(;(void 0===r||r-- >0)&&!(e=o.next()).done;)a.push(e.value)}catch(t){i={error:t}}finally{try{e&&!e.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(i(arguments[r]));return t},a=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],n=0;return r?r.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var u=s(n(550)),c=function(){function t(t,r,n,e){this.entries=new Map,this.nRows=0,this.nCols=0,this.rows=o(t),this.cols=o(r),this.values=o(n);for(var i=0;i<n.length;i++){var a=this.makeKey(this.rows[i],this.cols[i]);this.entries.set(a,i)}this.nRows=e[0],this.nCols=e[1]}return t.prototype.makeKey=function(t,r){return t+":"+r},t.prototype.checkDims=function(t,r){if(!(t<this.nRows&&r<this.nCols))throw new Error("array index out of bounds")},t.prototype.set=function(t,r,n){this.checkDims(t,r);var e=this.makeKey(t,r);if(this.entries.has(e)){var i=this.entries.get(e);this.values[i]=n}else this.rows.push(t),this.cols.push(r),this.values.push(n),this.entries.set(e,this.values.length-1)},t.prototype.get=function(t,r,n){void 0===n&&(n=0),this.checkDims(t,r);var e=this.makeKey(t,r);if(this.entries.has(e)){var i=this.entries.get(e);return this.values[i]}return n},t.prototype.getDims=function(){return[this.nRows,this.nCols]},t.prototype.getRows=function(){return o(this.rows)},t.prototype.getCols=function(){return o(this.cols)},t.prototype.getValues=function(){return o(this.values)},t.prototype.forEach=function(t){for(var r=0;r<this.values.length;r++)t(this.values[r],this.rows[r],this.cols[r])},t.prototype.map=function(r){for(var n=[],e=0;e<this.values.length;e++)n.push(r(this.values[e],this.rows[e],this.cols[e]));var i=[this.nRows,this.nCols];return new t(this.rows,this.cols,n,i)},t.prototype.toArray=function(){for(var t=this,r=u.empty(this.nRows).map((function(){return u.zeros(t.nCols)})),n=0;n<this.values.length;n++)r[this.rows[n]][this.cols[n]]=this.values[n];return r},t}();r.SparseMatrix=c,r.transpose=function(t){var r=[],n=[],e=[];t.forEach((function(t,i,o){r.push(i),n.push(o),e.push(t)}));var i=[t.nCols,t.nRows];return new c(n,r,e,i)},r.identity=function(t){for(var r=i(t,1)[0],n=new c([],[],[],t),e=0;e<r;e++)n.set(e,e,1);return n},r.pairwiseMultiply=function(t,r){return f(t,r,(function(t,r){return t*r}))},r.add=function(t,r){return f(t,r,(function(t,r){return t+r}))},r.subtract=function(t,r){return f(t,r,(function(t,r){return t-r}))},r.maximum=function(t,r){return f(t,r,(function(t,r){return t>r?t:r}))},r.multiplyScalar=function(t,r){return t.map((function(t){return t*r}))},r.eliminateZeros=function(t){for(var r=new Set,n=t.getValues(),e=t.getRows(),i=t.getCols(),o=0;o<n.length;o++)0===n[o]&&r.add(o);var a=function(t,n){return!r.has(n)},s=n.filter(a),u=e.filter(a),h=i.filter(a);return new c(u,h,s,t.getDims())},r.normalize=function(t,r){var n,e;void 0===r&&(r="l2");var i=h[r],o=new Map;t.forEach((function(t,r,n){var e=o.get(r)||[];e.push(n),o.set(r,e)}));var s=new c([],[],[],t.getDims()),u=function(r){for(var n=o.get(r).sort(),e=n.map((function(n){return t.get(r,n)})),a=i(e),u=0;u<a.length;u++)s.set(r,n[u],a[u])};try{for(var f=a(o.keys()),l=f.next();!l.done;l=f.next()){u(l.value)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(e=f.return)&&e.call(f)}finally{if(n)throw n.error}}return s};var h=((e={}).max=function(t){for(var r=-1/0,n=0;n<t.length;n++)r=t[n]>r?t[n]:r;return t.map((function(t){return t/r}))},e.l1=function(t){for(var r=0,n=0;n<t.length;n++)r+=t[n];return t.map((function(t){return t/r}))},e.l2=function(t){for(var r=0,n=0;n<t.length;n++)r+=Math.pow(t[n],2);return t.map((function(t){return Math.sqrt(Math.pow(t,2)/r)}))},e);function f(t,r,n){for(var e=new Set,i=[],o=[],a=[],s=function(e,s){i.push(e),o.push(s);var u=n(t.get(e,s),r.get(e,s));a.push(u)},u=t.getValues(),h=t.getRows(),f=t.getCols(),l=0;l<u.length;l++){var g=(d=h[l])+":"+(w=f[l]);e.add(g),s(d,w)}var m=r.getValues(),p=r.getRows(),v=r.getCols();for(l=0;l<m.length;l++){var d,w;g=(d=p[l])+":"+(w=v[l]);e.has(g)||s(d,w)}var y=[t.nRows,t.nCols];return new c(i,o,a,y)}r.getCSR=function(t){var r=[];t.forEach((function(t,n,e){r.push({value:t,row:n,col:e})})),r.sort((function(t,r){return t.row===r.row?t.col-r.col:t.row-r.col}));for(var n=[],e=[],i=[],o=-1,a=0;a<r.length;a++){var s=r[a],u=s.row,c=s.col,h=s.value;u!==o&&(o=u,i.push(a)),n.push(c),e.push(h)}return{indices:n,values:e,indptr:i}}},565:function(t,r,n){"use strict";var e=this&&this.__read||function(t,r){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,i,o=n.call(t),a=[];try{for(;(void 0===r||r-- >0)&&!(e=o.next()).done;)a.push(e.value)}catch(t){i={error:t}}finally{try{e&&!e.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(e(arguments[r]));return t},o=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],n=0;return r?r.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var s=a(n(550)),u=function(t,r,n,e){this.hyperplanes=t,this.offsets=r,this.children=n,this.indices=e};function c(t,r,n,e){for(var i=r,o=0;o<n.length;o++)i+=t[o]*n[o];return 0===i?s.tauRandInt(2,e):i>0?0:1}r.FlatTree=u,r.makeForest=function(t,r,n,e){var o=Math.max(10,r);return s.range(n).map((function(r,n){return function(t,r,n,e){void 0===r&&(r=30);var i=s.range(t.length);return function t(r,n,e,i,o){void 0===e&&(e=30);if(n.length>e){var a=function(t,r,n){var e=t[0].length,i=s.tauRandInt(r.length,n),o=s.tauRandInt(r.length,n);o=(o+=i===o?1:0)%r.length;for(var a=r[i],u=r[o],c=0,h=s.zeros(e),f=0;f<h.length;f++)h[f]=t[a][f]-t[u][f],c-=h[f]*(t[a][f]+t[u][f])/2;var l=0,g=0,m=s.zeros(r.length);for(f=0;f<r.length;f++){for(var p=c,v=0;v<e;v++)p+=h[v]*t[r[f]][v];0===p?(m[f]=s.tauRandInt(2,n),0===m[f]?l+=1:g+=1):p>0?(m[f]=0,l+=1):(m[f]=1,g+=1)}var d=s.zeros(l),w=s.zeros(g);for(var f in l=0,g=0,s.range(m.length))0===m[f]?(d[l]=r[f],l+=1):(w[g]=r[f],g+=1);return{indicesLeft:d,indicesRight:w,hyperplane:h,offset:c}}(r,n,o),u=a.indicesLeft,c=a.indicesRight,h=a.hyperplane,f=a.offset,l=t(r,u,e,i+1,o),g=t(r,c,e,i+1,o);return{leftChild:l,rightChild:g,isLeaf:!1,hyperplane:h,offset:f}}return{indices:n,isLeaf:!0}}(t,i,r,n,e)}(t,o,n,e)})).map((function(t){return function(t,r){var n=function t(r){return r.isLeaf?1:1+t(r.leftChild)+t(r.rightChild)}(t),e=function t(r){return r.isLeaf?1:t(r.leftChild)+t(r.rightChild)}(t),o=s.range(n).map((function(){return s.zeros(t.hyperplane.length)})),a=s.zeros(n),c=s.range(n).map((function(){return[-1,-1]})),h=s.range(e).map((function(){return s.range(r).map((function(){return-1}))}));return function t(r,n,e,o,a,s,u){var c;if(r.isLeaf)return o[s][0]=-u,(c=a[u]).splice.apply(c,i([0,r.indices.length],r.indices)),{nodeNum:s,leafNum:u+=1};n[s]=r.hyperplane,e[s]=r.offset,o[s][0]=s+1;var h=s,f=t(r.leftChild,n,e,o,a,s+1,u);return s=f.nodeNum,u=f.leafNum,o[h][1]=s+1,{nodeNum:(f=t(r.rightChild,n,e,o,a,s+1,u)).nodeNum,leafNum:f.leafNum}}(t,o,a,c,h,0,0),new u(o,a,c,h)}(t,o)}))},r.makeLeafArray=function(t){var r,n;if(t.length>0){var e=[];try{for(var a=o(t),s=a.next();!s.done;s=a.next()){var u=s.value;e.push.apply(e,i(u.indices))}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return e}return[[-1]]},r.searchFlatTree=function(t,r,n){for(var e=0;r.children[e][0]>0;){e=0===c(r.hyperplanes[e],r.offsets[e],t,n)?r.children[e][0]:r.children[e][1]}var i=-1*r.children[e][0];return r.indices[i]}},574:function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=n(575);r.UMAP=e.UMAP},575:function(t,r,n){"use strict";var e=this&&this.__awaiter||function(t,r,n,e){return new(n||(n=Promise))((function(i,o){function a(t){try{u(e.next(t))}catch(t){o(t)}}function s(t){try{u(e.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(r){r(t.value)})).then(a,s)}u((e=e.apply(t,r||[])).next())}))},i=this&&this.__generator||function(t,r){var n,e,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,e&&(i=2&o[0]?e.return:o[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,o[1])).done)return i;switch(e=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,e=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(t,a)}catch(t){o=[6,t],e=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__read||function(t,r){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,i,o=n.call(t),a=[];try{for(;(void 0===r||r-- >0)&&!(e=o.next()).done;)a.push(e.value)}catch(t){i={error:t}}finally{try{e&&!e.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(o(arguments[r]));return t},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var c=s(n(563)),h=s(n(564)),f=s(n(576)),l=s(n(565)),g=s(n(550)),m=u(n(577)),p=function(){function t(t){void 0===t&&(t={});var r=this;this.learningRate=1,this.localConnectivity=1,this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.negativeSampleRate=5,this.random=Math.random,this.repulsionStrength=1,this.setOpMixRatio=1,this.spread=1,this.transformQueueSize=4,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=v,this.isInitialized=!1,this.rpForest=[],this.embedding=[],this.optimizationState=new d;var n=function(n){void 0!==t[n]&&(r[n]=t[n])};n("distanceFn"),n("learningRate"),n("localConnectivity"),n("minDist"),n("nComponents"),n("nEpochs"),n("nNeighbors"),n("negativeSampleRate"),n("random"),n("repulsionStrength"),n("setOpMixRatio"),n("spread"),n("transformQueueSize")}return t.prototype.fit=function(t){return this.initializeFit(t),this.optimizeLayout(),this.embedding},t.prototype.fitAsync=function(t,r){return void 0===r&&(r=function(){return!0}),e(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return this.initializeFit(t),[4,this.optimizeLayoutAsync(r)];case 1:return n.sent(),[2,this.embedding]}}))}))},t.prototype.setSupervisedProjection=function(t,r){void 0===r&&(r={}),this.Y=t,this.targetMetric=r.targetMetric||this.targetMetric,this.targetWeight=r.targetWeight||this.targetWeight,this.targetNNeighbors=r.targetNNeighbors||this.targetNNeighbors},t.prototype.setPrecomputedKNN=function(t,r){this.knnIndices=t,this.knnDistances=r},t.prototype.initializeFit=function(t){if(this.X===t&&this.isInitialized)return this.getNEpochs();if(this.X=t,!this.knnIndices&&!this.knnDistances){var r=this.nearestNeighbors(t);this.knnIndices=r.knnIndices,this.knnDistances=r.knnDistances}this.graph=this.fuzzySimplicialSet(t,this.nNeighbors,this.setOpMixRatio),this.makeSearchFns(),this.searchGraph=this.makeSearchGraph(t),this.processGraphForSupervisedProjection();var n=this.initializeSimplicialSetEmbedding(),e=n.head,i=n.tail,o=n.epochsPerSample;return this.optimizationState.head=e,this.optimizationState.tail=i,this.optimizationState.epochsPerSample=o,this.initializeOptimization(),this.prepareForOptimizationLoop(),this.isInitialized=!0,this.getNEpochs()},t.prototype.makeSearchFns=function(){var t=f.makeInitializations(this.distanceFn),r=t.initFromTree,n=t.initFromRandom;this.initFromTree=r,this.initFromRandom=n,this.search=f.makeInitializedNNSearch(this.distanceFn)},t.prototype.makeSearchGraph=function(t){for(var r=this.knnIndices,n=this.knnDistances,e=[t.length,t.length],i=new h.SparseMatrix([],[],[],e),o=0;o<r.length;o++)for(var a=r[o],s=n[o],u=0;u<a.length;u++){var c=a[u],f=s[u];f>0&&i.set(o,c,f)}var l=h.transpose(i);return h.maximum(i,l)},t.prototype.transform=function(t){var r=this,n=this.X;if(void 0===n||0===n.length)throw new Error("No data has been fit.");var e=Math.floor(this.nNeighbors*this.transformQueueSize),i=f.initializeSearch(this.rpForest,n,t,e,this.initFromRandom,this.initFromTree,this.random),o=this.search(n,this.searchGraph,i,t),a=c.deheapSort(o),s=a.indices,u=a.weights;s=s.map((function(t){return t.slice(0,r.nNeighbors)})),u=u.map((function(t){return t.slice(0,r.nNeighbors)}));var l=Math.max(0,this.localConnectivity-1),m=this.smoothKNNDistance(u,this.nNeighbors,l),p=m.sigmas,v=m.rhos,d=this.computeMembershipStrengths(s,u,p,v),w=d.rows,y=d.cols,M=d.vals,b=[t.length,n.length],x=new h.SparseMatrix(w,y,M,b),C=h.normalize(x,"l1"),T=h.getCSR(C),E=t.length,R=S(g.reshape2d(T.indices,E,this.nNeighbors),g.reshape2d(T.values,E,this.nNeighbors),this.embedding),A=this.nEpochs?this.nEpochs/3:x.nRows<=1e4?100:30,k=x.getValues().reduce((function(t,r){return r>t?r:t}),0);x=x.map((function(t){return t<k/A?0:t})),x=h.eliminateZeros(x);var N=this.makeEpochsPerSample(x.getValues(),A),D=x.getRows(),j=x.getCols();return this.assignOptimizationStateParameters({headEmbedding:R,tailEmbedding:this.embedding,head:D,tail:j,currentEpoch:0,nEpochs:A,nVertices:x.getDims()[1],epochsPerSample:N}),this.prepareForOptimizationLoop(),this.optimizeLayout()},t.prototype.processGraphForSupervisedProjection=function(){var t=this.Y,r=this.X;if(t){if(t.length!==r.length)throw new Error("Length of X and y must be equal");if("categorical"===this.targetMetric){var n=this.targetWeight<1?1/(1-this.targetWeight)*2.5:1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,t,n)}}},t.prototype.step=function(){var t=this.optimizationState.currentEpoch;return t<this.getNEpochs()&&this.optimizeLayoutStep(t),this.optimizationState.currentEpoch},t.prototype.getEmbedding=function(){return this.embedding},t.prototype.nearestNeighbors=function(t){var r,n=this.distanceFn,e=this.nNeighbors,i=f.makeNNDescent(n,this.random),o=5+Math.floor(.5===(r=Math.pow(t.length,.5)/20)?0:Math.round(r)),a=Math.max(5,Math.floor(Math.round(function(t){return Math.log(t)/Math.log(2)}(t.length))));this.rpForest=l.makeForest(t,e,o,this.random);var s=i(t,l.makeLeafArray(this.rpForest),e,a);return{knnIndices:s.indices,knnDistances:s.weights}},t.prototype.fuzzySimplicialSet=function(t,r,n){void 0===n&&(n=1);var e=this.knnIndices,i=void 0===e?[]:e,o=this.knnDistances,a=void 0===o?[]:o,s=this.localConnectivity,u=this.smoothKNNDistance(a,r,s),c=u.sigmas,f=u.rhos,l=this.computeMembershipStrengths(i,a,c,f),g=l.rows,m=l.cols,p=l.vals,v=[t.length,t.length],d=new h.SparseMatrix(g,m,p,v),w=h.transpose(d),y=h.pairwiseMultiply(d,w),M=h.subtract(h.add(d,w),y),b=h.multiplyScalar(M,n),x=h.multiplyScalar(y,1-n);return h.add(b,x)},t.prototype.categoricalSimplicialSetIntersection=function(t,r,n,e){void 0===e&&(e=1);var i=b(t,r,e,n);return x(i=h.eliminateZeros(i))},t.prototype.smoothKNNDistance=function(t,r,n,e,i){void 0===n&&(n=1),void 0===e&&(e=64),void 0===i&&(i=1);for(var o=Math.log(r)/Math.log(2)*i,a=g.zeros(t.length),s=g.zeros(t.length),u=0;u<t.length;u++){var c=0,h=1/0,f=1,l=t[u],m=l.filter((function(t){return t>0}));if(m.length>=n){var p=Math.floor(n),v=n-p;p>0?(a[u]=m[p-1],v>1e-5&&(a[u]+=v*(m[p]-m[p-1]))):a[u]=v*m[0]}else m.length>0&&(a[u]=g.max(m));for(var d=0;d<e;d++){for(var w=0,y=1;y<t[u].length;y++){var M=t[u][y]-a[u];w+=M>0?Math.exp(-M/f):1}if(Math.abs(w-o)<1e-5)break;w>o?f=(c+(h=f))/2:(c=f,h===1/0?f*=2:f=(c+h)/2)}if(s[u]=f,a[u]>0){var b=g.mean(l);s[u]<.001*b&&(s[u]=.001*b)}else{var x=g.mean(t.map(g.mean));s[u]<.001*x&&(s[u]=.001*x)}}return{sigmas:s,rhos:a}},t.prototype.computeMembershipStrengths=function(t,r,n,e){for(var i=t.length,o=t[0].length,a=g.zeros(i*o),s=g.zeros(i*o),u=g.zeros(i*o),c=0;c<i;c++)for(var h=0;h<o;h++){var f=0;-1!==t[c][h]&&(f=t[c][h]===c?0:r[c][h]-e[c]<=0?1:Math.exp(-(r[c][h]-e[c])/n[c]),a[c*o+h]=c,s[c*o+h]=t[c][h],u[c*o+h]=f)}return{rows:a,cols:s,vals:u}},t.prototype.initializeSimplicialSetEmbedding=function(){for(var t=this,r=this.getNEpochs(),n=this.nComponents,e=this.graph.getValues(),i=0,o=0;o<e.length;o++){var a=e[o];i<e[o]&&(i=a)}var s=this.graph.map((function(t){return t<i/r?0:t}));this.embedding=g.zeros(s.nRows).map((function(){return g.zeros(n).map((function(){return 20*g.tauRand(t.random)-10}))}));var u=[],c=[],h=[];for(o=0;o<s.nRows;o++)for(var f=0;f<s.nCols;f++){(a=s.get(o,f))&&(u.push(a),h.push(o),c.push(f))}return{head:c,tail:h,epochsPerSample:this.makeEpochsPerSample(u,r)}},t.prototype.makeEpochsPerSample=function(t,r){var n=g.filled(t.length,-1),e=g.max(t),i=t.map((function(t){return t/e*r}));return i.forEach((function(t,e){t>0&&(n[e]=r/i[e])})),n},t.prototype.assignOptimizationStateParameters=function(t){Object.assign(this.optimizationState,t)},t.prototype.prepareForOptimizationLoop=function(){var t=this.repulsionStrength,r=this.learningRate,n=this.negativeSampleRate,e=this.optimizationState,i=e.epochsPerSample,o=e.headEmbedding,s=e.tailEmbedding,u=o[0].length,c=o.length===s.length,h=i.map((function(t){return t/n})),f=a(h),l=a(i);this.assignOptimizationStateParameters({epochOfNextSample:l,epochOfNextNegativeSample:f,epochsPerNegativeSample:h,moveOther:c,initialAlpha:r,alpha:r,gamma:t,dim:u})},t.prototype.initializeOptimization=function(){var t=this.embedding,r=this.embedding,n=this.optimizationState,e=n.head,i=n.tail,o=n.epochsPerSample,a=this.getNEpochs(),s=this.graph.nCols,u=M(this.spread,this.minDist),c=u.a,h=u.b;this.assignOptimizationStateParameters({headEmbedding:t,tailEmbedding:r,head:e,tail:i,epochsPerSample:o,a:c,b:h,nEpochs:a,nVertices:s})},t.prototype.optimizeLayoutStep=function(t){for(var r=this.optimizationState,n=r.head,e=r.tail,i=r.headEmbedding,o=r.tailEmbedding,a=r.epochsPerSample,s=r.epochOfNextSample,u=r.epochOfNextNegativeSample,c=r.epochsPerNegativeSample,h=r.moveOther,f=r.initialAlpha,l=r.alpha,m=r.gamma,p=r.a,v=r.b,d=r.dim,M=r.nEpochs,b=r.nVertices,x=0;x<a.length;x++)if(!(s[x]>t)){var S=n[x],C=e[x],T=i[S],E=o[C],R=y(T,E),A=0;R>0&&(A=-2*p*v*Math.pow(R,v-1),A/=p*Math.pow(R,v)+1);for(var k=0;k<d;k++){var N=w(A*(T[k]-E[k]),4);T[k]+=N*l,h&&(E[k]+=-N*l)}s[x]+=a[x];for(var D=Math.floor((t-u[x])/c[x]),j=0;j<D;j++){var O=g.tauRandInt(b,this.random),z=o[O],U=y(T,z),F=0;if(U>0)F=2*m*v,F/=(.001+U)*(p*Math.pow(U,v)+1);else if(S===O)continue;for(k=0;k<d;k++){N=4;F>0&&(N=w(F*(T[k]-z[k]),4)),T[k]+=N*l}}u[x]+=D*c[x]}return r.alpha=f*(1-t/M),r.currentEpoch+=1,i},t.prototype.optimizeLayoutAsync=function(t){var r=this;return void 0===t&&(t=function(){return!0}),new Promise((function(n,o){var a=function(){return e(r,void 0,void 0,(function(){var r,e,s,u,c,h;return i(this,(function(i){try{if(r=this.optimizationState,e=r.nEpochs,s=r.currentEpoch,this.embedding=this.optimizeLayoutStep(s),u=this.optimizationState.currentEpoch,c=!1===t(u),h=u===e,c||h)return[2,n(h)];a()}catch(t){o(t)}return[2]}))}))};a()}))},t.prototype.optimizeLayout=function(t){void 0===t&&(t=function(){return!0});for(var r=!1,n=[];!r;){var e=this.optimizationState,i=e.nEpochs,o=e.currentEpoch;n=this.optimizeLayoutStep(o);var a=this.optimizationState.currentEpoch,s=!1===t(a);r=a===i||s}return n},t.prototype.getNEpochs=function(){var t=this.graph;if(this.nEpochs>0)return this.nEpochs;var r=t.nRows;return r<=2500?500:r<=5e3?400:r<=7500?300:200},t}();function v(t,r){for(var n=0,e=0;e<t.length;e++)n+=Math.pow(t[e]-r[e],2);return Math.sqrt(n)}r.UMAP=p,r.euclidean=v,r.cosine=function(t,r){for(var n=0,e=0,i=0,o=0;o<t.length;o++)n+=t[o]*r[o],e+=Math.pow(t[o],2),i+=Math.pow(r[o],2);return 0===e&&0===i?0:0===e||0===i?1:1-n/Math.sqrt(e*i)};var d=function(){this.currentEpoch=0,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0};function w(t,r){return t>r?r:t<-r?-r:t}function y(t,r){for(var n=0,e=0;e<t.length;e++)n+=Math.pow(t[e]-r[e],2);return n}function M(t,r){var n=g.linear(0,3*t,300).map((function(t){return t<r?1:t})),e=g.zeros(n.length).map((function(e,i){return n[i]>=r?Math.exp(-(n[i]-r)/t):e})),i={x:n,y:e},a={damping:1.5,initialValues:[.5,.5],gradientDifference:.1,maxIterations:100,errorTolerance:.01},s=m.default(i,(function(t){var r=o(t,2),n=r[0],e=r[1];return function(t){return 1/(1+n*Math.pow(t,2*e))}}),a).parameterValues,u=o(s,2);return{a:u[0],b:u[1]}}function b(t,r,n,e){return void 0===n&&(n=1),void 0===e&&(e=5),t.map((function(t,i,o){return-1===r[i]||-1===r[o]?t*Math.exp(-n):r[i]!==r[o]?t*Math.exp(-e):t}))}function x(t){t=h.normalize(t,"max");var r=h.transpose(t),n=h.pairwiseMultiply(r,t);return t=h.add(t,h.subtract(r,n)),h.eliminateZeros(t)}function S(t,r,n){for(var e=g.zeros(t.length).map((function(t){return g.zeros(n[0].length)})),i=0;i<t.length;i++)for(var o=0;o<t[0].length;o++)for(var a=0;a<n[0].length;a++){var s=t[i][o];e[i][a]+=r[i][o]*n[s][a]}return e}r.findABParams=M,r.fastIntersection=b,r.resetLocalConnectivity=x,r.initTransform=S},576:function(t,r,n){"use strict";var e=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],n=0;return r?r.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var o=i(n(563)),a=i(n(564)),s=i(n(565)),u=i(n(550));r.makeNNDescent=function(t,r){return function(n,e,i,a,s,c,h,f){void 0===a&&(a=10),void 0===s&&(s=50),void 0===c&&(c=.001),void 0===h&&(h=.5),void 0===f&&(f=!0);for(var l=n.length,g=o.makeHeap(n.length,i),m=0;m<n.length;m++)for(var p=o.rejectionSample(i,n.length,r),v=0;v<p.length;v++){var d=t(n[m],n[p[v]]);o.heapPush(g,m,d,p[v],1),o.heapPush(g,p[v],d,m,1)}if(f)for(var w=0;w<e.length;w++)for(m=0;m<e[w].length&&!(e[w][m]<0);m++)for(v=m+1;v<e[w].length&&!(e[w][v]<0);v++){d=t(n[e[w][m]],n[e[w][v]]);o.heapPush(g,e[w][m],d,e[w][v],1),o.heapPush(g,e[w][v],d,e[w][m],1)}for(w=0;w<a;w++){var y=o.buildCandidates(g,l,i,s,r),M=0;for(m=0;m<l;m++)for(v=0;v<s;v++){var b=Math.floor(y[0][m][v]);if(!(b<0||u.tauRand(r)<h))for(var x=0;x<s;x++){var S=Math.floor(y[0][m][x]),C=y[2][m][v],T=y[2][m][x];if(!(S<0||!C&&!T)){d=t(n[b],n[S]);M+=o.heapPush(g,b,d,S,1),M+=o.heapPush(g,S,d,b,1)}}}if(M<=c*i*n.length)break}return o.deheapSort(g)}},r.makeInitializations=function(t){return{initFromRandom:function(r,n,e,i,a){for(var s=0;s<e.length;s++)for(var c=u.rejectionSample(r,n.length,a),h=0;h<c.length;h++)if(!(c[h]<0)){var f=t(n[c[h]],e[s]);o.heapPush(i,s,f,c[h],1)}},initFromTree:function(r,n,e,i,a){for(var u=0;u<e.length;u++)for(var c=s.searchFlatTree(e[u],r,a),h=0;h<c.length;h++){if(c[h]<0)return;var f=t(n[c[h]],e[u]);o.heapPush(i,u,f,c[h],1)}}}},r.makeInitializedNNSearch=function(t){return function(r,n,i,s){for(var u,c,h=a.getCSR(n),f=h.indices,l=h.indptr,g=0;g<s.length;g++)for(var m=new Set(i[0][g]);;){var p=o.smallestFlagged(i,g);if(-1===p)break;var v=f.slice(l[p],l[p+1]);try{for(var d=e(v),w=d.next();!w.done;w=d.next()){var y=w.value;if(y!==p&&-1!==y&&!m.has(y)){var M=t(r[y],s[g]);o.uncheckedHeapPush(i,g,M,y,1),m.add(y)}}}catch(t){u={error:t}}finally{try{w&&!w.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}}return i}},r.initializeSearch=function(t,r,n,i,a,s,u){var c,h,f=o.makeHeap(n.length,i);if(a(i,r,n,f,u),t)try{for(var l=e(t),g=l.next();!g.done;g=l.next()){s(g.value,r,n,f,u)}}catch(t){c={error:t}}finally{try{g&&!g.done&&(h=l.return)&&h.call(l)}finally{if(c)throw c.error}}return f}},577:function(t,r,n){"use strict";function e(t,r,n){var e=0;const i=n(r);for(var o=0;o<t.x.length;o++)e+=Math.abs(t.y[o]-i(t.x[o]));return e}n.r(r);var i=n(557),o=n.n(i);var a=function(t){if(!o()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var r=t[0],n=1;n<t.length;n++)t[n]>r&&(r=t[n]);return r};var s=function(t){if(!o()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var r=t[0],n=1;n<t.length;n++)t[n]<r&&(r=t[n]);return r};var u=function(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!o()(n.output))throw new TypeError("output option must be an array if specified");r=n.output}else r=new Array(t.length);var e=s(t),i=a(t);if(e===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var u=n.min,c=void 0===u?n.autoMinMax?e:0:u,h=n.max,f=void 0===h?n.autoMinMax?i:1:h;if(c>=f)throw new RangeError("min option must be smaller than max option");for(var l=(f-c)/(i-e),g=0;g<t.length;g++)r[g]=(t[g]-e)*l+c;return r};class c{constructor(t){var r,n,e,i,o,a,s,u,c,h=(t=z.checkMatrix(t)).clone(),f=h.rows,l=h.columns,g=new Array(f),m=1;for(r=0;r<f;r++)g[r]=r;for(u=new Array(f),n=0;n<l;n++){for(r=0;r<f;r++)u[r]=h.get(r,n);for(r=0;r<f;r++){for(c=Math.min(r,n),o=0,e=0;e<c;e++)o+=h.get(r,e)*u[e];u[r]-=o,h.set(r,n,u[r])}for(i=n,r=n+1;r<f;r++)Math.abs(u[r])>Math.abs(u[i])&&(i=r);if(i!==n){for(e=0;e<l;e++)a=h.get(i,e),h.set(i,e,h.get(n,e)),h.set(n,e,a);s=g[i],g[i]=g[n],g[n]=s,m=-m}if(n<f&&0!==h.get(n,n))for(r=n+1;r<f;r++)h.set(r,n,h.get(r,n)/h.get(n,n))}this.LU=h,this.pivotVector=g,this.pivotSign=m}isSingular(){for(var t=this.LU,r=t.columns,n=0;n<r;n++)if(0===t[n][n])return!0;return!1}solve(t){t=O.checkMatrix(t);var r=this.LU;if(r.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,e,i,o=t.columns,a=t.subMatrixRow(this.pivotVector,0,o-1),s=r.columns;for(i=0;i<s;i++)for(n=i+1;n<s;n++)for(e=0;e<o;e++)a[n][e]-=a[i][e]*r[n][i];for(i=s-1;i>=0;i--){for(e=0;e<o;e++)a[i][e]/=r[i][i];for(n=0;n<i;n++)for(e=0;e<o;e++)a[n][e]-=a[i][e]*r[n][i]}return a}get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var r=this.pivotSign,n=t.columns,e=0;e<n;e++)r*=t[e][e];return r}get lowerTriangularMatrix(){for(var t=this.LU,r=t.rows,n=t.columns,e=new O(r,n),i=0;i<r;i++)for(var o=0;o<n;o++)e[i][o]=i>o?t[i][o]:i===o?1:0;return e}get upperTriangularMatrix(){for(var t=this.LU,r=t.rows,n=t.columns,e=new O(r,n),i=0;i<r;i++)for(var o=0;o<n;o++)e[i][o]=i<=o?t[i][o]:0;return e}get pivotPermutationVector(){return this.pivotVector.slice()}}function h(t,r){var n=0;return Math.abs(t)>Math.abs(r)?(n=r/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==r?(n=t/r,Math.abs(r)*Math.sqrt(1+n*n)):0}function f(t,r,n){for(var e=new Array(t),i=0;i<t;i++){e[i]=new Array(r);for(var o=0;o<r;o++)e[i][o]=n}return e}class l{constructor(t,r={}){var n=(t=z.checkMatrix(t)).rows,e=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=r;var s,u=Boolean(i),c=Boolean(o),l=!1;if(n<e)if(a){n=(s=t.transpose()).rows,e=s.columns,l=!0;var g=u;u=c,c=g}else s=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=t.clone();var m=Math.min(n,e),p=Math.min(n+1,e),v=new Array(p),d=f(n,m,0),w=f(e,e,0),y=new Array(e),M=new Array(n),b=new Array(p);for(let t=0;t<p;t++)b[t]=t;var x=Math.min(n-1,e),S=Math.max(0,Math.min(e-2,n)),C=Math.max(x,S);for(let t=0;t<C;t++){if(t<x){v[t]=0;for(let r=t;r<n;r++)v[t]=h(v[t],s[r][t]);if(0!==v[t]){s[t][t]<0&&(v[t]=-v[t]);for(let r=t;r<n;r++)s[r][t]/=v[t];s[t][t]+=1}v[t]=-v[t]}for(let r=t+1;r<e;r++){if(t<x&&0!==v[t]){let e=0;for(let i=t;i<n;i++)e+=s[i][t]*s[i][r];e=-e/s[t][t];for(let i=t;i<n;i++)s[i][r]+=e*s[i][t]}y[r]=s[t][r]}if(u&&t<x)for(let r=t;r<n;r++)d[r][t]=s[r][t];if(t<S){y[t]=0;for(let r=t+1;r<e;r++)y[t]=h(y[t],y[r]);if(0!==y[t]){y[t+1]<0&&(y[t]=0-y[t]);for(let r=t+1;r<e;r++)y[r]/=y[t];y[t+1]+=1}if(y[t]=-y[t],t+1<n&&0!==y[t]){for(let r=t+1;r<n;r++)M[r]=0;for(let r=t+1;r<n;r++)for(let n=t+1;n<e;n++)M[r]+=y[n]*s[r][n];for(let r=t+1;r<e;r++){let e=-y[r]/y[t+1];for(let i=t+1;i<n;i++)s[i][r]+=e*M[i]}}if(c)for(let r=t+1;r<e;r++)w[r][t]=y[r]}}let T=Math.min(e,n+1);if(x<e&&(v[x]=s[x][x]),n<T&&(v[T-1]=0),S+1<T&&(y[S]=s[S][T-1]),y[T-1]=0,u){for(let t=x;t<m;t++){for(let r=0;r<n;r++)d[r][t]=0;d[t][t]=1}for(let t=x-1;t>=0;t--)if(0!==v[t]){for(let r=t+1;r<m;r++){let e=0;for(let i=t;i<n;i++)e+=d[i][t]*d[i][r];e=-e/d[t][t];for(let i=t;i<n;i++)d[i][r]+=e*d[i][t]}for(let r=t;r<n;r++)d[r][t]=-d[r][t];d[t][t]=1+d[t][t];for(let r=0;r<t-1;r++)d[r][t]=0}else{for(let r=0;r<n;r++)d[r][t]=0;d[t][t]=1}}if(c)for(let t=e-1;t>=0;t--){if(t<S&&0!==y[t])for(let r=t+1;r<e;r++){let n=0;for(let i=t+1;i<e;i++)n+=w[i][t]*w[i][r];n=-n/w[t+1][t];for(let i=t+1;i<e;i++)w[i][r]+=n*w[i][t]}for(let r=0;r<e;r++)w[r][t]=0;w[t][t]=1}for(var E=T-1,R=Number.EPSILON;T>0;){let t,r;for(t=T-2;t>=-1&&-1!==t;t--){const r=Number.MIN_VALUE+R*Math.abs(v[t]+Math.abs(v[t+1]));if(Math.abs(y[t])<=r||Number.isNaN(y[t])){y[t]=0;break}}if(t===T-2)r=4;else{let n;for(n=T-1;n>=t&&n!==t;n--){let r=(n!==T?Math.abs(y[n]):0)+(n!==t+1?Math.abs(y[n-1]):0);if(Math.abs(v[n])<=R*r){v[n]=0;break}}n===t?r=3:n===T-1?r=1:(r=2,t=n)}switch(t++,r){case 1:{let r=y[T-2];y[T-2]=0;for(let n=T-2;n>=t;n--){let i=h(v[n],r),o=v[n]/i,a=r/i;if(v[n]=i,n!==t&&(r=-a*y[n-1],y[n-1]=o*y[n-1]),c)for(let t=0;t<e;t++)i=o*w[t][n]+a*w[t][T-1],w[t][T-1]=-a*w[t][n]+o*w[t][T-1],w[t][n]=i}break}case 2:{let r=y[t-1];y[t-1]=0;for(let e=t;e<T;e++){let i=h(v[e],r),o=v[e]/i,a=r/i;if(v[e]=i,r=-a*y[e],y[e]=o*y[e],u)for(let r=0;r<n;r++)i=o*d[r][e]+a*d[r][t-1],d[r][t-1]=-a*d[r][e]+o*d[r][t-1],d[r][e]=i}break}case 3:{const r=Math.max(Math.abs(v[T-1]),Math.abs(v[T-2]),Math.abs(y[T-2]),Math.abs(v[t]),Math.abs(y[t])),i=v[T-1]/r,o=v[T-2]/r,a=y[T-2]/r,s=v[t]/r,f=y[t]/r,l=((o+i)*(o-i)+a*a)/2,g=i*a*(i*a);let m=0;0===l&&0===g||(m=l<0?0-Math.sqrt(l*l+g):Math.sqrt(l*l+g),m=g/(l+m));let p=(s+i)*(s-i)+m,M=s*f;for(let r=t;r<T-1;r++){let i=h(p,M);0===i&&(i=Number.MIN_VALUE);let o=p/i,a=M/i;if(r!==t&&(y[r-1]=i),p=o*v[r]+a*y[r],y[r]=o*y[r]-a*v[r],M=a*v[r+1],v[r+1]=o*v[r+1],c)for(let t=0;t<e;t++)i=o*w[t][r]+a*w[t][r+1],w[t][r+1]=-a*w[t][r]+o*w[t][r+1],w[t][r]=i;if(i=h(p,M),0===i&&(i=Number.MIN_VALUE),o=p/i,a=M/i,v[r]=i,p=o*y[r]+a*v[r+1],v[r+1]=-a*y[r]+o*v[r+1],M=a*y[r+1],y[r+1]=o*y[r+1],u&&r<n-1)for(let t=0;t<n;t++)i=o*d[t][r]+a*d[t][r+1],d[t][r+1]=-a*d[t][r]+o*d[t][r+1],d[t][r]=i}y[T-2]=p,1;break}case 4:if(v[t]<=0&&(v[t]=v[t]<0?-v[t]:0,c))for(let r=0;r<=E;r++)w[r][t]=-w[r][t];for(;t<E&&!(v[t]>=v[t+1]);){let r=v[t];if(v[t]=v[t+1],v[t+1]=r,c&&t<e-1)for(let n=0;n<e;n++)r=w[n][t+1],w[n][t+1]=w[n][t],w[n][t]=r;if(u&&t<n-1)for(let e=0;e<n;e++)r=d[e][t+1],d[e][t+1]=d[e][t],d[e][t]=r;t++}0,T--}}if(l){var A=w;w=d,d=A}this.m=n,this.n=e,this.s=v,this.U=d,this.V=w}solve(t){var r=t,n=this.threshold,e=this.s.length,i=O.zeros(e,e);for(let t=0;t<e;t++)Math.abs(this.s[t])<=n?i[t][t]=0:i[t][t]=1/this.s[t];var o=this.U,a=this.rightSingularVectors,s=a.mmul(i),u=a.rows,c=o.length,h=O.zeros(u,c);for(let t=0;t<u;t++)for(let r=0;r<c;r++){let n=0;for(let i=0;i<e;i++)n+=s[t][i]*o[r][i];h[t][r]=n}return h.mmul(r)}solveForDiagonal(t){return this.solve(O.diag(t))}inverse(){var t=this.V,r=this.threshold,n=t.length,e=t[0].length,i=new O(n,this.s.length);for(let o=0;o<n;o++)for(let n=0;n<e;n++)Math.abs(this.s[n])>r?i[o][n]=t[o][n]/this.s[n]:i[o][n]=0;var o=this.U,a=o.length,s=o[0].length,u=new O(n,a);for(let t=0;t<n;t++)for(let r=0;r<a;r++){let n=0;for(let e=0;e<s;e++)n+=i[t][e]*o[r][e];u[t][r]=n}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,n=this.s,e=0,i=n.length;e<i;e++)n[e]>t&&r++;return r}get diagonal(){return this.s}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return O.isMatrix(this.U)||(this.U=new O(this.U)),this.U}get rightSingularVectors(){return O.isMatrix(this.V)||(this.V=new O(this.V)),this.V}get diagonalMatrix(){return O.diag(this.s)}}function g(t,r,n){var e=n?t.rows:t.rows-1;if(r<0||r>e)throw new RangeError("Row index out of range")}function m(t,r,n){var e=n?t.columns:t.columns-1;if(r<0||r>e)throw new RangeError("Column index out of range")}function p(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function v(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function d(t,r,n){return{row:w(t,r),column:y(t,n)}}function w(t,r){if("object"!=typeof r)throw new TypeError("unexpected type for row indices");if(r.some(r=>r<0||r>=t.rows))throw new RangeError("row indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function y(t,r){if("object"!=typeof r)throw new TypeError("unexpected type for column indices");if(r.some(r=>r<0||r>=t.columns))throw new RangeError("column indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function M(t,r,n,e,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(b("startRow",r),b("endRow",n),b("startColumn",e),b("endColumn",i),r>n||e>i||r<0||r>=t.rows||n<0||n>=t.rows||e<0||e>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function b(t,r){if("number"!=typeof r)throw new TypeError(`${t} must be a number`)}class x extends(j()){constructor(t,r,n){super(),this.matrix=t,this.rows=r,this.columns=n}static get[Symbol.species](){return O}}class S extends x{constructor(t){super(t,t.columns,t.rows)}set(t,r,n){return this.matrix.set(r,t,n),this}get(t,r){return this.matrix.get(r,t)}}class C extends x{constructor(t,r){super(t,1,t.columns),this.row=r}set(t,r,n){return this.matrix.set(this.row,r,n),this}get(t,r){return this.matrix.get(this.row,r)}}class T extends x{constructor(t,r,n,e,i){M(t,r,n,e,i),super(t,n-r+1,i-e+1),this.startRow=r,this.startColumn=e}set(t,r,n){return this.matrix.set(this.startRow+t,this.startColumn+r,n),this}get(t,r){return this.matrix.get(this.startRow+t,this.startColumn+r)}}class E extends x{constructor(t,r,n){var e=d(t,r,n);super(t,e.row.length,e.column.length),this.rowIndices=e.row,this.columnIndices=e.column}set(t,r,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[r],n),this}get(t,r){return this.matrix.get(this.rowIndices[t],this.columnIndices[r])}}class R extends x{constructor(t,r){super(t,(r=w(t,r)).length,t.columns),this.rowIndices=r}set(t,r,n){return this.matrix.set(this.rowIndices[t],r,n),this}get(t,r){return this.matrix.get(this.rowIndices[t],r)}}class A extends x{constructor(t,r){r=y(t,r),super(t,t.rows,r.length),this.columnIndices=r}set(t,r,n){return this.matrix.set(t,this.columnIndices[r],n),this}get(t,r){return this.matrix.get(t,this.columnIndices[r])}}class k extends x{constructor(t,r){super(t,t.rows,1),this.column=r}set(t,r,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}class N extends x{constructor(t){super(t,t.rows,t.columns)}set(t,r,n){return this.matrix.set(this.rows-t-1,r,n),this}get(t,r){return this.matrix.get(this.rows-t-1,r)}}class D extends x{constructor(t){super(t,t.rows,t.columns)}set(t,r,n){return this.matrix.set(t,this.columns-r-1,n),this}get(t,r){return this.matrix.get(t,this.columns-r-1)}}function j(t){void 0===t&&(t=Object);class r extends t{static get[Symbol.species](){return this}static from1DArray(t,r,n){if(t*r!==n.length)throw new RangeError("Data length does not match given dimensions");for(var e=new this(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)e.set(i,o,n[i*r+o]);return e}static rowVector(t){for(var r=new this(1,t.length),n=0;n<t.length;n++)r.set(0,n,t[n]);return r}static columnVector(t){for(var r=new this(t.length,1),n=0;n<t.length;n++)r.set(n,0,t[n]);return r}static empty(t,r){return new this(t,r)}static zeros(t,r){return this.empty(t,r).fill(0)}static ones(t,r){return this.empty(t,r).fill(1)}static rand(t,r,n){void 0===n&&(n=Math.random);for(var e=this.empty(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)e.set(i,o,n());return e}static randInt(t,r,n,e){void 0===n&&(n=1e3),void 0===e&&(e=Math.random);for(var i=this.empty(t,r),o=0;o<t;o++)for(var a=0;a<r;a++){var s=Math.floor(e()*n);i.set(o,a,s)}return i}static eye(t,r,n){void 0===r&&(r=t),void 0===n&&(n=1);for(var e=Math.min(t,r),i=this.zeros(t,r),o=0;o<e;o++)i.set(o,o,n);return i}static diag(t,r,n){var e=t.length;void 0===r&&(r=e),void 0===n&&(n=r);for(var i=Math.min(e,r,n),o=this.zeros(r,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var n=t.rows,e=t.columns,i=new this(n,e),o=0;o<n;o++)for(var a=0;a<e;a++)i.set(o,a,Math.min(t.get(o,a),r.get(o,a)));return i}static max(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var n=t.rows,e=t.columns,i=new this(n,e),o=0;o<n;o++)for(var a=0;a<e;a++)i.set(o,a,Math.max(t.get(o,a),r.get(o,a)));return i}static checkMatrix(t){return r.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var r=this.rows,n=this.columns,e=0;e<r;e++)for(var i=0;i<n;i++)t.call(this,e,i);return this}to1DArray(){for(var t=new Array(this.size),r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)t[r*this.columns+n]=this.get(r,n);return t}to2DArray(){for(var t=new Array(this.rows),r=0;r<this.rows;r++){t[r]=new Array(this.columns);for(var n=0;n<this.columns;n++)t[r][n]=this.get(r,n)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}isEchelonForm(){let t=0,r=0,n=-1,e=!0,i=!1;for(;t<this.rows&&e;){for(r=0,i=!1;r<this.columns&&!1===i;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>n?(i=!0,n=r):(e=!1,i=!0);t++}return e}isReducedEchelonForm(){let t=0,r=0,n=-1,e=!0,i=!1;for(;t<this.rows&&e;){for(r=0,i=!1;r<this.columns&&!1===i;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>n?(i=!0,n=r):(e=!1,i=!0);for(let n=r+1;n<this.rows;n++)0!==this.get(t,n)&&(e=!1);t++}return e}set(t,r,n){throw new Error("set method is unimplemented")}get(t,r){throw new Error("get method is unimplemented")}repeat(t,r){t=t||1,r=r||1;for(var n=new this.constructor[Symbol.species](this.rows*t,this.columns*r),e=0;e<t;e++)for(var i=0;i<r;i++)n.setSubMatrix(this,this.rows*e,this.columns*i);return n}fill(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,t);return this}neg(){return this.mulS(-1)}getRow(t){g(this,t);for(var r=new Array(this.columns),n=0;n<this.columns;n++)r[n]=this.get(t,n);return r}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,r){g(this,t),r=p(this,r);for(var n=0;n<this.columns;n++)this.set(t,n,r[n]);return this}swapRows(t,r){g(this,t),g(this,r);for(var n=0;n<this.columns;n++){var e=this.get(t,n);this.set(t,n,this.get(r,n)),this.set(r,n,e)}return this}getColumn(t){m(this,t);for(var r=new Array(this.rows),n=0;n<this.rows;n++)r[n]=this.get(n,t);return r}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,r){m(this,t),r=v(this,r);for(var n=0;n<this.rows;n++)this.set(n,t,r[n]);return this}swapColumns(t,r){m(this,t),m(this,r);for(var n=0;n<this.rows;n++){var e=this.get(n,t);this.set(n,t,this.get(n,r)),this.set(n,r,e)}return this}addRowVector(t){t=p(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+t[n]);return this}subRowVector(t){t=p(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-t[n]);return this}mulRowVector(t){t=p(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*t[n]);return this}divRowVector(t){t=p(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/t[n]);return this}addColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+t[r]);return this}subColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-t[r]);return this}mulColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*t[r]);return this}divColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/t[r]);return this}mulRow(t,r){g(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*r);return this}mulColumn(t,r){m(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*r);return this}max(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n));return t}maxIndex(){for(var t=this.get(0,0),r=[0,0],n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.get(n,e)>t&&(t=this.get(n,e),r[0]=n,r[1]=e);return r}min(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n));return t}minIndex(){for(var t=this.get(0,0),r=[0,0],n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.get(n,e)<t&&(t=this.get(n,e),r[0]=n,r[1]=e);return r}maxRow(t){g(this,t);for(var r=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>r&&(r=this.get(t,n));return r}maxRowIndex(t){g(this,t);for(var r=this.get(t,0),n=[t,0],e=1;e<this.columns;e++)this.get(t,e)>r&&(r=this.get(t,e),n[1]=e);return n}minRow(t){g(this,t);for(var r=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<r&&(r=this.get(t,n));return r}minRowIndex(t){g(this,t);for(var r=this.get(t,0),n=[t,0],e=1;e<this.columns;e++)this.get(t,e)<r&&(r=this.get(t,e),n[1]=e);return n}maxColumn(t){m(this,t);for(var r=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>r&&(r=this.get(n,t));return r}maxColumnIndex(t){m(this,t);for(var r=this.get(0,t),n=[0,t],e=1;e<this.rows;e++)this.get(e,t)>r&&(r=this.get(e,t),n[0]=e);return n}minColumn(t){m(this,t);for(var r=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<r&&(r=this.get(n,t));return r}minColumnIndex(t){m(this,t);for(var r=this.get(0,t),n=[0,t],e=1;e<this.rows;e++)this.get(e,t)<r&&(r=this.get(e,t),n[0]=e);return n}diag(){for(var t=Math.min(this.rows,this.columns),r=new Array(t),n=0;n<t;n++)r[n]=this.get(n,n);return r}sum(t){switch(t){case"row":return function(t){for(var r=O.zeros(t.rows,1),n=0;n<t.rows;++n)for(var e=0;e<t.columns;++e)r.set(n,0,r.get(n,0)+t.get(n,e));return r}(this);case"column":return function(t){for(var r=O.zeros(1,t.columns),n=0;n<t.rows;++n)for(var e=0;e<t.columns;++e)r.set(0,e,r.get(0,e)+t.get(n,e));return r}(this);default:return function(t){for(var r=0,n=0;n<t.rows;n++)for(var e=0;e<t.columns;e++)r+=t.get(n,e);return r}(this)}}mean(){return this.sum()/this.size}prod(){for(var t=1,r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)t*=this.get(r,n);return t}norm(t="frobenius"){var r=0;if("max"===t)return this.max();if("frobenius"===t){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r+=this.get(n,e)*this.get(n,e);return Math.sqrt(r)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){for(var t=0,r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)t+=this.get(r,n),this.set(r,n,t);return this}dot(t){r.isMatrix(t)&&(t=t.to1DArray());var n=this.to1DArray();if(n.length!==t.length)throw new RangeError("vectors do not have the same size");for(var e=0,i=0;i<n.length;i++)e+=n[i]*t[i];return e}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var r=this.rows,n=this.columns,e=t.columns,i=new this.constructor[Symbol.species](r,e),o=new Array(n),a=0;a<e;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u=0;u<r;u++){var c=0;for(s=0;s<n;s++)c+=this.get(u,s)*o[s];i.set(u,a,c)}}return i}strassen2x2(t){var r=new this.constructor[Symbol.species](2,2);const n=this.get(0,0),e=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),h=(n+u)*(e+c),f=(a+u)*e,l=n*(o-c),g=u*(s-e),m=(n+i)*c,p=h+g-m+(i-u)*(s+c),v=l+m,d=f+g,w=h-f+l+(a-n)*(e+o);return r.set(0,0,p),r.set(0,1,v),r.set(1,0,d),r.set(1,1,w),r}strassen3x3(t){var r=new this.constructor[Symbol.species](3,3);const n=this.get(0,0),e=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),h=this.get(2,2),f=t.get(0,0),l=t.get(0,1),g=t.get(0,2),m=t.get(1,0),p=t.get(1,1),v=t.get(1,2),d=t.get(2,0),w=t.get(2,1),y=t.get(2,2),M=(n-o)*(-l+p),b=(-n+o+a)*(f-l+p),x=(o+a)*(-f+l),S=n*f,C=(-n+u+c)*(f-g+v),T=(-n+u)*(g-v),E=(u+c)*(-f+g),R=(-i+c+h)*(p+d-w),A=(i-h)*(p-w),k=i*d,N=(c+h)*(-d+w),D=(-i+a+s)*(v+d-y),j=(i-s)*(v-y),O=(a+s)*(-d+y),z=S+k+e*m,U=(n+e+i-o-a-c-h)*p+b+x+S+R+k+N,F=S+C+E+(n+e+i-a-s-u-c)*v+k+D+O,V=M+a*(-f+l+m-p-v-d+y)+b+S+k+D+j,I=M+b+x+S+s*w,_=k+D+j+O+o*g,P=S+C+T+c*(-f+g+m-p-v-d+w)+R+A+k,L=R+A+k+N+u*l,q=S+C+T+E+h*y;return r.set(0,0,z),r.set(0,1,U),r.set(0,2,F),r.set(1,0,V),r.set(1,1,I),r.set(1,2,_),r.set(2,0,P),r.set(2,1,L),r.set(2,2,q),r}mmulStrassen(t){var n=this.clone(),e=n.rows,i=n.columns,o=t.rows,a=t.columns;function s(t,n,e){var i=t.rows,o=t.columns;if(i===n&&o===e)return t;var a=r.zeros(n,e);return a=a.setSubMatrix(t,0,0)}i!==o&&console.warn(`Multiplying ${e} x ${i} and ${o} x ${a} matrix: dimensions do not match.`);var u=Math.max(e,o),c=Math.max(i,a);return function t(n,e,i,o){if(i<=512||o<=512)return n.mmul(e);i%2==1&&o%2==1?(n=s(n,i+1,o+1),e=s(e,i+1,o+1)):i%2==1?(n=s(n,i+1,o),e=s(e,i+1,o)):o%2==1&&(n=s(n,i,o+1),e=s(e,i,o+1));var a=parseInt(n.rows/2,10),u=parseInt(n.columns/2,10),c=n.subMatrix(0,a-1,0,u-1),h=e.subMatrix(0,a-1,0,u-1),f=n.subMatrix(0,a-1,u,n.columns-1),l=e.subMatrix(0,a-1,u,e.columns-1),g=n.subMatrix(a,n.rows-1,0,u-1),m=e.subMatrix(a,e.rows-1,0,u-1),p=n.subMatrix(a,n.rows-1,u,n.columns-1),v=e.subMatrix(a,e.rows-1,u,e.columns-1),d=t(r.add(c,p),r.add(h,v),a,u),w=t(r.add(g,p),h,a,u),y=t(c,r.sub(l,v),a,u),M=t(p,r.sub(m,h),a,u),b=t(r.add(c,f),v,a,u),x=t(r.sub(g,c),r.add(h,l),a,u),S=t(r.sub(f,p),r.add(m,v),a,u),C=r.add(d,M);C.sub(b),C.add(S);var T=r.add(y,b),E=r.add(w,M),R=r.sub(d,w);R.add(y),R.add(x);var A=r.zeros(2*C.rows,2*C.columns);return(A=(A=(A=(A=A.setSubMatrix(C,0,0)).setSubMatrix(T,C.rows,0)).setSubMatrix(E,0,C.columns)).setSubMatrix(R,C.rows,C.columns)).subMatrix(0,i-1,0,o-1)}(n=s(n,u,c),t=s(t,u,c),u,c)}scaleRows(t,r){if((t=void 0===t?0:t)>=(r=void 0===r?1:r))throw new RangeError("min should be strictly smaller than max");for(var n=this.constructor.empty(this.rows,this.columns),e=0;e<this.rows;e++){var i=u(this.getRow(e),{min:t,max:r});n.setRow(e,i)}return n}scaleColumns(t,r){if((t=void 0===t?0:t)>=(r=void 0===r?1:r))throw new RangeError("min should be strictly smaller than max");for(var n=this.constructor.empty(this.rows,this.columns),e=0;e<this.columns;e++){var i=u(this.getColumn(e),{min:t,max:r});n.setColumn(e,i)}return n}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var r=this.rows,n=this.columns,e=t.rows,i=t.columns,o=new this.constructor[Symbol.species](r*e,n*i),a=0;a<r;a++)for(var s=0;s<n;s++)for(var u=0;u<e;u++)for(var c=0;c<i;c++)o[e*a+u][i*s+c]=this.get(a,s)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)t.set(n,r,this.get(r,n));return t}sortRows(t){void 0===t&&(t=n);for(var r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(t));return this}sortColumns(t){void 0===t&&(t=n);for(var r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(t));return this}subMatrix(t,r,n,e){M(this,t,r,n,e);for(var i=new this.constructor[Symbol.species](r-t+1,e-n+1),o=t;o<=r;o++)for(var a=n;a<=e;a++)i[o-t][a-n]=this.get(o,a);return i}subMatrixRow(t,r,n){if(void 0===r&&(r=0),void 0===n&&(n=this.columns-1),r>n||r<0||r>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var e=new this.constructor[Symbol.species](t.length,n-r+1),i=0;i<t.length;i++)for(var o=r;o<=n;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);e.set(i,o-r,this.get(t[i],o))}return e}subMatrixColumn(t,r,n){if(void 0===r&&(r=0),void 0===n&&(n=this.rows-1),r>n||r<0||r>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var e=new this.constructor[Symbol.species](n-r+1,t.length),i=0;i<t.length;i++)for(var o=r;o<=n;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);e.set(o-r,i,this.get(o,t[i]))}return e}setSubMatrix(t,r,n){M(this,r,r+(t=this.constructor.checkMatrix(t)).rows-1,n,n+t.columns-1);for(var e=0;e<t.rows;e++)for(var i=0;i<t.columns;i++)this[r+e][n+i]=t.get(e,i);return this}selection(t,r){for(var n=d(this,t,r),e=new this.constructor[Symbol.species](t.length,r.length),i=0;i<n.row.length;i++)for(var o=n.row[i],a=0;a<n.column.length;a++){var s=n.column[a];e[i][a]=this.get(o,s)}return e}trace(){for(var t=Math.min(this.rows,this.columns),r=0,n=0;n<t;n++)r+=this.get(n,n);return r}transposeView(){return new S(this)}rowView(t){return g(this,t),new C(this,t)}columnView(t){return m(this,t),new k(this,t)}flipRowView(){return new N(this)}flipColumnView(){return new D(this)}subMatrixView(t,r,n,e){return new T(this,t,r,n,e)}selectionView(t,r){return new E(this,t,r)}rowSelectionView(t){return new R(this,t)}columnSelectionView(t){return new A(this,t)}det(){var t,r,n,e,i,o;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),r=this.get(0,1),n=this.get(1,0),t*this.get(1,1)-r*n):3===this.columns?(e=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),o=this.selectionView([1,2],[0,1]),t=this.get(0,0),r=this.get(0,1),n=this.get(0,2),t*e.det()-r*i.det()+n*o.det()):new c(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=Number.EPSILON);for(var r=new l(this,{autoTranspose:!0}),n=r.leftSingularVectors,e=r.rightSingularVectors,i=r.diagonal,o=0;o<i.length;o++)Math.abs(i[o])>t?i[o]=1/i[o]:i[o]=0;return i=this.constructor[Symbol.species].diag(i),e.mmul(i.mmul(n.transposeView()))}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)t.set(r,n,this.get(r,n));return t}}function n(t,r){return t-r}r.prototype.klass="Matrix",r.random=r.rand,r.diagonal=r.diag,r.prototype.diagonal=r.prototype.diag,r.identity=r.eye,r.prototype.negate=r.prototype.neg,r.prototype.tensorProduct=r.prototype.kroneckerProduct,r.prototype.determinant=r.prototype.det;var e,i="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",o=eval;for(var a of[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]]){var s=o(Y("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",{name:a[1],op:a[0]})),h=o(Y("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",{name:`${a[1]}S`,op:a[0]})),f=o(Y("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",{name:`${a[1]}M`,op:a[0]})),w=o(Y("\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",{name:a[1]}));for(e=1;e<a.length;e++)r.prototype[a[e]]=s,r.prototype[`${a[e]}S`]=h,r.prototype[`${a[e]}M`]=f,r[a[e]]=w}var y=[["~","not"]];for(var b of(["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach((function(t){y.push([`Math.${t}`,t])})),y)){var x=o(Y("\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",{name:b[1],method:b[0]})),j=o(Y("\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",{name:b[1]}));for(e=1;e<b.length;e++)r.prototype[b[e]]=x,r[b[e]]=j}for(var z of[["Math.pow",1,"pow"]]){var U="arg0";for(e=1;e<z[1];e++)U+=`, arg${e}`;if(1!==z[1]){var F=o(Y("\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",{name:z[2],method:z[0],args:U})),V=o(Y(i,{name:z[2],args:U}));for(e=2;e<z.length;e++)r.prototype[z[e]]=F,r[z[e]]=V}else{var I={name:z[2],args:U,method:z[0]},_=o(Y("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",I)),P=o(Y("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",I)),L=o(Y("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",I)),q=o(Y("\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",I));for(e=2;e<z.length;e++)r.prototype[z[e]]=_,r.prototype[`${z[e]}M`]=L,r.prototype[`${z[e]}S`]=P,r[z[e]]=q}}function Y(t,r){for(var n in r)t=t.replace(new RegExp(`%${n}%`,"g"),r[n]);return t}return r}class O extends(j(Array)){constructor(t,r){var n;if(1===arguments.length&&"number"==typeof t)return new Array(t);if(O.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>0){if(super(t),!(Number.isInteger(r)&&r>0))throw new TypeError("nColumns must be a positive integer");for(n=0;n<t;n++)this[n]=new Array(r)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const e=t;if(t=e.length,"number"!=typeof(r=e[0].length)||0===r)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),n=0;n<t;n++){if(e[n].length!==r)throw new RangeError("Inconsistent array dimensions");this[n]=[].concat(e[n])}}}return this.rows=t,this.columns=r,this}set(t,r,n){return this[t][r]=n,this}get(t,r){return this[t][r]}removeRow(t){if(g(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,r){return void 0===r&&(r=t,t=this.rows),g(this,t,!0),r=p(this,r),this.splice(t,0,r),this.rows+=1,this}removeColumn(t){if(m(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var r=0;r<this.rows;r++)this[r].splice(t,1);return this.columns-=1,this}addColumn(t,r){void 0===r&&(r=t,t=this.columns),m(this,t,!0),r=v(this,r);for(var n=0;n<this.rows;n++)this[n].splice(t,0,r[n]);return this.columns+=1,this}}j();class z extends(j()){constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,r,n){return this.data[t][r]=n,this}get(t,r){return this.data[t][r]}static get[Symbol.species](){return O}}class U{constructor(t){var r,n,e,i,o=(t=z.checkMatrix(t)).clone(),a=t.rows,s=t.columns,u=new Array(s);for(e=0;e<s;e++){var c=0;for(r=e;r<a;r++)c=h(c,o.get(r,e));if(0!==c){for(o.get(e,e)<0&&(c=-c),r=e;r<a;r++)o.set(r,e,o.get(r,e)/c);for(o.set(e,e,o.get(e,e)+1),n=e+1;n<s;n++){for(i=0,r=e;r<a;r++)i+=o.get(r,e)*o.get(r,n);for(i=-i/o.get(e,e),r=e;r<a;r++)o.set(r,n,o.get(r,n)+i*o.get(r,e))}}u[e]=-c}this.QR=o,this.Rdiag=u}solve(t){t=O.checkMatrix(t);var r=this.QR,n=r.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var e,i,o,a,s=t.columns,u=t.clone(),c=r.columns;for(o=0;o<c;o++)for(i=0;i<s;i++){for(a=0,e=o;e<n;e++)a+=r[e][o]*u[e][i];for(a=-a/r[o][o],e=o;e<n;e++)u[e][i]+=a*r[e][o]}for(o=c-1;o>=0;o--){for(i=0;i<s;i++)u[o][i]/=this.Rdiag[o];for(e=0;e<o;e++)for(i=0;i<s;i++)u[e][i]-=u[o][i]*r[e][o]}return u.subMatrix(0,c-1,0,s-1)}isFullRank(){for(var t=this.QR.columns,r=0;r<t;r++)if(0===this.Rdiag[r])return!1;return!0}get upperTriangularMatrix(){var t,r,n=this.QR,e=n.columns,i=new O(e,e);for(t=0;t<e;t++)for(r=0;r<e;r++)i[t][r]=t<r?n[t][r]:t===r?this.Rdiag[t]:0;return i}get orthogonalMatrix(){var t,r,n,e,i=this.QR,o=i.rows,a=i.columns,s=new O(o,a);for(n=a-1;n>=0;n--){for(t=0;t<o;t++)s[t][n]=0;for(s[n][n]=1,r=n;r<a;r++)if(0!==i[n][n]){for(e=0,t=n;t<o;t++)e+=i[t][n]*s[t][r];for(e=-e/i[n][n],t=n;t<o;t++)s[t][r]+=e*i[t][n]}}return s}}function F(t,r=!1){return t=z.checkMatrix(t),r?new l(t).inverse():function(t,r,n=!1){return t=z.checkMatrix(t),r=z.checkMatrix(r),n?new l(t).solve(r):t.isSquare()?new c(t).solve(r):new U(t).solve(r)}(t,O.eye(t.rows))}function V(t,r,n,e,i){var o=n*e*e,a=O.eye(r.length,r.length,o);const s=i(r);var u=t.x.map(t=>s(t)),c=function(t,r,n,e,i){const o=n.length,a=t.x.length;for(var s=new Array(o),u=0;u<o;u++){s[u]=new Array(a);var c=n.concat();c[u]+=e;for(var h=i(c),f=0;f<a;f++)s[u][f]=r[f]-h(t.x[f])}return new O(s)}(t,u,r,e,i),h=function(t,r){const n=t.x.length;for(var e=new Array(n),i=0;i<n;i++)e[i]=[t.y[i]-r[i]];return new O(e)}(t,u),f=F(a.add(c.mmul(c.transpose())));return(r=(r=new O([r])).sub(f.mmul(c).mmul(h).mul(e).transpose())).to1DArray()}function I(t,r,n={}){let{maxIterations:i=100,gradientDifference:o=.1,damping:a=0,errorTolerance:s=.01,minValues:u,maxValues:c,initialValues:h}=n;if(a<=0)throw new Error("The damping option must be a positive number");if(!t.x||!t.y)throw new Error("The data parameter must have x and y elements");if(!Array.isArray(t.x)||t.x.length<2||!Array.isArray(t.y)||t.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(t.x.length!==t.y.length)throw new Error("The data parameter elements must have the same size");var f=h||new Array(r.length).fill(1);let l=f.length;if(c=c||new Array(l).fill(Number.MAX_SAFE_INTEGER),u=u||new Array(l).fill(Number.MIN_SAFE_INTEGER),c.length!==u.length)throw new Error("minValues and maxValues must be the same size");if(!Array.isArray(f))throw new Error("initialValues must be an array");for(var g=e(t,f,r),m=g<=s,p=0;p<i&&!m;p++){f=V(t,f,a,o,r);for(let t=0;t<l;t++)f[t]=Math.min(Math.max(u[t],f[t]),c[t]);if(g=e(t,f,r),isNaN(g))break;m=g<=s}return{parameterValues:f,parameterError:g,iterations:p}}n.d(r,"default",(function(){return I}))}};