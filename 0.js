(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(t,r,e){"use strict";e.r(r);var n=e(554),i=e(71),o=e(561);function a(){var t,r,e=Object(o.a)().unknown(void 0),s=e.domain,u=e.range,c=0,h=1,l=!1,f=0,m=0,g=.5;function p(){var e=s().length,i=h<c,o=i?h:c,a=i?c:h;t=(a-o)/Math.max(1,e-f+2*m),l&&(t=Math.floor(t)),o+=(a-o-t*(e-f))*g,r=t*(1-f),l&&(o=Math.round(o),r=Math.round(r));var p=Object(n.a)(e).map((function(r){return o+t*r}));return u(i?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(s(t),p()):s()},e.range=function(t){return arguments.length?([c,h]=t,c=+c,h=+h,p()):[c,h]},e.rangeRound=function(t){return[c,h]=t,c=+c,h=+h,l=!0,p()},e.bandwidth=function(){return r},e.step=function(){return t},e.round=function(t){return arguments.length?(l=!!t,p()):l},e.padding=function(t){return arguments.length?(f=Math.min(1,m=+t),p()):f},e.paddingInner=function(t){return arguments.length?(f=Math.min(1,t),p()):f},e.paddingOuter=function(t){return arguments.length?(m=+t,p()):m},e.align=function(t){return arguments.length?(g=Math.max(0,Math.min(1,t)),p()):g},e.copy=function(){return a(s(),[c,h]).round(l).paddingInner(f).paddingOuter(m).align(g)},i.b.apply(p(),arguments)}function s(){return function t(r){var e=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return t(e())},r}(a.apply(null,arguments).paddingInner(1))}var u=e(111),c=e(75);function h(t){var r;function e(t){return isNaN(t=+t)?r:t}return e.invert=e,e.domain=e.range=function(r){return arguments.length?(t=Array.from(r,c.a),e):t.slice()},e.unknown=function(t){return arguments.length?(r=t,e):r},e.copy=function(){return h(t).unknown(r)},t=arguments.length?Array.from(t,c.a):[0,1],Object(u.b)(e)}var l=e(36),f=e(23),m=function(t,r){var e,n=0,i=(t=t.slice()).length-1,o=t[n],a=t[i];return a<o&&(e=n,n=i,i=e,e=o,o=a,a=e),t[n]=r.floor(o),t[i]=r.ceil(a),t},g=e(55);function p(t){return Math.log(t)}function v(t){return Math.exp(t)}function d(t){return-Math.log(-t)}function w(t){return-Math.exp(-t)}function y(t){return isFinite(t)?+("1e"+t):t<0?0:t}function b(t){return function(r){return-t(-r)}}function M(t){var r,e,n=t(p,v),i=n.domain,o=10;function a(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(r){return Math.log(r)/t})}(o),e=function(t){return 10===t?y:t===Math.E?Math.exp:function(r){return Math.pow(t,r)}}(o),i()[0]<0?(r=b(r),e=b(e),t(d,w)):t(p,v),n}return n.base=function(t){return arguments.length?(o=+t,a()):o},n.domain=function(t){return arguments.length?(i(t),a()):i()},n.ticks=function(t){var n,a=i(),s=a[0],u=a[a.length-1];(n=u<s)&&(m=s,s=u,u=m);var c,h,f,m=r(s),g=r(u),p=null==t?10:+t,v=[];if(!(o%1)&&g-m<p){if(m=Math.floor(m),g=Math.ceil(g),s>0){for(;m<=g;++m)for(h=1,c=e(m);h<o;++h)if(!((f=c*h)<s)){if(f>u)break;v.push(f)}}else for(;m<=g;++m)for(h=o-1,c=e(m);h>=1;--h)if(!((f=c*h)<s)){if(f>u)break;v.push(f)}v.length||(v=Object(l.a)(s,u,p))}else v=Object(l.a)(m,g,Math.min(g-m,p)).map(e);return n?v.reverse():v},n.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=Object(f.a)(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/n.ticks().length);return function(t){var n=t/e(Math.round(r(t)));return n*o<o-.5&&(n*=o),n<=a?i(t):""}},n.nice=function(){return i(m(i(),{floor:function(t){return e(Math.floor(r(t)))},ceil:function(t){return e(Math.ceil(r(t)))}}))},n}function x(){var t=M(Object(g.d)()).domain([1,10]);return t.copy=function(){return Object(g.a)(t,x()).base(t.base())},i.b.apply(t,arguments),t}function S(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function k(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function E(t){var r=1,e=t(S(r),k(r));return e.constant=function(e){return arguments.length?t(S(r=+e),k(r)):r},Object(u.b)(e)}function N(){var t=E(Object(g.d)());return t.copy=function(){return Object(g.a)(t,N()).constant(t.constant())},i.b.apply(t,arguments)}function O(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function j(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function R(t){return t<0?-t*t:t*t}function A(t){var r=t(g.c,g.c),e=1;function n(){return 1===e?t(g.c,g.c):.5===e?t(j,R):t(O(e),O(1/e))}return r.exponent=function(t){return arguments.length?(e=+t,n()):e},Object(u.b)(r)}function C(){var t=A(Object(g.d)());return t.copy=function(){return Object(g.a)(t,C()).exponent(t.exponent())},i.b.apply(t,arguments),t}function P(){return C.apply(null,arguments).exponent(.5)}function z(t){return Math.sign(t)*t*t}function _(){var t,r=Object(g.b)(),e=[0,1],n=!1;function o(e){var i=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(r(e));return isNaN(i)?t:n?Math.round(i):i}return o.invert=function(t){return r.invert(z(t))},o.domain=function(t){return arguments.length?(r.domain(t),o):r.domain()},o.range=function(t){return arguments.length?(r.range((e=Array.from(t,c.a)).map(z)),o):e.slice()},o.rangeRound=function(t){return o.range(t).round(!0)},o.round=function(t){return arguments.length?(n=!!t,o):n},o.clamp=function(t){return arguments.length?(r.clamp(t),o):r.clamp()},o.unknown=function(r){return arguments.length?(t=r,o):t},o.copy=function(){return _(r.domain(),e).round(n).clamp(r.clamp()).unknown(t)},i.b.apply(o,arguments),Object(u.b)(o)}var L=e(563),T=e(553),I=e(44);function D(){var t,r=[],e=[],n=[];function o(){var t=0,i=Math.max(1,e.length);for(n=new Array(i-1);++t<i;)n[t-1]=Object(L.a)(r,t/i);return a}function a(r){return isNaN(r=+r)?t:e[Object(T.c)(n,r)]}return a.invertExtent=function(t){var i=e.indexOf(t);return i<0?[NaN,NaN]:[i>0?n[i-1]:r[0],i<n.length?n[i]:r[r.length-1]]},a.domain=function(t){if(!arguments.length)return r.slice();r=[];for(let e of t)null==e||isNaN(e=+e)||r.push(e);return r.sort(I.a),o()},a.range=function(t){return arguments.length?(e=Array.from(t),o()):e.slice()},a.unknown=function(r){return arguments.length?(t=r,a):t},a.quantiles=function(){return n.slice()},a.copy=function(){return D().domain(r).range(e).unknown(t)},i.b.apply(a,arguments)}function F(){var t,r=0,e=1,n=1,o=[.5],a=[0,1];function s(r){return r<=r?a[Object(T.c)(o,r,0,n)]:t}function c(){var t=-1;for(o=new Array(n);++t<n;)o[t]=((t+1)*e-(t-n)*r)/(n+1);return s}return s.domain=function(t){return arguments.length?([r,e]=t,r=+r,e=+e,c()):[r,e]},s.range=function(t){return arguments.length?(n=(a=Array.from(t)).length-1,c()):a.slice()},s.invertExtent=function(t){var i=a.indexOf(t);return i<0?[NaN,NaN]:i<1?[r,o[0]]:i>=n?[o[n-1],e]:[o[i-1],o[i]]},s.unknown=function(r){return arguments.length?(t=r,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return F().domain([r,e]).range(a).unknown(t)},i.b.apply(Object(u.b)(s),arguments)}function V(){var t,r=[.5],e=[0,1],n=1;function o(i){return i<=i?e[Object(T.c)(r,i,0,n)]:t}return o.domain=function(t){return arguments.length?(r=Array.from(t),n=Math.min(r.length,e.length-1),o):r.slice()},o.range=function(t){return arguments.length?(e=Array.from(t),n=Math.min(r.length,e.length-1),o):e.slice()},o.invertExtent=function(t){var n=e.indexOf(t);return[r[n-1],r[n]]},o.unknown=function(r){return arguments.length?(t=r,o):t},o.copy=function(){return V().domain(r).range(e).unknown(t)},i.b.apply(o,arguments)}var U=e(74),q=new Date,$=new Date;function H(t,r,e,n){function i(r){return t(r=0===arguments.length?new Date:new Date(+r)),r}return i.floor=function(r){return t(r=new Date(+r)),r},i.ceil=function(e){return t(e=new Date(e-1)),r(e,1),t(e),e},i.round=function(t){var r=i(t),e=i.ceil(t);return t-r<e-t?r:e},i.offset=function(t,e){return r(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,n,o){var a,s=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<n&&o>0))return s;do{s.push(a=new Date(+e)),r(e,o),t(e)}while(a<e&&e<n);return s},i.filter=function(e){return H((function(r){if(r>=r)for(;t(r),!e(r);)r.setTime(r-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;r(t,-1),!e(t););else for(;--n>=0;)for(;r(t,1),!e(t););}))},e&&(i.count=function(r,n){return q.setTime(+r),$.setTime(+n),t(q),t($),Math.floor(e(q,$))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(n?function(r){return n(r)%t==0}:function(r){return i.count(0,r)%t==0}):i:null}),i}var Y=H((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,r){t.setFullYear(t.getFullYear()+r)}),(function(t,r){return r.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Y.every=function(t){return isFinite(t=Math.floor(t))&&t>0?H((function(r){r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)}),(function(r,e){r.setFullYear(r.getFullYear()+e*t)})):null};var G=Y,W=(Y.range,H((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,r){t.setMonth(t.getMonth()+r)}),(function(t,r){return r.getMonth()-t.getMonth()+12*(r.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),B=W,Q=(W.range,6e4),Z=6048e5;function X(t){return H((function(r){r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)}),(function(t,r){t.setDate(t.getDate()+7*r)}),(function(t,r){return(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Q)/Z}))}var K=X(0),J=X(1),tt=X(2),rt=X(3),et=X(4),nt=X(5),it=X(6),ot=(K.range,J.range,tt.range,rt.range,et.range,nt.range,it.range,H((function(t){t.setHours(0,0,0,0)}),(function(t,r){t.setDate(t.getDate()+r)}),(function(t,r){return(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Q)/864e5}),(function(t){return t.getDate()-1}))),at=ot,st=(ot.range,H((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Q)}),(function(t,r){t.setTime(+t+36e5*r)}),(function(t,r){return(r-t)/36e5}),(function(t){return t.getHours()}))),ut=st,ct=(st.range,H((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,r){t.setTime(+t+r*Q)}),(function(t,r){return(r-t)/Q}),(function(t){return t.getMinutes()}))),ht=ct,lt=(ct.range,H((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,r){t.setTime(+t+1e3*r)}),(function(t,r){return(r-t)/1e3}),(function(t){return t.getUTCSeconds()}))),ft=lt,mt=(lt.range,H((function(){}),(function(t,r){t.setTime(+t+r)}),(function(t,r){return r-t})));mt.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?H((function(r){r.setTime(Math.floor(r/t)*t)}),(function(r,e){r.setTime(+r+e*t)}),(function(r,e){return(e-r)/t})):mt:null};var gt=mt;mt.range;function pt(t){return H((function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCDate(t.getUTCDate()+7*r)}),(function(t,r){return(r-t)/Z}))}var vt=pt(0),dt=pt(1),wt=pt(2),yt=pt(3),bt=pt(4),Mt=pt(5),xt=pt(6),St=(vt.range,dt.range,wt.range,yt.range,bt.range,Mt.range,xt.range,H((function(t){t.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCDate(t.getUTCDate()+r)}),(function(t,r){return(r-t)/864e5}),(function(t){return t.getUTCDate()-1}))),kt=St,Et=(St.range,H((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r)}),(function(t,r){return r.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Et.every=function(t){return isFinite(t=Math.floor(t))&&t>0?H((function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)}),(function(r,e){r.setUTCFullYear(r.getUTCFullYear()+e*t)})):null};var Nt=Et;Et.range;function Ot(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jt(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Rt(t,r,e){return{y:t,m:r,d:e,H:0,M:0,S:0,L:0}}var At,Ct,Pt,zt={"-":"",_:" ",0:"0"},_t=/^\s*\d+/,Lt=/^%/,Tt=/[\\^$*+?|[\]().{}]/g;function It(t,r,e){var n=t<0?"-":"",i=(n?-t:t)+"",o=i.length;return n+(o<e?new Array(e-o+1).join(r)+i:i)}function Dt(t){return t.replace(Tt,"\\$&")}function Ft(t){return new RegExp("^(?:"+t.map(Dt).join("|")+")","i")}function Vt(t){for(var r={},e=-1,n=t.length;++e<n;)r[t[e].toLowerCase()]=e;return r}function Ut(t,r,e){var n=_t.exec(r.slice(e,e+1));return n?(t.w=+n[0],e+n[0].length):-1}function qt(t,r,e){var n=_t.exec(r.slice(e,e+1));return n?(t.u=+n[0],e+n[0].length):-1}function $t(t,r,e){var n=_t.exec(r.slice(e,e+2));return n?(t.U=+n[0],e+n[0].length):-1}function Ht(t,r,e){var n=_t.exec(r.slice(e,e+2));return n?(t.V=+n[0],e+n[0].length):-1}function Yt(t,r,e){var n=_t.exec(r.slice(e,e+2));return n?(t.W=+n[0],e+n[0].length):-1}function Gt(t,r,e){var n=_t.exec(r.slice(e,e+4));return n?(t.y=+n[0],e+n[0].length):-1}function Wt(t,r,e){var n=_t.exec(r.slice(e,e+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),e+n[0].length):-1}function Bt(t,r,e){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(e,e+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),e+n[0].length):-1}function Qt(t,r,e){var n=_t.exec(r.slice(e,e+1));return n?(t.q=3*n[0]-3,e+n[0].length):-1}function Zt(t,r,e){var n=_t.exec(r.slice(e,e+2));return n?(t.m=n[0]-1,e+n[0].length):-1}function Xt(t,r,e){var n=_t.exec(r.slice(e,e+2));return n?(t.d=+n[0],e+n[0].length):-1}function Kt(t,r,e){var n=_t.exec(r.slice(e,e+3));return n?(t.m=0,t.d=+n[0],e+n[0].length):-1}function Jt(t,r,e){var n=_t.exec(r.slice(e,e+2));return n?(t.H=+n[0],e+n[0].length):-1}function tr(t,r,e){var n=_t.exec(r.slice(e,e+2));return n?(t.M=+n[0],e+n[0].length):-1}function rr(t,r,e){var n=_t.exec(r.slice(e,e+2));return n?(t.S=+n[0],e+n[0].length):-1}function er(t,r,e){var n=_t.exec(r.slice(e,e+3));return n?(t.L=+n[0],e+n[0].length):-1}function nr(t,r,e){var n=_t.exec(r.slice(e,e+6));return n?(t.L=Math.floor(n[0]/1e3),e+n[0].length):-1}function ir(t,r,e){var n=Lt.exec(r.slice(e,e+1));return n?e+n[0].length:-1}function or(t,r,e){var n=_t.exec(r.slice(e));return n?(t.Q=+n[0],e+n[0].length):-1}function ar(t,r,e){var n=_t.exec(r.slice(e));return n?(t.s=+n[0],e+n[0].length):-1}function sr(t,r){return It(t.getDate(),r,2)}function ur(t,r){return It(t.getHours(),r,2)}function cr(t,r){return It(t.getHours()%12||12,r,2)}function hr(t,r){return It(1+at.count(G(t),t),r,3)}function lr(t,r){return It(t.getMilliseconds(),r,3)}function fr(t,r){return lr(t,r)+"000"}function mr(t,r){return It(t.getMonth()+1,r,2)}function gr(t,r){return It(t.getMinutes(),r,2)}function pr(t,r){return It(t.getSeconds(),r,2)}function vr(t){var r=t.getDay();return 0===r?7:r}function dr(t,r){return It(K.count(G(t)-1,t),r,2)}function wr(t,r){var e=t.getDay();return t=e>=4||0===e?et(t):et.ceil(t),It(et.count(G(t),t)+(4===G(t).getDay()),r,2)}function yr(t){return t.getDay()}function br(t,r){return It(J.count(G(t)-1,t),r,2)}function Mr(t,r){return It(t.getFullYear()%100,r,2)}function xr(t,r){return It(t.getFullYear()%1e4,r,4)}function Sr(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+It(r/60|0,"0",2)+It(r%60,"0",2)}function kr(t,r){return It(t.getUTCDate(),r,2)}function Er(t,r){return It(t.getUTCHours(),r,2)}function Nr(t,r){return It(t.getUTCHours()%12||12,r,2)}function Or(t,r){return It(1+kt.count(Nt(t),t),r,3)}function jr(t,r){return It(t.getUTCMilliseconds(),r,3)}function Rr(t,r){return jr(t,r)+"000"}function Ar(t,r){return It(t.getUTCMonth()+1,r,2)}function Cr(t,r){return It(t.getUTCMinutes(),r,2)}function Pr(t,r){return It(t.getUTCSeconds(),r,2)}function zr(t){var r=t.getUTCDay();return 0===r?7:r}function _r(t,r){return It(vt.count(Nt(t)-1,t),r,2)}function Lr(t,r){var e=t.getUTCDay();return t=e>=4||0===e?bt(t):bt.ceil(t),It(bt.count(Nt(t),t)+(4===Nt(t).getUTCDay()),r,2)}function Tr(t){return t.getUTCDay()}function Ir(t,r){return It(dt.count(Nt(t)-1,t),r,2)}function Dr(t,r){return It(t.getUTCFullYear()%100,r,2)}function Fr(t,r){return It(t.getUTCFullYear()%1e4,r,4)}function Vr(){return"+0000"}function Ur(){return"%"}function qr(t){return+t}function $r(t){return Math.floor(+t/1e3)}At=function(t){var r=t.dateTime,e=t.date,n=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=Ft(i),h=Vt(i),l=Ft(o),f=Vt(o),m=Ft(a),g=Vt(a),p=Ft(s),v=Vt(s),d=Ft(u),w=Vt(u),y={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:sr,e:sr,f:fr,H:ur,I:cr,j:hr,L:lr,m:mr,M:gr,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:qr,s:$r,S:pr,u:vr,U:dr,V:wr,w:yr,W:br,x:null,X:null,y:Mr,Y:xr,Z:Sr,"%":Ur},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:kr,e:kr,f:Rr,H:Er,I:Nr,j:Or,L:jr,m:Ar,M:Cr,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:qr,s:$r,S:Pr,u:zr,U:_r,V:Lr,w:Tr,W:Ir,x:null,X:null,y:Dr,Y:Fr,Z:Vr,"%":Ur},M={a:function(t,r,e){var n=m.exec(r.slice(e));return n?(t.w=g[n[0].toLowerCase()],e+n[0].length):-1},A:function(t,r,e){var n=l.exec(r.slice(e));return n?(t.w=f[n[0].toLowerCase()],e+n[0].length):-1},b:function(t,r,e){var n=d.exec(r.slice(e));return n?(t.m=w[n[0].toLowerCase()],e+n[0].length):-1},B:function(t,r,e){var n=p.exec(r.slice(e));return n?(t.m=v[n[0].toLowerCase()],e+n[0].length):-1},c:function(t,e,n){return k(t,r,e,n)},d:Xt,e:Xt,f:nr,H:Jt,I:Jt,j:Kt,L:er,m:Zt,M:tr,p:function(t,r,e){var n=c.exec(r.slice(e));return n?(t.p=h[n[0].toLowerCase()],e+n[0].length):-1},q:Qt,Q:or,s:ar,S:rr,u:qt,U:$t,V:Ht,w:Ut,W:Yt,x:function(t,r,n){return k(t,e,r,n)},X:function(t,r,e){return k(t,n,r,e)},y:Wt,Y:Gt,Z:Bt,"%":ir};function x(t,r){return function(e){var n,i,o,a=[],s=-1,u=0,c=t.length;for(e instanceof Date||(e=new Date(+e));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=zt[n=t.charAt(++s)])?n=t.charAt(++s):i="e"===n?" ":"0",(o=r[n])&&(n=o(e,i)),a.push(n),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function S(t,r){return function(e){var n,i,o=Rt(1900,void 0,1);if(k(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(!r||"Z"in o||(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(n=jt(Rt(o.y,0,1))).getUTCDay(),n=i>4||0===i?dt.ceil(n):dt(n),n=kt.offset(n,7*(o.V-1)),o.y=n.getUTCFullYear(),o.m=n.getUTCMonth(),o.d=n.getUTCDate()+(o.w+6)%7):(i=(n=Ot(Rt(o.y,0,1))).getDay(),n=i>4||0===i?J.ceil(n):J(n),n=at.offset(n,7*(o.V-1)),o.y=n.getFullYear(),o.m=n.getMonth(),o.d=n.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?jt(Rt(o.y,0,1)).getUTCDay():Ot(Rt(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,jt(o)):Ot(o)}}function k(t,r,e,n){for(var i,o,a=0,s=r.length,u=e.length;a<s;){if(n>=u)return-1;if(37===(i=r.charCodeAt(a++))){if(i=r.charAt(a++),!(o=M[i in zt?r.charAt(a++):i])||(n=o(t,e,n))<0)return-1}else if(i!=e.charCodeAt(n++))return-1}return n}return(y.x=x(e,y),y.X=x(n,y),y.c=x(r,y),b.x=x(e,b),b.X=x(n,b),b.c=x(r,b),{format:function(t){var r=x(t+="",y);return r.toString=function(){return t},r},parse:function(t){var r=S(t+="",!1);return r.toString=function(){return t},r},utcFormat:function(t){var r=x(t+="",b);return r.toString=function(){return t},r},utcParse:function(t){var r=S(t+="",!0);return r.toString=function(){return t},r}})}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Ct=At.format,At.parse,Pt=At.utcFormat,At.utcParse;var Hr=1e3,Yr=60*Hr,Gr=60*Yr,Wr=24*Gr,Br=7*Wr,Qr=30*Wr,Zr=365*Wr;function Xr(t){return new Date(t)}function Kr(t){return t instanceof Date?+t:+new Date(+t)}function Jr(t,r,e,n,i,o,a,s,u){var c=Object(g.b)(),h=c.invert,f=c.domain,p=u(".%L"),v=u(":%S"),d=u("%I:%M"),w=u("%I %p"),y=u("%a %d"),b=u("%b %d"),M=u("%B"),x=u("%Y"),S=[[a,1,Hr],[a,5,5*Hr],[a,15,15*Hr],[a,30,30*Hr],[o,1,Yr],[o,5,5*Yr],[o,15,15*Yr],[o,30,30*Yr],[i,1,Gr],[i,3,3*Gr],[i,6,6*Gr],[i,12,12*Gr],[n,1,Wr],[n,2,2*Wr],[e,1,Br],[r,1,Qr],[r,3,3*Qr],[t,1,Zr]];function k(s){return(a(s)<s?p:o(s)<s?v:i(s)<s?d:n(s)<s?w:r(s)<s?e(s)<s?y:b:t(s)<s?M:x)(s)}function E(r,e,n){if(null==r&&(r=10),"number"==typeof r){var i,o=Math.abs(n-e)/r,a=Object(U.a)((function(t){return t[2]})).right(S,o);return a===S.length?(i=Object(l.c)(e/Zr,n/Zr,r),r=t):a?(i=(a=S[o/S[a-1][2]<S[a][2]/o?a-1:a])[1],r=a[0]):(i=Math.max(Object(l.c)(e,n,r),1),r=s),r.every(i)}return r}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?f(Array.from(t,Kr)):f().map(Xr)},c.ticks=function(t){var r,e=f(),n=e[0],i=e[e.length-1],o=i<n;return o&&(r=n,n=i,i=r),r=(r=E(t,n,i))?r.range(n,i+1):[],o?r.reverse():r},c.tickFormat=function(t,r){return null==r?k:u(r)},c.nice=function(t){var r=f();return(t=E(t,r[0],r[r.length-1]))?f(m(r,t)):c},c.copy=function(){return Object(g.a)(c,Jr(t,r,e,n,i,o,a,s,u))},c}var te=function(){return i.b.apply(Jr(G,B,K,at,ut,ht,ft,gt,Ct).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},re=H((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCMonth(t.getUTCMonth()+r)}),(function(t,r){return r.getUTCMonth()-t.getUTCMonth()+12*(r.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),ee=re,ne=(re.range,H((function(t){t.setUTCMinutes(0,0,0)}),(function(t,r){t.setTime(+t+36e5*r)}),(function(t,r){return(r-t)/36e5}),(function(t){return t.getUTCHours()}))),ie=ne,oe=(ne.range,H((function(t){t.setUTCSeconds(0,0)}),(function(t,r){t.setTime(+t+r*Q)}),(function(t,r){return(r-t)/Q}),(function(t){return t.getUTCMinutes()}))),ae=oe,se=(oe.range,function(){return i.b.apply(Jr(Nt,ee,vt,kt,ie,ae,ft,gt,Pt).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),ue=e(559),ce=e(558);function he(){var t,r,e,n,i,o=0,a=1,s=g.c,u=!1;function c(r){return isNaN(r=+r)?i:s(0===e?.5:(r=(n(r)-t)*e,u?Math.max(0,Math.min(1,r)):r))}function h(t){return function(r){var e,n;return arguments.length?([e,n]=r,s=t(e,n),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,t=n(o=+o),r=n(a=+a),e=t===r?0:1/(r-t),c):[o,a]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=h(ue.a),c.rangeRound=h(ce.a),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return n=i,t=i(o),r=i(a),e=t===r?0:1/(r-t),c}}function le(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function fe(){var t=Object(u.b)(he()(g.c));return t.copy=function(){return le(t,fe())},i.a.apply(t,arguments)}function me(){var t=M(he()).domain([1,10]);return t.copy=function(){return le(t,me()).base(t.base())},i.a.apply(t,arguments)}function ge(){var t=E(he());return t.copy=function(){return le(t,ge()).constant(t.constant())},i.a.apply(t,arguments)}function pe(){var t=A(he());return t.copy=function(){return le(t,pe()).exponent(t.exponent())},i.a.apply(t,arguments)}function ve(){return pe.apply(null,arguments).exponent(.5)}function de(){var t=[],r=g.c;function e(e){if(!isNaN(e=+e))return r((Object(T.c)(t,e,1)-1)/(t.length-1))}return e.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let e of r)null==e||isNaN(e=+e)||t.push(e);return t.sort(I.a),e},e.interpolator=function(t){return arguments.length?(r=t,e):r},e.range=function(){return t.map((e,n)=>r(n/(t.length-1)))},e.quantiles=function(r){return Array.from({length:r+1},(e,n)=>Object(L.a)(t,n/r))},e.copy=function(){return de(r).domain(t)},i.a.apply(e,arguments)}function we(t,r){for(var e=0,n=r.length-1,i=r[0],o=new Array(n<0?0:n);e<n;)o[e]=t(i,i=r[++e]);return function(t){var r=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return o[r](t-r)}}function ye(){var t,r,e,n,i,o,a,s=0,u=.5,c=1,h=1,l=g.c,f=!1;function m(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-r)*(h*t<h*r?n:i),l(f?Math.max(0,Math.min(1,t)):t))}function p(t){return function(r){var e,n,i;return arguments.length?([e,n,i]=r,l=we(t,[e,n,i]),m):[l(0),l(.5),l(1)]}}return m.domain=function(a){return arguments.length?([s,u,c]=a,t=o(s=+s),r=o(u=+u),e=o(c=+c),n=t===r?0:.5/(r-t),i=r===e?0:.5/(e-r),h=r<t?-1:1,m):[s,u,c]},m.clamp=function(t){return arguments.length?(f=!!t,m):f},m.interpolator=function(t){return arguments.length?(l=t,m):l},m.range=p(ue.a),m.rangeRound=p(ce.a),m.unknown=function(t){return arguments.length?(a=t,m):a},function(a){return o=a,t=a(s),r=a(u),e=a(c),n=t===r?0:.5/(r-t),i=r===e?0:.5/(e-r),h=r<t?-1:1,m}}function be(){var t=Object(u.b)(ye()(g.c));return t.copy=function(){return le(t,be())},i.a.apply(t,arguments)}function Me(){var t=M(ye()).domain([.1,1,10]);return t.copy=function(){return le(t,Me()).base(t.base())},i.a.apply(t,arguments)}function xe(){var t=E(ye());return t.copy=function(){return le(t,xe()).constant(t.constant())},i.a.apply(t,arguments)}function Se(){var t=A(ye());return t.copy=function(){return le(t,Se()).exponent(t.exponent())},i.a.apply(t,arguments)}function ke(){return Se.apply(null,arguments).exponent(.5)}var Ee=e(73);e.d(r,"scaleBand",(function(){return a})),e.d(r,"scalePoint",(function(){return s})),e.d(r,"scaleIdentity",(function(){return h})),e.d(r,"scaleLinear",(function(){return u.a})),e.d(r,"scaleLog",(function(){return x})),e.d(r,"scaleSymlog",(function(){return N})),e.d(r,"scaleOrdinal",(function(){return o.a})),e.d(r,"scaleImplicit",(function(){return o.b})),e.d(r,"scalePow",(function(){return C})),e.d(r,"scaleSqrt",(function(){return P})),e.d(r,"scaleRadial",(function(){return _})),e.d(r,"scaleQuantile",(function(){return D})),e.d(r,"scaleQuantize",(function(){return F})),e.d(r,"scaleThreshold",(function(){return V})),e.d(r,"scaleTime",(function(){return te})),e.d(r,"scaleUtc",(function(){return se})),e.d(r,"scaleSequential",(function(){return fe})),e.d(r,"scaleSequentialLog",(function(){return me})),e.d(r,"scaleSequentialPow",(function(){return pe})),e.d(r,"scaleSequentialSqrt",(function(){return ve})),e.d(r,"scaleSequentialSymlog",(function(){return ge})),e.d(r,"scaleSequentialQuantile",(function(){return de})),e.d(r,"scaleDiverging",(function(){return be})),e.d(r,"scaleDivergingLog",(function(){return Me})),e.d(r,"scaleDivergingPow",(function(){return Se})),e.d(r,"scaleDivergingSqrt",(function(){return ke})),e.d(r,"scaleDivergingSymlog",(function(){return xe})),e.d(r,"tickFormat",(function(){return Ee.a}))},32:function(t,r,e){"use strict";e.r(r);var n=e(553),i=e(44),o=e(74);function a(t,r){let e=0;if(void 0===r)for(let r of t)null!=r&&(r=+r)>=r&&++e;else{let n=-1;for(let i of t)null!=(i=r(i,++n,t))&&(i=+i)>=i&&++e}return e}function s(t){return 0|t.length}function u(t){return!(t>0)}function c(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function h(...t){const r="function"==typeof t[t.length-1]&&function(t){return r=>t(...r)}(t.pop()),e=(t=t.map(c)).map(s),n=t.length-1,i=new Array(n+1).fill(0),o=[];if(n<0||e.some(u))return o;for(;;){o.push(i.map((r,e)=>t[e][r]));let a=n;for(;++i[a]===e[a];){if(0===a)return r?o.map(r):o;i[a--]=0}}}function l(t,r){var e=0,n=0;return Float64Array.from(t,void 0===r?t=>e+=+t||0:i=>e+=+r(i,n++,t)||0)}var f=function(t,r){return r<t?-1:r>t?1:r>=t?0:NaN};function m(t,r){let e,n=0,i=0,o=0;if(void 0===r)for(let r of t)null!=r&&(r=+r)>=r&&(e=r-i,i+=e/++n,o+=e*(r-i));else{let a=-1;for(let s of t)null!=(s=r(s,++a,t))&&(s=+s)>=s&&(e=s-i,i+=e/++n,o+=e*(s-i))}if(n>1)return o/(n-1)}function g(t,r){const e=m(t,r);return e?Math.sqrt(e):e}var p=e(564),v=function(t){return t};function d(t,...r){return M(t,v,v,r)}function w(t,...r){return M(t,Array.from,v,r)}function y(t,r,...e){return M(t,v,r,e)}function b(t,r,...e){return M(t,Array.from,r,e)}function M(t,r,e,n){return function t(i,o){if(o>=n.length)return e(i);const a=new Map,s=n[o++];let u=-1;for(const t of i){const r=s(t,++u,i),e=a.get(r);e?e.push(t):a.set(r,[t])}for(const[r,e]of a)a.set(r,t(e,o));return r(a)}(t,0)}var x=Array.prototype,S=x.slice,k=(x.map,function(t){return function(){return t}}),E=e(554),N=e(36),O=function(t){return Math.ceil(Math.log(a(t))/Math.LN2)+1},j=function(){var t=v,r=p.a,e=O;function i(i){Array.isArray(i)||(i=Array.from(i));var o,a,s=i.length,u=new Array(s);for(o=0;o<s;++o)u[o]=t(i[o],o,i);var c=r(u),h=c[0],l=c[1],f=e(u,h,l);Array.isArray(f)||(f=Object(N.c)(h,l,f),f=Object(E.a)(Math.ceil(h/f)*f,l,f));for(var m=f.length;f[0]<=h;)f.shift(),--m;for(;f[m-1]>l;)f.pop(),--m;var g,p=new Array(m+1);for(o=0;o<=m;++o)(g=p[o]=[]).x0=o>0?f[o-1]:h,g.x1=o<m?f[o]:l;for(o=0;o<s;++o)h<=(a=u[o])&&a<=l&&p[Object(n.c)(f,a,0,m)].push(i[o]);return p}return i.value=function(r){return arguments.length?(t="function"==typeof r?r:k(r),i):t},i.domain=function(t){return arguments.length?(r="function"==typeof t?t:k([t[0],t[1]]),i):r},i.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?k(S.call(t)):k(t),i):e},i},R=e(563),A=function(t,r,e){return Math.ceil((e-r)/(2*(Object(R.a)(t,.75)-Object(R.a)(t,.25))*Math.pow(a(t),-1/3)))},C=function(t,r,e){return Math.ceil((e-r)/(3.5*g(t)*Math.pow(a(t),-1/3)))},P=e(569);function z(t,r){let e,n=-1,i=-1;if(void 0===r)for(const r of t)++i,null!=r&&(e<r||void 0===e&&r>=r)&&(e=r,n=i);else for(let o of t)null!=(o=r(o,++i,t))&&(e<o||void 0===e&&o>=o)&&(e=o,n=i);return n}function _(t,r){let e=0,n=0;if(void 0===r)for(let r of t)null!=r&&(r=+r)>=r&&(++e,n+=r);else{let i=-1;for(let o of t)null!=(o=r(o,++i,t))&&(o=+o)>=o&&(++e,n+=o)}if(e)return n/e}var L=function(t,r){return Object(R.a)(t,.5,r)};function T(t){return Array.from(function*(t){for(const r of t)yield*r}(t))}var I=e(565);function D(t,r){let e,n=-1,i=-1;if(void 0===r)for(const r of t)++i,null!=r&&(e>r||void 0===e&&r>=r)&&(e=r,n=i);else for(let o of t)null!=(o=r(o,++i,t))&&(e>o||void 0===e&&o>=o)&&(e=o,n=i);return n}function F(t,r=V){const e=[];let n,i=!1;for(const o of t)i&&e.push(r(n,o)),n=o,i=!0;return e}function V(t,r){return[t,r]}var U=function(t,r){return Array.from(r,r=>t[r])},q=e(570);function $(t,r=i.a){let e,n=!1;if(1===r.length){let o;for(const a of t){const t=r(a);(n?Object(i.a)(t,o)<0:0===Object(i.a)(t,t))&&(e=a,o=t,n=!0)}}else for(const i of t)(n?r(i,e)<0:0===r(i,i))&&(e=i,n=!0);return e}function H(t,r=i.a){if(1===r.length)return D(t,r);let e,n=-1,o=-1;for(const i of t)++o,(n<0?0===r(i,i):r(i,e)<0)&&(e=i,n=o);return n}function Y(t,r=i.a){let e,n=!1;if(1===r.length){let o;for(const a of t){const t=r(a);(n?Object(i.a)(t,o)>0:0===Object(i.a)(t,t))&&(e=a,o=t,n=!0)}}else for(const i of t)(n?r(i,e)>0:0===r(i,i))&&(e=i,n=!0);return e}function G(t,r=i.a){if(1===r.length)return z(t,r);let e,n=-1,o=-1;for(const i of t)++o,(n<0?0===r(i,i):r(i,e)>0)&&(e=i,n=o);return n}function W(t,r){const e=H(t,r);return e<0?void 0:e}function B(t,r=0,e=t.length){for(var n,i,o=e-(r=+r);o;)i=Math.random()*o--|0,n=t[o+r],t[o+r]=t[i+r],t[i+r]=n;return t}function Q(t,r){let e=0;if(void 0===r)for(let r of t)(r=+r)&&(e+=r);else{let n=-1;for(let i of t)(i=+r(i,++n,t))&&(e+=i)}return e}var Z=function(t){if(!(i=t.length))return[];for(var r=-1,e=Object(I.a)(t,X),n=new Array(e);++r<e;)for(var i,o=-1,a=n[r]=new Array(i);++o<i;)a[o]=t[o][r];return n};function X(t){return t.length}var K=function(){return Z(arguments)};e.d(r,"bisect",(function(){return n.c})),e.d(r,"bisectRight",(function(){return n.b})),e.d(r,"bisectLeft",(function(){return n.a})),e.d(r,"ascending",(function(){return i.a})),e.d(r,"bisector",(function(){return o.a})),e.d(r,"count",(function(){return a})),e.d(r,"cross",(function(){return h})),e.d(r,"cumsum",(function(){return l})),e.d(r,"descending",(function(){return f})),e.d(r,"deviation",(function(){return g})),e.d(r,"extent",(function(){return p.a})),e.d(r,"group",(function(){return d})),e.d(r,"groups",(function(){return w})),e.d(r,"rollup",(function(){return y})),e.d(r,"rollups",(function(){return b})),e.d(r,"bin",(function(){return j})),e.d(r,"histogram",(function(){return j})),e.d(r,"thresholdFreedmanDiaconis",(function(){return A})),e.d(r,"thresholdScott",(function(){return C})),e.d(r,"thresholdSturges",(function(){return O})),e.d(r,"max",(function(){return P.a})),e.d(r,"maxIndex",(function(){return z})),e.d(r,"mean",(function(){return _})),e.d(r,"median",(function(){return L})),e.d(r,"merge",(function(){return T})),e.d(r,"min",(function(){return I.a})),e.d(r,"minIndex",(function(){return D})),e.d(r,"pairs",(function(){return F})),e.d(r,"permute",(function(){return U})),e.d(r,"quantile",(function(){return R.a})),e.d(r,"quantileSorted",(function(){return R.b})),e.d(r,"quickselect",(function(){return q.a})),e.d(r,"range",(function(){return E.a})),e.d(r,"least",(function(){return $})),e.d(r,"leastIndex",(function(){return H})),e.d(r,"greatest",(function(){return Y})),e.d(r,"greatestIndex",(function(){return G})),e.d(r,"scan",(function(){return W})),e.d(r,"shuffle",(function(){return B})),e.d(r,"sum",(function(){return Q})),e.d(r,"ticks",(function(){return N.a})),e.d(r,"tickIncrement",(function(){return N.b})),e.d(r,"tickStep",(function(){return N.c})),e.d(r,"transpose",(function(){return Z})),e.d(r,"variance",(function(){return m})),e.d(r,"zip",(function(){return K}))},562:function(t,r,e){"use strict";var n=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};function i(t,r){return Math.floor(r()*t)}function o(t){for(var r=[],e=0;e<t;e++)r.push(void 0);return r}function a(t,r){return o(t).map((function(){return r}))}function s(t){return a(t,0)}function u(t){return t.reduce((function(t,r){return t+r}))}Object.defineProperty(r,"__esModule",{value:!0}),r.tauRandInt=i,r.tauRand=function(t){return t()},r.norm=function(t){var r,e,i=0;try{for(var o=n(t),a=o.next();!a.done;a=o.next()){var s=a.value;i+=Math.pow(s,2)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return Math.sqrt(i)},r.empty=o,r.range=function(t){return o(t).map((function(t,r){return r}))},r.filled=a,r.zeros=s,r.ones=function(t){return a(t,1)},r.linear=function(t,r,e){return o(e).map((function(n,i){return t+i*((r-t)/(e-1))}))},r.sum=u,r.mean=function(t){return u(t)/t.length},r.max=function(t){for(var r=0,e=0;e<t.length;e++)r=t[e]>r?t[e]:r;return r},r.max2d=function(t){for(var r=0,e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)r=t[e][n]>r?t[e][n]:r;return r},r.rejectionSample=function(t,r,e){for(var n=s(t),o=0;o<t;o++)for(var a=!0;a;){for(var u=i(r,e),c=!1,h=0;h<o;h++)if(u===n[h]){c=!0;break}c||(a=!1),n[o]=u}return n},r.reshape2d=function(t,r,e){var n=[],i=0;if(t.length!==r*e)throw new Error("Array dimensions must match input length.");for(var o=0;o<r;o++){for(var a=[],s=0;s<e;s++)a.push(t[i]),i+=1;n.push(a),1}return n}},563:function(t,r,e){"use strict";var n=e(569),i=e(565),o=e(570),a=function(t){return null===t?NaN:+t};function s(t,r,e){if(a=(t=Float64Array.from(function*(t,r){if(void 0===r)for(let r of t)null!=r&&(r=+r)>=r&&(yield r);else{let e=-1;for(let n of t)null!=(n=r(n,++e,t))&&(n=+n)>=n&&(yield n)}}(t,e))).length){if((r=+r)<=0||a<2)return Object(i.a)(t);if(r>=1)return Object(n.a)(t);var a,s=(a-1)*r,u=Math.floor(s),c=Object(n.a)(Object(o.a)(t,u).subarray(0,u+1));return c+(Object(i.a)(t.subarray(u+1))-c)*(s-u)}}function u(t,r,e=a){if(n=t.length){if((r=+r)<=0||n<2)return+e(t[0],0,t);if(r>=1)return+e(t[n-1],n-1,t);var n,i=(n-1)*r,o=Math.floor(i),s=+e(t[o],o,t);return s+(+e(t[o+1],o+1,t)-s)*(i-o)}}e.d(r,"a",(function(){return s})),e.d(r,"b",(function(){return u}))},565:function(t,r,e){"use strict";function n(t,r){let e;if(void 0===r)for(const r of t)null!=r&&(e>r||void 0===e&&r>=r)&&(e=r);else{let n=-1;for(let i of t)null!=(i=r(i,++n,t))&&(e>i||void 0===e&&i>=i)&&(e=i)}return e}e.d(r,"a",(function(){return n}))},569:function(t,r,e){"use strict";function n(t,r){let e;if(void 0===r)for(const r of t)null!=r&&(e<r||void 0===e&&r>=r)&&(e=r);else{let n=-1;for(let i of t)null!=(i=r(i,++n,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}e.d(r,"a",(function(){return n}))},570:function(t,r,e){"use strict";e.d(r,"a",(function(){return i}));var n=e(44);function i(t,r,e=0,a=t.length-1,s=n.a){for(;a>e;){if(a-e>600){const n=a-e+1,o=r-e+1,u=Math.log(n),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(n-c)/n)*(o-n/2<0?-1:1);i(t,r,Math.max(e,Math.floor(r-o*c/n+h)),Math.min(a,Math.floor(r+(n-o)*c/n+h)),s)}const n=t[r];let u=e,c=a;for(o(t,e,r),s(t[a],n)>0&&o(t,e,a);u<c;){for(o(t,u,c),++u,--c;s(t[u],n)<0;)++u;for(;s(t[c],n)>0;)--c}0===s(t[e],n)?o(t,e,c):(++c,o(t,c,a)),c<=r&&(e=c+1),r<=c&&(a=c-1)}return t}function o(t,r,e){const n=t[r];t[r]=t[e],t[e]=n}},571:function(t,r,e){"use strict";const n=Object.prototype.toString;t.exports=function(t){return n.call(t).endsWith("Array]")}},575:function(t,r,e){t.exports=function(t){var r={};function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)e.d(n,i,function(r){return t[r]}.bind(null,i));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=19)}([function(t,r){t.exports=e(1)},function(t,r,e){var n=e(12),i=e(13),o=e(14);t.exports=function(t,r){return n(t)||i(t,r)||o()}},function(t,r){t.exports=function(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}},function(t,r){function e(){return t.exports=e=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},e.apply(this,arguments)}t.exports=e},function(t,r,e){t.exports=e(15)},function(t,r,e){var n=e(16),i=e(17),o=e(18);t.exports=function(t){return n(t)||i(t)||o()}},function(t,r,e){t.exports=function(){return e(7)('!function(t){var n={};function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)r.d(e,i,function(n){return t[n]}.bind(null,i));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=6)}([,function(t,n,r){t.exports=r(4)},function(t,n,r){var e=r(5);t.exports=function(t,n){if(null==t)return{};var r,i,o=e(t,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}},,function(t,n,r){var e=function(t){"use strict";var n,r=Object.prototype,e=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,n,r,e){var i=n&&n.prototype instanceof d?n:d,o=Object.create(i.prototype),a=new L(e||[]);return o._invoke=function(t,n,r){var e=s;return function(i,o){if(e===f)throw new Error("Generator is already running");if(e===g){if("throw"===i)throw o;return S()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=N(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===s)throw e=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=f;var c=l(t,n,r);if("normal"===c.type){if(e=r.done?g:h,c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(e=g,r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function l(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var s="suspendedStart",h="suspendedYield",f="executing",g="completed",p={};function d(){}function y(){}function m(){}var v={};v[o]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(O([])));b&&b!==r&&e.call(b,o)&&(v=b);var M=m.prototype=d.prototype=Object.create(v);function x(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function k(t){var n;this._invoke=function(r,i){function o(){return new Promise(function(n,o){!function n(r,i,o,a){var u=l(t[r],t,i);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==typeof s&&e.call(s,"__await")?Promise.resolve(s.__await).then(function(t){n("next",t,o,a)},function(t){n("throw",t,o,a)}):Promise.resolve(s).then(function(t){c.value=t,o(c)},function(t){return n("throw",t,o,a)})}a(u.arg)}(r,i,n,o)})}return n=n?n.then(o,o):o()}}function N(t,r){var e=t.iterator[r.method];if(e===n){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=n,N(t,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return p}var i=l(e,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=n),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function E(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function j(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function O(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(e.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=n,r.done=!0,r};return a.next=a}}return{next:S}}function S(){return{value:n,done:!0}}return y.prototype=M.constructor=m,m.constructor=y,m[u]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===y||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(M),t},t.awrap=function(t){return{__await:t}},x(k.prototype),k.prototype[a]=function(){return this},t.AsyncIterator=k,t.async=function(n,r,e,i){var o=new k(c(n,r,e,i));return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},x(M),M[u]="Generator",M[o]=function(){return this},M.toString=function(){return"[object Generator]"},t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},t.values=O,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(e,i){return u.type="throw",u.arg=t,r.next=e,i&&(r.method="next",r.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=e.call(a,"catchLoc"),l=e.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&e.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;j(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:O(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=n),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},function(t,n){t.exports=function(t,n){if(null==t)return{};var r,e,i={},o=Object.keys(t);for(e=0;e<o.length;e++)r=o[e],n.indexOf(r)>=0||(i[r]=t[r]);return i}},function(t,n,r){"use strict";r.r(n);var e=r(1),i=r.n(e),o=r(2),a=r.n(o),u=function(t,n){let r,e;if(void 0===n)for(const n of t)null!=n&&(void 0===r?n>=n&&(r=e=n):(r>n&&(r=n),e<n&&(e=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(void 0===r?o>=o&&(r=e=o):(r>o&&(r=o),e<o&&(e=o)))}return[r,e]};function c(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}const l=Symbol("implicit");var s=Math.sqrt(50),h=Math.sqrt(10),f=Math.sqrt(2),g=function(t,n,r){var e,i,o,a,u=-1;if(r=+r,(t=+t)===(n=+n)&&r>0)return[t];if((e=n<t)&&(i=t,t=n,n=i),0===(a=p(t,n,r))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),n=Math.floor(n/a),o=new Array(i=Math.ceil(n-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),n=Math.ceil(n*a),o=new Array(i=Math.ceil(t-n+1));++u<i;)o[u]=(t-u)/a;return e&&o.reverse(),o};function p(t,n,r){var e=(n-t)/Math.max(0,r),i=Math.floor(Math.log(e)/Math.LN10),o=e/Math.pow(10,i);return i>=0?(o>=s?10:o>=h?5:o>=f?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=s?10:o>=h?5:o>=f?2:1)}var d=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN};var y,m,v=(1===(y=d).length&&(m=y,y=function(t,n){return d(m(t),n)}),{left:function(t,n,r,e){for(null==r&&(r=0),null==e&&(e=t.length);r<e;){var i=r+e>>>1;y(t[i],n)<0?r=i+1:e=i}return r},right:function(t,n,r,e){for(null==r&&(r=0),null==e&&(e=t.length);r<e;){var i=r+e>>>1;y(t[i],n)>0?e=i:r=i+1}return r}}),w=v.right,b=function(t,n,r){t.prototype=n.prototype=r,r.constructor=t};function M(t,n){var r=Object.create(t.prototype);for(var e in n)r[e]=n[e];return r}function x(){}var k="\\\\s*([+-]?\\\\d+)\\\\s*",N="\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*",E="\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*",j=/^#([0-9a-f]{3,8})$/,L=new RegExp("^rgb\\\\("+[k,k,k]+"\\\\)$"),O=new RegExp("^rgb\\\\("+[E,E,E]+"\\\\)$"),S=new RegExp("^rgba\\\\("+[k,k,k,N]+"\\\\)$"),A=new RegExp("^rgba\\\\("+[E,E,E,N]+"\\\\)$"),P=new RegExp("^hsl\\\\("+[N,E,E]+"\\\\)$"),_=new RegExp("^hsla\\\\("+[N,E,E,N]+"\\\\)$"),R={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function F(){return this.rgb().formatHex()}function q(){return this.rgb().formatRgb()}function T(t){var n,r;return t=(t+"").trim().toLowerCase(),(n=j.exec(t))?(r=n[1].length,n=parseInt(n[1],16),6===r?$(n):3===r?new z(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===r?new z(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===r?new z(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=L.exec(t))?new z(n[1],n[2],n[3],1):(n=O.exec(t))?new z(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=S.exec(t))?I(n[1],n[2],n[3],n[4]):(n=A.exec(t))?I(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=P.exec(t))?D(n[1],n[2]/100,n[3]/100,1):(n=_.exec(t))?D(n[1],n[2]/100,n[3]/100,n[4]):R.hasOwnProperty(t)?$(R[t]):"transparent"===t?new z(NaN,NaN,NaN,0):null}function $(t){return new z(t>>16&255,t>>8&255,255&t,1)}function I(t,n,r,e){return e<=0&&(t=n=r=NaN),new z(t,n,r,e)}function G(t,n,r,e){return 1===arguments.length?((i=t)instanceof x||(i=T(i)),i?new z((i=i.rgb()).r,i.g,i.b,i.opacity):new z):new z(t,n,r,null==e?1:e);var i}function z(t,n,r,e){this.r=+t,this.g=+n,this.b=+r,this.opacity=+e}function H(){return"#"+Y(this.r)+Y(this.g)+Y(this.b)}function C(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Y(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function D(t,n,r,e){return e<=0?t=n=r=NaN:r<=0||r>=1?t=n=NaN:n<=0&&(t=NaN),new V(t,n,r,e)}function U(t){if(t instanceof V)return new V(t.h,t.s,t.l,t.opacity);if(t instanceof x||(t=T(t)),!t)return new V;if(t instanceof V)return t;var n=(t=t.rgb()).r/255,r=t.g/255,e=t.b/255,i=Math.min(n,r,e),o=Math.max(n,r,e),a=NaN,u=o-i,c=(o+i)/2;return u?(a=n===o?(r-e)/u+6*(r<e):r===o?(e-n)/u+2:(n-r)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=c>0&&c<1?0:a,new V(a,u,c,t.opacity)}function V(t,n,r,e){this.h=+t,this.s=+n,this.l=+r,this.opacity=+e}function X(t,n,r){return 255*(t<60?n+(r-n)*t/60:t<180?r:t<240?n+(r-n)*(240-t)/60:n)}function B(t,n,r,e,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*r+(1+3*t+3*o-3*a)*e+a*i)/6}b(x,T,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:F,formatHex:F,formatHsl:function(){return U(this).formatHsl()},formatRgb:q,toString:q}),b(z,G,M(x,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new z(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new z(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:H,formatHex:H,formatRgb:C,toString:C})),b(V,function(t,n,r,e){return 1===arguments.length?U(t):new V(t,n,r,null==e?1:e)},M(x,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new V(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new V(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,e=r+(r<.5?r:1-r)*n,i=2*r-e;return new z(X(t>=240?t-240:t+120,i,e),X(t,i,e),X(t<120?t+240:t-120,i,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var W=function(t){return function(){return t}};function Z(t,n){return function(r){return t+r*n}}function J(t){return 1==(t=+t)?K:function(n,r){return r-n?function(t,n,r){return t=Math.pow(t,r),n=Math.pow(n,r)-t,r=1/r,function(e){return Math.pow(t+e*n,r)}}(n,r,t):W(isNaN(n)?r:n)}}function K(t,n){var r=n-t;return r?Z(t,r):W(isNaN(t)?n:t)}var Q=function t(n){var r=J(n);function e(t,n){var e=r((t=G(t)).r,(n=G(n)).r),i=r(t.g,n.g),o=r(t.b,n.b),a=K(t.opacity,n.opacity);return function(n){return t.r=e(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return e.gamma=t,e}(1);function tt(t){return function(n){var r,e,i=n.length,o=new Array(i),a=new Array(i),u=new Array(i);for(r=0;r<i;++r)e=G(n[r]),o[r]=e.r||0,a[r]=e.g||0,u[r]=e.b||0;return o=t(o),a=t(a),u=t(u),e.opacity=1,function(t){return e.r=o(t),e.g=a(t),e.b=u(t),e+""}}}tt(function(t){var n=t.length-1;return function(r){var e=r<=0?r=0:r>=1?(r=1,n-1):Math.floor(r*n),i=t[e],o=t[e+1],a=e>0?t[e-1]:2*i-o,u=e<n-1?t[e+2]:2*o-i;return B((r-e/n)*n,a,i,o,u)}}),tt(function(t){var n=t.length;return function(r){var e=Math.floor(((r%=1)<0?++r:r)*n),i=t[(e+n-1)%n],o=t[e%n],a=t[(e+1)%n],u=t[(e+2)%n];return B((r-e/n)*n,i,o,a,u)}});var nt=function(t,n){return n-=t=+t,function(r){return t+n*r}},rt=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,et=new RegExp(rt.source,"g");var it=function(t,n){var r,e=typeof n;return null==n||"boolean"===e?W(n):("number"===e?nt:"string"===e?(r=T(n))?(n=r,Q):function(t,n){var r,e,i,o=rt.lastIndex=et.lastIndex=0,a=-1,u=[],c=[];for(t+="",n+="";(r=rt.exec(t))&&(e=et.exec(n));)(i=e.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(r=r[0])===(e=e[0])?u[a]?u[a]+=e:u[++a]=e:(u[++a]=null,c.push({i:a,x:nt(r,e)})),o=et.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(t){return function(n){return t(n)+""}}(c[0].x):function(t){return function(){return t}}(n):(n=c.length,function(t){for(var r,e=0;e<n;++e)u[(r=c[e]).i]=r.x(t);return u.join("")})}:n instanceof T?Q:n instanceof Date?function(t,n){var r=new Date;return n-=t=+t,function(e){return r.setTime(t+n*e),r}}:Array.isArray(n)?function(t,n){var r,e=n?n.length:0,i=t?Math.min(e,t.length):0,o=new Array(i),a=new Array(e);for(r=0;r<i;++r)o[r]=it(t[r],n[r]);for(;r<e;++r)a[r]=n[r];return function(t){for(r=0;r<i;++r)a[r]=o[r](t);return a}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var r,e={},i={};for(r in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)r in t?e[r]=it(t[r],n[r]):i[r]=n[r];return function(t){for(r in e)i[r]=e[r](t);return i}}:nt)(t,n)},ot=function(t,n){return n-=t=+t,function(r){return Math.round(t+n*r)}},at=function(t){return function(){return t}},ut=function(t){return+t},ct=[0,1];function lt(t){return t}function st(t,n){return(n-=t=+t)?function(r){return(r-t)/n}:at(isNaN(n)?NaN:.5)}function ht(t,n,r){var e=t[0],i=t[1],o=n[0],a=n[1];return i<e?(e=st(i,e),o=r(a,o)):(e=st(e,i),o=r(o,a)),function(t){return o(e(t))}}function ft(t,n,r){var e=Math.min(t.length,n.length)-1,i=new Array(e),o=new Array(e),a=-1;for(t[e]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<e;)i[a]=st(t[a],t[a+1]),o[a]=r(n[a],n[a+1]);return function(n){var r=w(t,n,1,e)-1;return o[r](i[r](n))}}function gt(){var t,n,r,e,i,o,a=ct,u=ct,c=it,l=lt;function s(){var t,n,r,c=Math.min(a.length,u.length);return l!==lt&&(t=a[0],n=a[c-1],t>n&&(r=t,t=n,n=r),l=function(r){return Math.max(t,Math.min(n,r))}),e=c>2?ft:ht,i=o=null,h}function h(n){return isNaN(n=+n)?r:(i||(i=e(a.map(t),u,c)))(t(l(n)))}return h.invert=function(r){return l(n((o||(o=e(u,a.map(t),nt)))(r)))},h.domain=function(t){return arguments.length?(a=Array.from(t,ut),s()):a.slice()},h.range=function(t){return arguments.length?(u=Array.from(t),s()):u.slice()},h.rangeRound=function(t){return u=Array.from(t),c=ot,s()},h.clamp=function(t){return arguments.length?(l=!!t||lt,s()):l!==lt},h.interpolate=function(t){return arguments.length?(c=t,s()):c},h.unknown=function(t){return arguments.length?(r=t,h):r},function(r,e){return t=r,n=e,s()}}var pt=/^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;function dt(t){if(!(n=pt.exec(t)))throw new Error("invalid format: "+t);var n;return new yt({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function yt(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}dt.prototype=yt.prototype,yt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var mt,vt,wt,bt,Mt=function(t,n){if((r=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var r,e=t.slice(0,r);return[e.length>1?e[0]+e.slice(2):e,+t.slice(r+1)]},xt=function(t){return(t=Mt(Math.abs(t)))?t[1]:NaN},kt=function(t){t:for(var n,r=t.length,e=1,i=-1;e<r;++e)switch(t[e]){case".":i=n=e;break;case"0":0===i&&(i=e),n=e;break;default:if(i>0){if(!+t[e])break t;i=0}}return i>0?t.slice(0,i)+t.slice(n+1):t},Nt=function(t,n){var r=Mt(t,n);if(!r)return t+"";var e=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+e:e.length>i+1?e.slice(0,i+1)+"."+e.slice(i+1):e+new Array(i-e.length+2).join("0")},Et={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return Nt(100*t,n)},r:Nt,s:function(t,n){var r=Mt(t,n);if(!r)return t+"";var e=r[0],i=r[1],o=i-(mt=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=e.length;return o===a?e:o>a?e+new Array(o-a+1).join("0"):o>0?e.slice(0,o)+"."+e.slice(o):"0."+new Array(1-o).join("0")+Mt(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},jt=function(t){return t},Lt=Array.prototype.map,Ot=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];vt=function(t){var n,r,e=void 0===t.grouping||void 0===t.thousands?jt:(n=Lt.call(t.grouping,Number),r=t.thousands+"",function(t,e){for(var i=t.length,o=[],a=0,u=n[0],c=0;i>0&&u>0&&(c+u+1>e&&(u=Math.max(1,e-c)),o.push(t.substring(i-=u,i+u)),!((c+=u+1)>e));)u=n[a=(a+1)%n.length];return o.reverse().join(r)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",u=void 0===t.numerals?jt:function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}}(Lt.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",s=void 0===t.nan?"NaN":t.nan+"";function h(t){var n=(t=dt(t)).fill,r=t.align,h=t.sign,f=t.symbol,g=t.zero,p=t.width,d=t.comma,y=t.precision,m=t.trim,v=t.type;"n"===v?(d=!0,v="g"):Et[v]||(void 0===y&&(y=12),m=!0,v="g"),(g||"0"===n&&"="===r)&&(g=!0,n="0",r="=");var w="$"===f?i:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===f?o:/[%p]/.test(v)?c:"",M=Et[v],x=/[defgprs%]/.test(v);function k(t){var i,o,c,f=w,k=b;if("c"===v)k=M(t)+k,t="";else{var N=(t=+t)<0;if(t=isNaN(t)?s:M(Math.abs(t),y),m&&(t=kt(t)),N&&0==+t&&(N=!1),f=(N?"("===h?h:l:"-"===h||"("===h?"":h)+f,k=("s"===v?Ot[8+mt/3]:"")+k+(N&&"("===h?")":""),x)for(i=-1,o=t.length;++i<o;)if(48>(c=t.charCodeAt(i))||c>57){k=(46===c?a+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}d&&!g&&(t=e(t,1/0));var E=f.length+t.length+k.length,j=E<p?new Array(p-E+1).join(n):"";switch(d&&g&&(t=e(j+t,j.length?p-k.length:1/0),j=""),r){case"<":t=f+t+k+j;break;case"=":t=f+j+t+k;break;case"^":t=j.slice(0,E=j.length>>1)+f+t+k+j.slice(E);break;default:t=j+f+t+k}return u(t)}return y=void 0===y?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),k.toString=function(){return t+""},k}return{format:h,formatPrefix:function(t,n){var r=h(((t=dt(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(xt(n)/3))),i=Math.pow(10,-e),o=Ot[8+e/3];return function(t){return r(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),wt=vt.format,bt=vt.formatPrefix;var St=function(t,n,r,e){var i,o=function(t,n,r){var e=Math.abs(n-t)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),o=e/i;return o>=s?i*=10:o>=h?i*=5:o>=f&&(i*=2),n<t?-i:i}(t,n,r);switch((e=dt(null==e?",f":e)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(n));return null!=e.precision||isNaN(i=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(xt(n)/3)))-xt(Math.abs(t)))}(o,a))||(e.precision=i),bt(e,a);case"":case"e":case"g":case"p":case"r":null!=e.precision||isNaN(i=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,xt(n)-xt(t))+1}(o,Math.max(Math.abs(t),Math.abs(n))))||(e.precision=i-("e"===e.type));break;case"f":case"%":null!=e.precision||isNaN(i=function(t){return Math.max(0,-xt(Math.abs(t)))}(o))||(e.precision=i-2*("%"===e.type))}return wt(e)};function At(){var t=gt()(lt,lt);return t.copy=function(){return n=t,At().domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown());var n},c.apply(t,arguments),function(t){var n=t.domain;return t.ticks=function(t){var r=n();return g(r[0],r[r.length-1],null==t?10:t)},t.tickFormat=function(t,r){var e=n();return St(e[0],e[e.length-1],null==t?10:t,r)},t.nice=function(r){null==r&&(r=10);var e,i=n(),o=0,a=i.length-1,u=i[o],c=i[a];return c<u&&(e=u,u=c,c=e,e=o,o=a,a=e),(e=p(u,c,r))>0?e=p(u=Math.floor(u/e)*e,c=Math.ceil(c/e)*e,r):e<0&&(e=p(u=Math.ceil(u*e)/e,c=Math.floor(c*e)/e,r)),e>0?(i[o]=Math.floor(u/e)*e,i[a]=Math.ceil(c/e)*e,n(i)):e<0&&(i[o]=Math.ceil(u*e)/e,i[a]=Math.floor(c*e)/e,n(i)),t},t}(t)}var Pt,_t=function(t){for(var n=t.length/6|0,r=new Array(n),e=0;e<n;)r[e]="#"+t.slice(6*e,6*++e);return r}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Rt=24,Ft="Gloria Hallelujah",qt=64,Tt=function t(){var n=new Map,r=[],e=[],i=l;function o(t){var o=t+"",a=n.get(o);if(!a){if(i!==l)return i;n.set(o,a=r.push(t))}return e[(a-1)%e.length]}return o.domain=function(t){if(!arguments.length)return r.slice();r=[],n=new Map;for(const e of t){const t=e+"";n.has(t)||n.set(t,r.push(e))}return o},o.range=function(t){return arguments.length?(e=Array.from(t),o):e.slice()},o.unknown=function(t){return arguments.length?(i=t,o):i},o.copy=function(){return t(r,e).unknown(i)},c.apply(o,arguments),o}().domain(function(t,n,r){t=+t,n=+n,r=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+r;for(var e=-1,i=0|Math.max(0,Math.ceil((n-t)/r)),o=new Array(i);++e<i;)o[e]=t+e*r;return o}(0,10)).range(_t);function $t(t){var n=t.canvas,r=t.data,e=t.devicePixelRatio,i=t.height,o=t.width,a=At().domain([0,1]).range([qt,o*e-qt]),c=At().domain([0,1]).range([qt,i*e-qt]),l=r.map(function(){return{x:a(Math.random()),y:c(Math.random())}}),s=n.getContext("2d");return s.font="".concat(Rt*e,\'px "\').concat(Ft,\'"\'),r.forEach(function(t,n){var r=t.label;s.fillStyle=Tt(r),s.fillText(r,l[n].x,l[n].y)}),function(t){s.clearRect(0,0,o*e,i*e);for(var n=new Float32Array(t),a=At().domain(u(Object.values(n).filter(function(t,n){return n%2==0}))).range([qt,o*e-qt]),c=At().domain(u(Object.values(n).filter(function(t,n){return n%2!=0}))).range([qt,i*e-qt]),l=0;l<n.length;l+=2){var h=Math.floor(l/2);s.fillStyle=Tt(r[h].label),s.fillText(r[h].label,a(n[l]),c(n[l+1]))}}}function It(t){var n,r,e,o,u,c,l,s,h,f;return i.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:n=t.data,r=n.type,e=n.payload,o=e.canvas,u=e.coordinates,c=e.data,e.debugLogs,l=e.devicePixelRatio,e.exclude,s=e.height,e.include,e.iterate,e.stats,h=e.width,a()(e,["canvas","coordinates","data","debugLogs","devicePixelRatio","exclude","height","include","iterate","stats","width"]),"init"===r?(f=new FontFace(Ft,"url(https://fonts.gstatic.com/s/gloriahallelujah/v11/LYjYdHv3kUk9BMV96EIswT9DIbW-MIS11zOmvVCE.woff2)"),fonts.add(f),f.load().then(function(){Pt=$t({canvas:o,data:c,devicePixelRatio:l,height:s,width:h})})):"compute"===r&&Pt(u);case 2:case"end":return i.stop()}})}onmessage=function(){It.apply(void 0,arguments).catch(function(t){postMessage({type:"UMAP_ERROR",payload:{error:t.message}})})}}]);\n//# sourceMappingURL=e4638ba965406879fd98.worker.js.map',null)}},function(t,r,e){"use strict";var n=window.URL||window.webkitURL;t.exports=function(t,r){try{try{var e;try{(e=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),e=e.getBlob()}catch(r){e=new Blob([t])}return new Worker(n.createObjectURL(e))}catch(r){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!r)throw Error("Inline worker is not supported");return new Worker(r)}}},function(t,r){t.exports=e(32)},function(t,r){t.exports=e(112)},function(t,r){t.exports=e(591)},function(t,r,e){t.exports=function(){return e(7)('!function(t){var r={};function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)e.d(n,i,function(r){return t[r]}.bind(null,i));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=19)}([function(t,r,e){"use strict";const n=Object.prototype.toString;t.exports=function(t){return n.call(t).endsWith("Array]")}},function(t,r,e){t.exports=e(12)},function(t,r,e){"use strict";var n=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}};function i(t,r){return Math.floor(r()*t)}function o(t){for(var r=[],e=0;e<t;e++)r.push(void 0);return r}function s(t,r){return o(t).map(function(){return r})}function a(t){return s(t,0)}function u(t){return t.reduce(function(t,r){return t+r})}Object.defineProperty(r,"__esModule",{value:!0}),r.tauRandInt=i,r.tauRand=function(t){return t()},r.norm=function(t){var r,e,i=0;try{for(var o=n(t),s=o.next();!s.done;s=o.next()){var a=s.value;i+=Math.pow(a,2)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return Math.sqrt(i)},r.empty=o,r.range=function(t){return o(t).map(function(t,r){return r})},r.filled=s,r.zeros=a,r.ones=function(t){return s(t,1)},r.linear=function(t,r,e){return o(e).map(function(n,i){return t+i*((r-t)/(e-1))})},r.sum=u,r.mean=function(t){return u(t)/t.length},r.max=function(t){for(var r=0,e=0;e<t.length;e++)r=t[e]>r?t[e]:r;return r},r.max2d=function(t){for(var r=0,e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)r=t[e][n]>r?t[e][n]:r;return r},r.rejectionSample=function(t,r,e){for(var n=a(t),o=0;o<t;o++)for(var s=!0;s;){for(var u=i(r,e),h=!1,c=0;c<o;c++)if(u===n[c]){h=!0;break}h||(s=!1),n[o]=u}return n},r.reshape2d=function(t,r,e){var n=[],i=0;if(t.length!==r*e)throw new Error("Array dimensions must match input length.");for(var o=0;o<r;o++){for(var s=[],a=0;a<e;a++)s.push(t[i]),i+=1;n.push(s)}return n}},,function(t,r,e){var n=e(14),i=e(15),o=e(16);t.exports=function(t){return n(t)||i(t)||o()}},function(t,r,e){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e(2));function o(t,r){var e=function(e){return i.empty(t).map(function(){return i.filled(r,e)})},n=[];return n.push(e(-1)),n.push(e(1/0)),n.push(e(0)),n}function s(t,r,e,n,i){r=Math.floor(r);var o=t[0][r],s=t[1][r];t[2][r];if(e>=s[0])return 0;for(var u=0;u<o.length;u++)if(n===o[u])return 0;return a(t,r,e,n,i)}function a(t,r,e,n,i){var o=t[0][r],s=t[1][r],a=t[2][r];if(e>=s[0])return 0;s[0]=e,o[0]=n,a[0]=i;for(var u=0,h=0;;){var c=2*u+1,l=c+1,f=t[0][0].length;if(c>=f)break;if(l>=f){if(!(s[c]>e))break;h=c}else if(s[c]>=s[l]){if(!(e<s[c]))break;h=c}else{if(!(e<s[l]))break;h=l}s[u]=s[h],o[u]=o[h],a[u]=a[h],u=h}return s[u]=e,o[u]=n,a[u]=i,1}function u(t,r,e,n){for(;2*n+1<e;){var i=2*n+1,o=i+1,s=n;if(t[s]<t[i]&&(s=i),o<e&&t[s]<t[o]&&(s=o),s===n)break;var a=t[n];t[n]=t[s],t[s]=a;var u=r[n];r[n]=r[s],r[s]=u,n=s}}r.makeHeap=o,r.rejectionSample=function(t,r,e){for(var n=i.zeros(t),o=0;o<t;o++){for(var s=!0,a=0;s;){a=i.tauRandInt(r,e);for(var u=!1,h=0;h<o;h++)if(a===n[h]){u=!0;break}u||(s=!1)}n[o]=a}return n},r.heapPush=s,r.uncheckedHeapPush=a,r.buildCandidates=function(t,r,e,n,a){for(var u=o(r,n),h=0;h<r;h++)for(var c=0;c<e;c++)if(!(t[0][h][c]<0)){var l=t[0][h][c],f=t[2][h][c],m=i.tauRand(a);s(u,h,m,l,f),s(u,l,m,h,f),t[2][h][c]=0}return u},r.deheapSort=function(t){for(var r=t[0],e=t[1],n=0;n<r.length;n++)for(var i=r[n],o=e[n],s=0;s<i.length-1;s++){var a=i.length-s-1,h=o.length-s-1,c=i[0];i[0]=i[a],i[a]=c;var l=o[0];o[0]=o[h],o[h]=l,u(o,i,h,0)}return{indices:r,weights:e}},r.smallestFlagged=function(t,r){for(var e=t[0][r],n=t[1][r],i=t[2][r],o=1/0,s=-1,a=0;a>e.length;a++)1===i[a]&&n[a]<o&&(o=n[a],s=a);return s>=0?(i[s]=0,Math.floor(e[s])):-1}},function(t,r,e){"use strict";var n,i=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),s=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(i(arguments[r]));return t},s=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var u=a(e(2)),h=function(){function t(t,r,e,n){this.entries=new Map,this.nRows=0,this.nCols=0,this.rows=o(t),this.cols=o(r),this.values=o(e);for(var i=0;i<e.length;i++){var s=this.makeKey(this.rows[i],this.cols[i]);this.entries.set(s,i)}this.nRows=n[0],this.nCols=n[1]}return t.prototype.makeKey=function(t,r){return t+":"+r},t.prototype.checkDims=function(t,r){if(!(t<this.nRows&&r<this.nCols))throw new Error("array index out of bounds")},t.prototype.set=function(t,r,e){this.checkDims(t,r);var n=this.makeKey(t,r);if(this.entries.has(n)){var i=this.entries.get(n);this.values[i]=e}else this.rows.push(t),this.cols.push(r),this.values.push(e),this.entries.set(n,this.values.length-1)},t.prototype.get=function(t,r,e){void 0===e&&(e=0),this.checkDims(t,r);var n=this.makeKey(t,r);if(this.entries.has(n)){var i=this.entries.get(n);return this.values[i]}return e},t.prototype.getDims=function(){return[this.nRows,this.nCols]},t.prototype.getRows=function(){return o(this.rows)},t.prototype.getCols=function(){return o(this.cols)},t.prototype.getValues=function(){return o(this.values)},t.prototype.forEach=function(t){for(var r=0;r<this.values.length;r++)t(this.values[r],this.rows[r],this.cols[r])},t.prototype.map=function(r){for(var e=[],n=0;n<this.values.length;n++)e.push(r(this.values[n],this.rows[n],this.cols[n]));var i=[this.nRows,this.nCols];return new t(this.rows,this.cols,e,i)},t.prototype.toArray=function(){for(var t=this,r=u.empty(this.nRows).map(function(){return u.zeros(t.nCols)}),e=0;e<this.values.length;e++)r[this.rows[e]][this.cols[e]]=this.values[e];return r},t}();r.SparseMatrix=h,r.transpose=function(t){var r=[],e=[],n=[];t.forEach(function(t,i,o){r.push(i),e.push(o),n.push(t)});var i=[t.nCols,t.nRows];return new h(e,r,n,i)},r.identity=function(t){for(var r=i(t,1)[0],e=new h([],[],[],t),n=0;n<r;n++)e.set(n,n,1);return e},r.pairwiseMultiply=function(t,r){return l(t,r,function(t,r){return t*r})},r.add=function(t,r){return l(t,r,function(t,r){return t+r})},r.subtract=function(t,r){return l(t,r,function(t,r){return t-r})},r.maximum=function(t,r){return l(t,r,function(t,r){return t>r?t:r})},r.multiplyScalar=function(t,r){return t.map(function(t){return t*r})},r.eliminateZeros=function(t){for(var r=new Set,e=t.getValues(),n=t.getRows(),i=t.getCols(),o=0;o<e.length;o++)0===e[o]&&r.add(o);var s=function(t,e){return!r.has(e)},a=e.filter(s),u=n.filter(s),c=i.filter(s);return new h(u,c,a,t.getDims())},r.normalize=function(t,r){var e,n;void 0===r&&(r="l2");var i=c[r],o=new Map;t.forEach(function(t,r,e){var n=o.get(r)||[];n.push(e),o.set(r,n)});var a=new h([],[],[],t.getDims()),u=function(r){for(var e=o.get(r).sort(),n=e.map(function(e){return t.get(r,e)}),s=i(n),u=0;u<s.length;u++)a.set(r,e[u],s[u])};try{for(var l=s(o.keys()),f=l.next();!f.done;f=l.next())u(f.value)}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return a};var c=((n={}).max=function(t){for(var r=-1/0,e=0;e<t.length;e++)r=t[e]>r?t[e]:r;return t.map(function(t){return t/r})},n.l1=function(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return t.map(function(t){return t/r})},n.l2=function(t){for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return t.map(function(t){return Math.sqrt(Math.pow(t,2)/r)})},n);function l(t,r,e){for(var n=new Set,i=[],o=[],s=[],a=function(n,a){i.push(n),o.push(a);var u=e(t.get(n,a),r.get(n,a));s.push(u)},u=t.getValues(),c=t.getRows(),l=t.getCols(),f=0;f<u.length;f++){var m=(d=c[f])+":"+(w=l[f]);n.add(m),a(d,w)}var p=r.getValues(),g=r.getRows(),v=r.getCols();for(f=0;f<p.length;f++){var d,w;m=(d=g[f])+":"+(w=v[f]);n.has(m)||a(d,w)}var y=[t.nRows,t.nCols];return new h(i,o,s,y)}r.getCSR=function(t){var r=[];t.forEach(function(t,e,n){r.push({value:t,row:e,col:n})}),r.sort(function(t,r){return t.row===r.row?t.col-r.col:t.row-r.col});for(var e=[],n=[],i=[],o=-1,s=0;s<r.length;s++){var a=r[s],u=a.row,h=a.col,c=a.value;u!==o&&(o=u,i.push(s)),e.push(h),n.push(c)}return{indices:e,values:n,indptr:i}}},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),s=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var a=s(e(2)),u=function(t,r,e,n){this.hyperplanes=t,this.offsets=r,this.children=e,this.indices=n};function h(t,r,e,n){for(var i=r,o=0;o<e.length;o++)i+=t[o]*e[o];return 0===i?a.tauRandInt(2,n):i>0?0:1}r.FlatTree=u,r.makeForest=function(t,r,e,n){var o=Math.max(10,r);return a.range(e).map(function(r,e){return function(t,r,e,n){void 0===r&&(r=30);var i=a.range(t.length);return function t(r,e,n,i,o){if(void 0===n&&(n=30),e.length>n){var s=function(t,r,e){var n=t[0].length,i=a.tauRandInt(r.length,e),o=a.tauRandInt(r.length,e);o=(o+=i===o?1:0)%r.length;for(var s=r[i],u=r[o],h=0,c=a.zeros(n),l=0;l<c.length;l++)c[l]=t[s][l]-t[u][l],h-=c[l]*(t[s][l]+t[u][l])/2;for(var f=0,m=0,p=a.zeros(r.length),l=0;l<r.length;l++){for(var g=h,v=0;v<n;v++)g+=c[v]*t[r[l]][v];0===g?(p[l]=a.tauRandInt(2,e),0===p[l]?f+=1:m+=1):g>0?(p[l]=0,f+=1):(p[l]=1,m+=1)}var d=a.zeros(f),w=a.zeros(m);for(var l in f=0,m=0,a.range(p.length))0===p[l]?(d[f]=r[l],f+=1):(w[m]=r[l],m+=1);return{indicesLeft:d,indicesRight:w,hyperplane:c,offset:h}}(r,e,o),u=s.indicesLeft,h=s.indicesRight,c=s.hyperplane,l=s.offset,f=t(r,u,n,i+1,o),m=t(r,h,n,i+1,o),p={leftChild:f,rightChild:m,isLeaf:!1,hyperplane:c,offset:l};return p}var p={indices:e,isLeaf:!0};return p}(t,i,r,e,n)}(t,o,e,n)}).map(function(t){return function(t,r){var e=function t(r){return r.isLeaf?1:1+t(r.leftChild)+t(r.rightChild)}(t),n=function t(r){return r.isLeaf?1:t(r.leftChild)+t(r.rightChild)}(t),o=a.range(e).map(function(){return a.zeros(t.hyperplane.length)}),s=a.zeros(e),h=a.range(e).map(function(){return[-1,-1]}),c=a.range(n).map(function(){return a.range(r).map(function(){return-1})});return function t(r,e,n,o,s,a,u){var h;if(r.isLeaf)return o[a][0]=-u,(h=s[u]).splice.apply(h,i([0,r.indices.length],r.indices)),{nodeNum:a,leafNum:u+=1};e[a]=r.hyperplane,n[a]=r.offset,o[a][0]=a+1;var c=a,l=t(r.leftChild,e,n,o,s,a+1,u);return a=l.nodeNum,u=l.leafNum,o[c][1]=a+1,{nodeNum:(l=t(r.rightChild,e,n,o,s,a+1,u)).nodeNum,leafNum:l.leafNum}}(t,o,s,h,c,0,0),new u(o,s,h,c)}(t,o)})},r.makeLeafArray=function(t){var r,e;if(t.length>0){var n=[];try{for(var s=o(t),a=s.next();!a.done;a=s.next()){var u=a.value;n.push.apply(n,i(u.indices))}}catch(t){r={error:t}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(r)throw r.error}}return n}return[[-1]]},r.searchFlatTree=function(t,r,e){for(var n=0;r.children[n][0]>0;)n=0===h(r.hyperplanes[n],r.offsets[n],t,e)?r.children[n][0]:r.children[n][1];var i=-1*r.children[n][0];return r.indices[i]}},function(t,r,e){var n=e(13);t.exports=function(t,r){if(null==t)return{};var e,i,o=n(t,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)e=s[i],r.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(o[e]=t[e])}return o}},function(t,r){t.exports=function(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(17);r.UMAP=n.UMAP},,function(t,r,e){var n=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,r,e,n){var i=r&&r.prototype instanceof g?r:g,o=Object.create(i.prototype),s=new R(n||[]);return o._invoke=function(t,r,e){var n=c;return function(i,o){if(n===f)throw new Error("Generator is already running");if(n===m){if("throw"===i)throw o;return O()}for(e.method=i,e.arg=o;;){var s=e.delegate;if(s){var a=E(s,e);if(a){if(a===p)continue;return a}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===c)throw n=m,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=f;var u=h(t,r,e);if("normal"===u.type){if(n=e.done?m:l,u.arg===p)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=m,e.method="throw",e.arg=u.arg)}}}(t,e,s),o}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c="suspendedStart",l="suspendedYield",f="executing",m="completed",p={};function g(){}function v(){}function d(){}var w={};w[o]=function(){return this};var y=Object.getPrototypeOf,b=y&&y(y(A([])));b&&b!==e&&n.call(b,o)&&(w=b);var x=d.prototype=g.prototype=Object.create(w);function M(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function S(t){var r;this._invoke=function(e,i){function o(){return new Promise(function(r,o){!function r(e,i,o,s){var a=h(t[e],t,i);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"==typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then(function(t){r("next",t,o,s)},function(t){r("throw",t,o,s)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},function(t){return r("throw",t,o,s)})}s(a.arg)}(e,i,r,o)})}return r=r?r.then(o,o):o()}}function E(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,E(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a \'throw\' method")}return p}var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function k(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function N(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=r,e.done=!0,e};return s.next=s}}return{next:O}}function O(){return{value:r,done:!0}}return v.prototype=x.constructor=d,d.constructor=v,d[a]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},M(S.prototype),S.prototype[s]=function(){return this},t.AsyncIterator=S,t.async=function(r,e,n,i){var o=new S(u(r,e,n,i));return t.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},M(x),x[a]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return a.type="throw",a.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),h=n.call(s,"finallyLoc");if(u&&h){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=r,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),N(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var i=n.arg;N(e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:A(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),p}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,r){t.exports=function(t,r){if(null==t)return{};var e,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)e=o[n],r.indexOf(e)>=0||(i[e]=t[e]);return i}},function(t,r){t.exports=function(t){if(Array.isArray(t)){for(var r=0,e=new Array(t.length);r<t.length;r++)e[r]=t[r];return e}}},function(t,r){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,r){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,r,e){"use strict";var n=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new e(function(r){r(t.value)}).then(s,a)}u((n=n.apply(t,r||[])).next())})},i=this&&this.__generator||function(t,r){var e,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=r.call(t,s)}catch(t){o=[6,t],n=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),s=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(o(arguments[r]));return t},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var h=a(e(5)),c=a(e(6)),l=a(e(18)),f=a(e(7)),m=a(e(2)),p=u(e(20)),g=function(){function t(t){void 0===t&&(t={});var r=this;this.learningRate=1,this.localConnectivity=1,this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.negativeSampleRate=5,this.random=Math.random,this.repulsionStrength=1,this.setOpMixRatio=1,this.spread=1,this.transformQueueSize=4,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=v,this.isInitialized=!1,this.rpForest=[],this.embedding=[],this.optimizationState=new d;var e=function(e){void 0!==t[e]&&(r[e]=t[e])};e("distanceFn"),e("learningRate"),e("localConnectivity"),e("minDist"),e("nComponents"),e("nEpochs"),e("nNeighbors"),e("negativeSampleRate"),e("random"),e("repulsionStrength"),e("setOpMixRatio"),e("spread"),e("transformQueueSize")}return t.prototype.fit=function(t){return this.initializeFit(t),this.optimizeLayout(),this.embedding},t.prototype.fitAsync=function(t,r){return void 0===r&&(r=function(){return!0}),n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.initializeFit(t),[4,this.optimizeLayoutAsync(r)];case 1:return e.sent(),[2,this.embedding]}})})},t.prototype.setSupervisedProjection=function(t,r){void 0===r&&(r={}),this.Y=t,this.targetMetric=r.targetMetric||this.targetMetric,this.targetWeight=r.targetWeight||this.targetWeight,this.targetNNeighbors=r.targetNNeighbors||this.targetNNeighbors},t.prototype.setPrecomputedKNN=function(t,r){this.knnIndices=t,this.knnDistances=r},t.prototype.initializeFit=function(t){if(this.X===t&&this.isInitialized)return this.getNEpochs();if(this.X=t,!this.knnIndices&&!this.knnDistances){var r=this.nearestNeighbors(t);this.knnIndices=r.knnIndices,this.knnDistances=r.knnDistances}this.graph=this.fuzzySimplicialSet(t,this.nNeighbors,this.setOpMixRatio),this.makeSearchFns(),this.searchGraph=this.makeSearchGraph(t),this.processGraphForSupervisedProjection();var e=this.initializeSimplicialSetEmbedding(),n=e.head,i=e.tail,o=e.epochsPerSample;return this.optimizationState.head=n,this.optimizationState.tail=i,this.optimizationState.epochsPerSample=o,this.initializeOptimization(),this.prepareForOptimizationLoop(),this.isInitialized=!0,this.getNEpochs()},t.prototype.makeSearchFns=function(){var t=l.makeInitializations(this.distanceFn),r=t.initFromTree,e=t.initFromRandom;this.initFromTree=r,this.initFromRandom=e,this.search=l.makeInitializedNNSearch(this.distanceFn)},t.prototype.makeSearchGraph=function(t){for(var r=this.knnIndices,e=this.knnDistances,n=[t.length,t.length],i=new c.SparseMatrix([],[],[],n),o=0;o<r.length;o++)for(var s=r[o],a=e[o],u=0;u<s.length;u++){var h=s[u],l=a[u];l>0&&i.set(o,h,l)}var f=c.transpose(i);return c.maximum(i,f)},t.prototype.transform=function(t){var r=this,e=this.X;if(void 0===e||0===e.length)throw new Error("No data has been fit.");var n=Math.floor(this.nNeighbors*this.transformQueueSize),i=l.initializeSearch(this.rpForest,e,t,n,this.initFromRandom,this.initFromTree,this.random),o=this.search(e,this.searchGraph,i,t),s=h.deheapSort(o),a=s.indices,u=s.weights;a=a.map(function(t){return t.slice(0,r.nNeighbors)}),u=u.map(function(t){return t.slice(0,r.nNeighbors)});var f=Math.max(0,this.localConnectivity-1),p=this.smoothKNNDistance(u,this.nNeighbors,f),g=p.sigmas,v=p.rhos,d=this.computeMembershipStrengths(a,u,g,v),w=d.rows,y=d.cols,b=d.vals,x=[t.length,e.length],M=new c.SparseMatrix(w,y,b,x),E=c.normalize(M,"l1"),k=c.getCSR(E),N=t.length,R=S(m.reshape2d(k.indices,N,this.nNeighbors),m.reshape2d(k.values,N,this.nNeighbors),this.embedding),A=this.nEpochs?this.nEpochs/3:M.nRows<=1e4?100:30,O=M.getValues().reduce(function(t,r){return r>t?r:t},0);M=M.map(function(t){return t<O/A?0:t}),M=c.eliminateZeros(M);var j=this.makeEpochsPerSample(M.getValues(),A),z=M.getRows(),_=M.getCols();return this.assignOptimizationStateParameters({headEmbedding:R,tailEmbedding:this.embedding,head:z,tail:_,currentEpoch:0,nEpochs:A,nVertices:M.getDims()[1],epochsPerSample:j}),this.prepareForOptimizationLoop(),this.optimizeLayout()},t.prototype.processGraphForSupervisedProjection=function(){var t=this.Y,r=this.X;if(t){if(t.length!==r.length)throw new Error("Length of X and y must be equal");if("categorical"===this.targetMetric){var e=this.targetWeight<1?1/(1-this.targetWeight)*2.5:1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,t,e)}}},t.prototype.step=function(){var t=this.optimizationState.currentEpoch;return t<this.getNEpochs()&&this.optimizeLayoutStep(t),this.optimizationState.currentEpoch},t.prototype.getEmbedding=function(){return this.embedding},t.prototype.nearestNeighbors=function(t){var r,e=this.distanceFn,n=this.nNeighbors,i=l.makeNNDescent(e,this.random),o=5+Math.floor(.5===(r=Math.pow(t.length,.5)/20)?0:Math.round(r)),s=Math.max(5,Math.floor(Math.round(function(t){return Math.log(t)/Math.log(2)}(t.length))));this.rpForest=f.makeForest(t,n,o,this.random);var a=i(t,f.makeLeafArray(this.rpForest),n,s);return{knnIndices:a.indices,knnDistances:a.weights}},t.prototype.fuzzySimplicialSet=function(t,r,e){void 0===e&&(e=1);var n=this.knnIndices,i=void 0===n?[]:n,o=this.knnDistances,s=void 0===o?[]:o,a=this.localConnectivity,u=this.smoothKNNDistance(s,r,a),h=u.sigmas,l=u.rhos,f=this.computeMembershipStrengths(i,s,h,l),m=f.rows,p=f.cols,g=f.vals,v=[t.length,t.length],d=new c.SparseMatrix(m,p,g,v),w=c.transpose(d),y=c.pairwiseMultiply(d,w),b=c.subtract(c.add(d,w),y),x=c.multiplyScalar(b,e),M=c.multiplyScalar(y,1-e);return c.add(x,M)},t.prototype.categoricalSimplicialSetIntersection=function(t,r,e,n){void 0===n&&(n=1);var i=x(t,r,n,e);return M(i=c.eliminateZeros(i))},t.prototype.smoothKNNDistance=function(t,r,e,n,i){void 0===e&&(e=1),void 0===n&&(n=64),void 0===i&&(i=1);for(var o=Math.log(r)/Math.log(2)*i,s=m.zeros(t.length),a=m.zeros(t.length),u=0;u<t.length;u++){var h=0,c=1/0,l=1,f=t[u],p=f.filter(function(t){return t>0});if(p.length>=e){var g=Math.floor(e),v=e-g;g>0?(s[u]=p[g-1],v>1e-5&&(s[u]+=v*(p[g]-p[g-1]))):s[u]=v*p[0]}else p.length>0&&(s[u]=m.max(p));for(var d=0;d<n;d++){for(var w=0,y=1;y<t[u].length;y++){var b=t[u][y]-s[u];w+=b>0?Math.exp(-b/l):1}if(Math.abs(w-o)<1e-5)break;w>o?l=(h+(c=l))/2:(h=l,c===1/0?l*=2:l=(h+c)/2)}if(a[u]=l,s[u]>0){var x=m.mean(f);a[u]<.001*x&&(a[u]=.001*x)}else{var M=m.mean(t.map(m.mean));a[u]<.001*M&&(a[u]=.001*M)}}return{sigmas:a,rhos:s}},t.prototype.computeMembershipStrengths=function(t,r,e,n){for(var i=t.length,o=t[0].length,s=m.zeros(i*o),a=m.zeros(i*o),u=m.zeros(i*o),h=0;h<i;h++)for(var c=0;c<o;c++){var l=0;-1!==t[h][c]&&(l=t[h][c]===h?0:r[h][c]-n[h]<=0?1:Math.exp(-(r[h][c]-n[h])/e[h]),s[h*o+c]=h,a[h*o+c]=t[h][c],u[h*o+c]=l)}return{rows:s,cols:a,vals:u}},t.prototype.initializeSimplicialSetEmbedding=function(){for(var t=this,r=this.getNEpochs(),e=this.nComponents,n=this.graph.getValues(),i=0,o=0;o<n.length;o++){var s=n[o];i<n[o]&&(i=s)}var a=this.graph.map(function(t){return t<i/r?0:t});this.embedding=m.zeros(a.nRows).map(function(){return m.zeros(e).map(function(){return 20*m.tauRand(t.random)-10})});var u=[],h=[],c=[];for(o=0;o<a.nRows;o++)for(var l=0;l<a.nCols;l++){(s=a.get(o,l))&&(u.push(s),c.push(o),h.push(l))}return{head:h,tail:c,epochsPerSample:this.makeEpochsPerSample(u,r)}},t.prototype.makeEpochsPerSample=function(t,r){var e=m.filled(t.length,-1),n=m.max(t),i=t.map(function(t){return t/n*r});return i.forEach(function(t,n){t>0&&(e[n]=r/i[n])}),e},t.prototype.assignOptimizationStateParameters=function(t){Object.assign(this.optimizationState,t)},t.prototype.prepareForOptimizationLoop=function(){var t=this.repulsionStrength,r=this.learningRate,e=this.negativeSampleRate,n=this.optimizationState,i=n.epochsPerSample,o=n.headEmbedding,a=n.tailEmbedding,u=o[0].length,h=o.length===a.length,c=i.map(function(t){return t/e}),l=s(c),f=s(i);this.assignOptimizationStateParameters({epochOfNextSample:f,epochOfNextNegativeSample:l,epochsPerNegativeSample:c,moveOther:h,initialAlpha:r,alpha:r,gamma:t,dim:u})},t.prototype.initializeOptimization=function(){var t=this.embedding,r=this.embedding,e=this.optimizationState,n=e.head,i=e.tail,o=e.epochsPerSample,s=this.getNEpochs(),a=this.graph.nCols,u=b(this.spread,this.minDist),h=u.a,c=u.b;this.assignOptimizationStateParameters({headEmbedding:t,tailEmbedding:r,head:n,tail:i,epochsPerSample:o,a:h,b:c,nEpochs:s,nVertices:a})},t.prototype.optimizeLayoutStep=function(t){for(var r=this.optimizationState,e=r.head,n=r.tail,i=r.headEmbedding,o=r.tailEmbedding,s=r.epochsPerSample,a=r.epochOfNextSample,u=r.epochOfNextNegativeSample,h=r.epochsPerNegativeSample,c=r.moveOther,l=r.initialAlpha,f=r.alpha,p=r.gamma,g=r.a,v=r.b,d=r.dim,b=r.nEpochs,x=r.nVertices,M=0;M<s.length;M++)if(!(a[M]>t)){var S=e[M],E=n[M],k=i[S],N=o[E],R=y(k,N),A=0;R>0&&(A=-2*g*v*Math.pow(R,v-1),A/=g*Math.pow(R,v)+1);for(var O=0;O<d;O++){var j=w(A*(k[O]-N[O]),4);k[O]+=j*f,c&&(N[O]+=-j*f)}a[M]+=s[M];for(var z=Math.floor((t-u[M])/h[M]),_=0;_<z;_++){var P=m.tauRandInt(x,this.random),C=o[P],I=y(k,C),L=0;if(I>0)L=2*p*v,L/=(.001+I)*(g*Math.pow(I,v)+1);else if(S===P)continue;for(O=0;O<d;O++){j=4;L>0&&(j=w(L*(k[O]-C[O]),4)),k[O]+=j*f}}u[M]+=z*h[M]}return r.alpha=l*(1-t/b),r.currentEpoch+=1,i},t.prototype.optimizeLayoutAsync=function(t){var r=this;return void 0===t&&(t=function(){return!0}),new Promise(function(e,o){var s=function(){return n(r,void 0,void 0,function(){var r,n,a,u,h,c;return i(this,function(i){try{if(r=this.optimizationState,n=r.nEpochs,a=r.currentEpoch,this.embedding=this.optimizeLayoutStep(a),u=this.optimizationState.currentEpoch,h=!1===t(u),c=u===n,h||c)return[2,e(c)];s()}catch(t){o(t)}return[2]})})};s()})},t.prototype.optimizeLayout=function(t){void 0===t&&(t=function(){return!0});for(var r=!1,e=[];!r;){var n=this.optimizationState,i=n.nEpochs,o=n.currentEpoch;e=this.optimizeLayoutStep(o);var s=this.optimizationState.currentEpoch,a=!1===t(s);r=s===i||a}return e},t.prototype.getNEpochs=function(){var t=this.graph;if(this.nEpochs>0)return this.nEpochs;var r=t.nRows;return r<=2500?500:r<=5e3?400:r<=7500?300:200},t}();function v(t,r){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n]-r[n],2);return Math.sqrt(e)}r.UMAP=g,r.euclidean=v,r.cosine=function(t,r){for(var e=0,n=0,i=0,o=0;o<t.length;o++)e+=t[o]*r[o],n+=Math.pow(t[o],2),i+=Math.pow(r[o],2);return 0===n&&0===i?0:0===n||0===i?1:1-e/Math.sqrt(n*i)};var d=function(){this.currentEpoch=0,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0};function w(t,r){return t>r?r:t<-r?-r:t}function y(t,r){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n]-r[n],2);return e}function b(t,r){var e=m.linear(0,3*t,300).map(function(t){return t<r?1:t}),n=m.zeros(e.length).map(function(n,i){return e[i]>=r?Math.exp(-(e[i]-r)/t):n}),i={x:e,y:n},s={damping:1.5,initialValues:[.5,.5],gradientDifference:.1,maxIterations:100,errorTolerance:.01},a=p.default(i,function(t){var r=o(t,2),e=r[0],n=r[1];return function(t){return 1/(1+e*Math.pow(t,2*n))}},s).parameterValues,u=o(a,2);return{a:u[0],b:u[1]}}function x(t,r,e,n){return void 0===e&&(e=1),void 0===n&&(n=5),t.map(function(t,i,o){return-1===r[i]||-1===r[o]?t*Math.exp(-e):r[i]!==r[o]?t*Math.exp(-n):t})}function M(t){t=c.normalize(t,"max");var r=c.transpose(t),e=c.pairwiseMultiply(r,t);return t=c.add(t,c.subtract(r,e)),c.eliminateZeros(t)}function S(t,r,e){for(var n=m.zeros(t.length).map(function(t){return m.zeros(e[0].length)}),i=0;i<t.length;i++)for(var o=0;o<t[0].length;o++)for(var s=0;s<e[0].length;s++){var a=t[i][o];n[i][s]+=r[i][o]*e[a][s]}return n}r.findABParams=b,r.fastIntersection=x,r.resetLocalConnectivity=M,r.initTransform=S},function(t,r,e){"use strict";var n=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var o=i(e(5)),s=i(e(6)),a=i(e(7)),u=i(e(2));r.makeNNDescent=function(t,r){return function(e,n,i,s,a,h,c,l){void 0===s&&(s=10),void 0===a&&(a=50),void 0===h&&(h=.001),void 0===c&&(c=.5),void 0===l&&(l=!0);for(var f=e.length,m=o.makeHeap(e.length,i),p=0;p<e.length;p++)for(var g=o.rejectionSample(i,e.length,r),v=0;v<g.length;v++){var d=t(e[p],e[g[v]]);o.heapPush(m,p,d,g[v],1),o.heapPush(m,g[v],d,p,1)}if(l)for(var w=0;w<n.length;w++)for(p=0;p<n[w].length&&!(n[w][p]<0);p++)for(v=p+1;v<n[w].length&&!(n[w][v]<0);v++)d=t(e[n[w][p]],e[n[w][v]]),o.heapPush(m,n[w][p],d,n[w][v],1),o.heapPush(m,n[w][v],d,n[w][p],1);for(w=0;w<s;w++){var y=o.buildCandidates(m,f,i,a,r),b=0;for(p=0;p<f;p++)for(v=0;v<a;v++){var x=Math.floor(y[0][p][v]);if(!(x<0||u.tauRand(r)<c))for(var M=0;M<a;M++){var S=Math.floor(y[0][p][M]),E=y[2][p][v],k=y[2][p][M];S<0||!E&&!k||(d=t(e[x],e[S]),b+=o.heapPush(m,x,d,S,1),b+=o.heapPush(m,S,d,x,1))}}if(b<=h*i*e.length)break}return o.deheapSort(m)}},r.makeInitializations=function(t){return{initFromRandom:function(r,e,n,i,s){for(var a=0;a<n.length;a++)for(var h=u.rejectionSample(r,e.length,s),c=0;c<h.length;c++)if(!(h[c]<0)){var l=t(e[h[c]],n[a]);o.heapPush(i,a,l,h[c],1)}},initFromTree:function(r,e,n,i,s){for(var u=0;u<n.length;u++)for(var h=a.searchFlatTree(n[u],r,s),c=0;c<h.length;c++){if(h[c]<0)return;var l=t(e[h[c]],n[u]);o.heapPush(i,u,l,h[c],1)}}}},r.makeInitializedNNSearch=function(t){return function(r,e,i,a){for(var u,h,c=s.getCSR(e),l=c.indices,f=c.indptr,m=0;m<a.length;m++)for(var p=new Set(i[0][m]);;){var g=o.smallestFlagged(i,m);if(-1===g)break;var v=l.slice(f[g],f[g+1]);try{for(var d=n(v),w=d.next();!w.done;w=d.next()){var y=w.value;if(y!==g&&-1!==y&&!p.has(y)){var b=t(r[y],a[m]);o.uncheckedHeapPush(i,m,b,y,1),p.add(y)}}}catch(t){u={error:t}}finally{try{w&&!w.done&&(h=d.return)&&h.call(d)}finally{if(u)throw u.error}}}return i}},r.initializeSearch=function(t,r,e,i,s,a,u){var h,c,l=o.makeHeap(e.length,i);if(s(i,r,e,l,u),t)try{for(var f=n(t),m=f.next();!m.done;m=f.next())a(m.value,r,e,l,u)}catch(t){h={error:t}}finally{try{m&&!m.done&&(c=f.return)&&c.call(f)}finally{if(h)throw h.error}}return l}},function(t,r,e){"use strict";e.r(r);var n=e(1),i=e.n(n),o=e(8),s=e.n(o);var a=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?r.exclude?t.map(function(t){for(var e=Object.keys(t),n={},i=function(i){-1===r.exclude.findIndex(function(t){return t===e[i]})&&(n[e[i]]=t[e[i]])},o=0;o<e.length;++o)i(o);return Object.values(n)}):r.include?t.map(function(t){for(var e=Object.keys(t),n={},i=function(i){-1!==r.include.findIndex(function(t){return t===e[i]})&&(n[e[i]]=t[e[i]])},o=0;o<e.length;++o)i(o);return Object.values(n)}):t.map(function(t){return Object.values(t)}):null},u=e(9),h=e.n(u),c=e(4),l=e.n(c),f=function(t,r,e){t=+t,r=+r,e=(i=arguments.length)<2?(r=t,t=0,1):i<3?1:+e;for(var n=-1,i=0|Math.max(0,Math.ceil((r-t)/e)),o=new Array(i);++n<i;)o[n]=t+n*e;return o},m=Math.sqrt(50),p=Math.sqrt(10),g=Math.sqrt(2),v=function(t,r,e){var n,i,o,s,a=-1;if(e=+e,(t=+t)===(r=+r)&&e>0)return[t];if((n=r<t)&&(i=t,t=r,r=i),0===(s=d(t,r,e))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),r=Math.floor(r/s),o=new Array(i=Math.ceil(r-t+1));++a<i;)o[a]=(t+a)*s;else for(t=Math.floor(t*s),r=Math.ceil(r*s),o=new Array(i=Math.ceil(t-r+1));++a<i;)o[a]=(t-a)/s;return n&&o.reverse(),o};function d(t,r,e){var n=(r-t)/Math.max(0,e),i=Math.floor(Math.log(n)/Math.LN10),o=n/Math.pow(10,i);return i>=0?(o>=m?10:o>=p?5:o>=g?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=m?10:o>=p?5:o>=g?2:1)}var w=function(t,r){return t<r?-1:t>r?1:t>=r?0:NaN};var y,b,x=(1===(y=w).length&&(b=y,y=function(t,r){return w(b(t),r)}),{left:function(t,r,e,n){for(null==e&&(e=0),null==n&&(n=t.length);e<n;){var i=e+n>>>1;y(t[i],r)<0?e=i+1:n=i}return e},right:function(t,r,e,n){for(null==e&&(e=0),null==n&&(n=t.length);e<n;){var i=e+n>>>1;y(t[i],r)>0?n=i:e=i+1}return e}}),M=x.right,S=function(t,r,e){t.prototype=r.prototype=e,e.constructor=t};function E(t,r){var e=Object.create(t.prototype);for(var n in r)e[n]=r[n];return e}function k(){}var N="\\\\s*([+-]?\\\\d+)\\\\s*",R="\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*",A="\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*",O=/^#([0-9a-f]{3,8})$/,j=new RegExp("^rgb\\\\("+[N,N,N]+"\\\\)$"),z=new RegExp("^rgb\\\\("+[A,A,A]+"\\\\)$"),_=new RegExp("^rgba\\\\("+[N,N,N,R]+"\\\\)$"),P=new RegExp("^rgba\\\\("+[A,A,A,R]+"\\\\)$"),C=new RegExp("^hsl\\\\("+[R,A,A]+"\\\\)$"),I=new RegExp("^hsla\\\\("+[R,A,A,R]+"\\\\)$"),L={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function V(){return this.rgb().formatHex()}function D(){return this.rgb().formatRgb()}function F(t){var r,e;return t=(t+"").trim().toLowerCase(),(r=O.exec(t))?(e=r[1].length,r=parseInt(r[1],16),6===e?T(r):3===e?new $(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===e?new $(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===e?new $(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=j.exec(t))?new $(r[1],r[2],r[3],1):(r=z.exec(t))?new $(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=_.exec(t))?q(r[1],r[2],r[3],r[4]):(r=P.exec(t))?q(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=C.exec(t))?Q(r[1],r[2]/100,r[3]/100,1):(r=I.exec(t))?Q(r[1],r[2]/100,r[3]/100,r[4]):L.hasOwnProperty(t)?T(L[t]):"transparent"===t?new $(NaN,NaN,NaN,0):null}function T(t){return new $(t>>16&255,t>>8&255,255&t,1)}function q(t,r,e,n){return n<=0&&(t=r=e=NaN),new $(t,r,e,n)}function U(t,r,e,n){return 1===arguments.length?((i=t)instanceof k||(i=F(i)),i?new $((i=i.rgb()).r,i.g,i.b,i.opacity):new $):new $(t,r,e,null==n?1:n);var i}function $(t,r,e,n){this.r=+t,this.g=+r,this.b=+e,this.opacity=+n}function G(){return"#"+K(this.r)+K(this.g)+K(this.b)}function H(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function K(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Q(t,r,e,n){return n<=0?t=r=e=NaN:e<=0||e>=1?t=r=NaN:r<=0&&(t=NaN),new W(t,r,e,n)}function X(t){if(t instanceof W)return new W(t.h,t.s,t.l,t.opacity);if(t instanceof k||(t=F(t)),!t)return new W;if(t instanceof W)return t;var r=(t=t.rgb()).r/255,e=t.g/255,n=t.b/255,i=Math.min(r,e,n),o=Math.max(r,e,n),s=NaN,a=o-i,u=(o+i)/2;return a?(s=r===o?(e-n)/a+6*(e<n):e===o?(n-r)/a+2:(r-e)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new W(s,a,u,t.opacity)}function W(t,r,e,n){this.h=+t,this.s=+r,this.l=+e,this.opacity=+n}function Z(t,r,e){return 255*(t<60?r+(e-r)*t/60:t<180?e:t<240?r+(e-r)*(240-t)/60:r)}function Y(t,r,e,n,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*r+(4-6*o+3*s)*e+(1+3*t+3*o-3*s)*n+s*i)/6}S(k,F,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:V,formatHex:V,formatHsl:function(){return X(this).formatHsl()},formatRgb:D,toString:D}),S($,U,E(k,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new $(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new $(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:G,formatHex:G,formatRgb:H,toString:H})),S(W,function(t,r,e,n){return 1===arguments.length?X(t):new W(t,r,e,null==n?1:n)},E(k,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new W(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new W(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),r=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*r,i=2*e-n;return new $(Z(t>=240?t-240:t+120,i,n),Z(t,i,n),Z(t<120?t+240:t-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var B=function(t){return function(){return t}};function J(t,r){return function(e){return t+e*r}}function tt(t){return 1==(t=+t)?rt:function(r,e){return e-r?function(t,r,e){return t=Math.pow(t,e),r=Math.pow(r,e)-t,e=1/e,function(n){return Math.pow(t+n*r,e)}}(r,e,t):B(isNaN(r)?e:r)}}function rt(t,r){var e=r-t;return e?J(t,e):B(isNaN(t)?r:t)}var et=function t(r){var e=tt(r);function n(t,r){var n=e((t=U(t)).r,(r=U(r)).r),i=e(t.g,r.g),o=e(t.b,r.b),s=rt(t.opacity,r.opacity);return function(r){return t.r=n(r),t.g=i(r),t.b=o(r),t.opacity=s(r),t+""}}return n.gamma=t,n}(1);function nt(t){return function(r){var e,n,i=r.length,o=new Array(i),s=new Array(i),a=new Array(i);for(e=0;e<i;++e)n=U(r[e]),o[e]=n.r||0,s[e]=n.g||0,a[e]=n.b||0;return o=t(o),s=t(s),a=t(a),n.opacity=1,function(t){return n.r=o(t),n.g=s(t),n.b=a(t),n+""}}}nt(function(t){var r=t.length-1;return function(e){var n=e<=0?e=0:e>=1?(e=1,r-1):Math.floor(e*r),i=t[n],o=t[n+1],s=n>0?t[n-1]:2*i-o,a=n<r-1?t[n+2]:2*o-i;return Y((e-n/r)*r,s,i,o,a)}}),nt(function(t){var r=t.length;return function(e){var n=Math.floor(((e%=1)<0?++e:e)*r),i=t[(n+r-1)%r],o=t[n%r],s=t[(n+1)%r],a=t[(n+2)%r];return Y((e-n/r)*r,i,o,s,a)}});var it=function(t,r){return r-=t=+t,function(e){return t+r*e}},ot=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,st=new RegExp(ot.source,"g");var at=function(t,r){var e,n=typeof r;return null==r||"boolean"===n?B(r):("number"===n?it:"string"===n?(e=F(r))?(r=e,et):function(t,r){var e,n,i,o=ot.lastIndex=st.lastIndex=0,s=-1,a=[],u=[];for(t+="",r+="";(e=ot.exec(t))&&(n=st.exec(r));)(i=n.index)>o&&(i=r.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(e=e[0])===(n=n[0])?a[s]?a[s]+=n:a[++s]=n:(a[++s]=null,u.push({i:s,x:it(e,n)})),o=st.lastIndex;return o<r.length&&(i=r.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?u[0]?function(t){return function(r){return t(r)+""}}(u[0].x):function(t){return function(){return t}}(r):(r=u.length,function(t){for(var e,n=0;n<r;++n)a[(e=u[n]).i]=e.x(t);return a.join("")})}:r instanceof F?et:r instanceof Date?function(t,r){var e=new Date;return r-=t=+t,function(n){return e.setTime(t+r*n),e}}:Array.isArray(r)?function(t,r){var e,n=r?r.length:0,i=t?Math.min(n,t.length):0,o=new Array(i),s=new Array(n);for(e=0;e<i;++e)o[e]=at(t[e],r[e]);for(;e<n;++e)s[e]=r[e];return function(t){for(e=0;e<i;++e)s[e]=o[e](t);return s}}:"function"!=typeof r.valueOf&&"function"!=typeof r.toString||isNaN(r)?function(t,r){var e,n={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==r&&"object"==typeof r||(r={}),r)e in t?n[e]=at(t[e],r[e]):i[e]=r[e];return function(t){for(e in n)i[e]=n[e](t);return i}}:it)(t,r)},ut=function(t,r){return r-=t=+t,function(e){return Math.round(t+r*e)}},ht=function(t){return function(){return t}},ct=function(t){return+t},lt=[0,1];function ft(t){return t}function mt(t,r){return(r-=t=+t)?function(e){return(e-t)/r}:ht(isNaN(r)?NaN:.5)}function pt(t,r,e){var n=t[0],i=t[1],o=r[0],s=r[1];return i<n?(n=mt(i,n),o=e(s,o)):(n=mt(n,i),o=e(o,s)),function(t){return o(n(t))}}function gt(t,r,e){var n=Math.min(t.length,r.length)-1,i=new Array(n),o=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++s<n;)i[s]=mt(t[s],t[s+1]),o[s]=e(r[s],r[s+1]);return function(r){var e=M(t,r,1,n)-1;return o[e](i[e](r))}}function vt(){var t,r,e,n,i,o,s=lt,a=lt,u=at,h=ft;function c(){var t,r,e,u=Math.min(s.length,a.length);return h!==ft&&(t=s[0],r=s[u-1],t>r&&(e=t,t=r,r=e),h=function(e){return Math.max(t,Math.min(r,e))}),n=u>2?gt:pt,i=o=null,l}function l(r){return isNaN(r=+r)?e:(i||(i=n(s.map(t),a,u)))(t(h(r)))}return l.invert=function(e){return h(r((o||(o=n(a,s.map(t),it)))(e)))},l.domain=function(t){return arguments.length?(s=Array.from(t,ct),c()):s.slice()},l.range=function(t){return arguments.length?(a=Array.from(t),c()):a.slice()},l.rangeRound=function(t){return a=Array.from(t),u=ut,c()},l.clamp=function(t){return arguments.length?(h=!!t||ft,c()):h!==ft},l.interpolate=function(t){return arguments.length?(u=t,c()):u},l.unknown=function(t){return arguments.length?(e=t,l):e},function(e,n){return t=e,r=n,c()}}var dt=/^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;function wt(t){if(!(r=dt.exec(t)))throw new Error("invalid format: "+t);var r;return new yt({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function yt(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}wt.prototype=yt.prototype,yt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var bt,xt,Mt,St,Et=function(t,r){if((e=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var e,n=t.slice(0,e);return[n.length>1?n[0]+n.slice(2):n,+t.slice(e+1)]},kt=function(t){return(t=Et(Math.abs(t)))?t[1]:NaN},Nt=function(t){t:for(var r,e=t.length,n=1,i=-1;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":0===i&&(i=n),r=n;break;default:if(i>0){if(!+t[n])break t;i=0}}return i>0?t.slice(0,i)+t.slice(r+1):t},Rt=function(t,r){var e=Et(t,r);if(!e)return t+"";var n=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")},At={"%":function(t,r){return(100*t).toFixed(r)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,r){return t.toExponential(r)},f:function(t,r){return t.toFixed(r)},g:function(t,r){return t.toPrecision(r)},o:function(t){return Math.round(t).toString(8)},p:function(t,r){return Rt(100*t,r)},r:Rt,s:function(t,r){var e=Et(t,r);if(!e)return t+"";var n=e[0],i=e[1],o=i-(bt=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Et(t,Math.max(0,r+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Ot=function(t){return t},jt=Array.prototype.map,zt=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];xt=function(t){var r,e,n=void 0===t.grouping||void 0===t.thousands?Ot:(r=jt.call(t.grouping,Number),e=t.thousands+"",function(t,n){for(var i=t.length,o=[],s=0,a=r[0],u=0;i>0&&a>0&&(u+a+1>n&&(a=Math.max(1,n-u)),o.push(t.substring(i-=a,i+a)),!((u+=a+1)>n));)a=r[s=(s+1)%r.length];return o.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Ot:function(t){return function(r){return r.replace(/[0-9]/g,function(r){return t[+r]})}}(jt.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",h=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var r=(t=wt(t)).fill,e=t.align,l=t.sign,f=t.symbol,m=t.zero,p=t.width,g=t.comma,v=t.precision,d=t.trim,w=t.type;"n"===w?(g=!0,w="g"):At[w]||(void 0===v&&(v=12),d=!0,w="g"),(m||"0"===r&&"="===e)&&(m=!0,r="0",e="=");var y="$"===f?i:"#"===f&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",b="$"===f?o:/[%p]/.test(w)?u:"",x=At[w],M=/[defgprs%]/.test(w);function S(t){var i,o,u,f=y,S=b;if("c"===w)S=x(t)+S,t="";else{var E=(t=+t)<0;if(t=isNaN(t)?c:x(Math.abs(t),v),d&&(t=Nt(t)),E&&0==+t&&(E=!1),f=(E?"("===l?l:h:"-"===l||"("===l?"":l)+f,S=("s"===w?zt[8+bt/3]:"")+S+(E&&"("===l?")":""),M)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){S=(46===u?s+t.slice(i+1):t.slice(i))+S,t=t.slice(0,i);break}}g&&!m&&(t=n(t,1/0));var k=f.length+t.length+S.length,N=k<p?new Array(p-k+1).join(r):"";switch(g&&m&&(t=n(N+t,N.length?p-S.length:1/0),N=""),e){case"<":t=f+t+S+N;break;case"=":t=f+N+t+S;break;case"^":t=N.slice(0,k=N.length>>1)+f+t+S+N.slice(k);break;default:t=N+f+t+S}return a(t)}return v=void 0===v?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),S.toString=function(){return t+""},S}return{format:l,formatPrefix:function(t,r){var e=l(((t=wt(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(kt(r)/3))),i=Math.pow(10,-n),o=zt[8+n/3];return function(t){return e(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Mt=xt.format,St=xt.formatPrefix;var _t=function(t,r,e,n){var i,o=function(t,r,e){var n=Math.abs(r-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),o=n/i;return o>=m?i*=10:o>=p?i*=5:o>=g&&(i*=2),r<t?-i:i}(t,r,e);switch((n=wt(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(r));return null!=n.precision||isNaN(i=function(t,r){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(kt(r)/3)))-kt(Math.abs(t)))}(o,s))||(n.precision=i),St(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=function(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,kt(r)-kt(t))+1}(o,Math.max(Math.abs(t),Math.abs(r))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=function(t){return Math.max(0,-kt(Math.abs(t)))}(o))||(n.precision=i-2*("%"===n.type))}return Mt(n)};function Pt(){var t=vt()(ft,ft);return t.copy=function(){return r=t,Pt().domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown());var r},function(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t)}return this}.apply(t,arguments),function(t){var r=t.domain;return t.ticks=function(t){var e=r();return v(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var n=r();return _t(n[0],n[n.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var n,i=r(),o=0,s=i.length-1,a=i[o],u=i[s];return u<a&&(n=a,a=u,u=n,n=o,o=s,s=n),(n=d(a,u,e))>0?n=d(a=Math.floor(a/n)*n,u=Math.ceil(u/n)*n,e):n<0&&(n=d(a=Math.ceil(a*n)/n,u=Math.floor(u*n)/n,e)),n>0?(i[o]=Math.floor(a/n)*n,i[s]=Math.ceil(u/n)*n,r(i)):n<0&&(i[o]=Math.ceil(a*n)/n,i[s]=Math.floor(u*n)/n,r(i)),t},t}(t)}var Ct=e(10),It="EMBEDDER_INITIALIZED",Lt="COMPUTED_UMAP_N_EPOCHS",Vt="UMAP_ITERATIVE_COMPUTED_COORDINATES",Dt="UMAP_FINAL_COMPUTED_COORDINATES",Ft=[{opt:"nComponents",prop:"dimensions"},{opt:"nNeighbors",prop:"neighbors"},{opt:"minDist",prop:"minDist"},{opt:"spread",prop:"spread"},{opt:"random",prop:"random"}];function Tt(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,n)}return e}function qt(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?Tt(e,!0).forEach(function(r){h()(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Tt(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}function Ut(t){var r={};return Ft.forEach(function(e){var n=e.opt,i=e.prop;t[i]&&(r[n]=t[i])}),r}function $t(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,e=["x","y","z"].slice(0,r).reduce(function(r,e,n){var i,o,s;return r.push((i=t.map(function(t){return t[n]}),o=[Math.min.apply(Math,l()(i)),Math.max.apply(Math,l()(i))],s=Pt().domain(o).range([0,1]),i.map(function(t){return s(t)}))),r},[]),n=[];return t.forEach(function(t,i){return f(r).forEach(function(t){n.push(e[t][i])})}),n}function Gt(t,r,e){var n=new Ct.UMAP(Ut(r));return e({type:It,payload:qt({},Ut(r))}),{runComputation:function(){var o,s;return i.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(n.fitAsync(t));case 2:o=a.sent,s=new Float32Array($t(o,r.dimensions)),e({type:Dt,payload:{coordinates:s.buffer}},[s.buffer]);case 5:case"end":return a.stop()}})},runIterations:function(){var i=n.initializeFit(t);e({type:Lt,payload:{nEpochs:i}});for(var o=0;o<i;++o){n.step();var s=$t(n.getEmbedding(),r.dimensions),a=new Float32Array(s);e({type:o===i-1?Dt:Vt,payload:{coordinates:a.buffer,iteration:o}},[a.buffer])}}}}function Ht(t){var r,e,n,o,u,h,c,l,f,m,p,g;return i.a.async(function(v){for(;;)switch(v.prev=v.next){case 0:if(r=t.data.payload,e=r.data,n=r.debugLogs,o=r.exclude,u=r.include,h=r.iterate,c=s()(r,["data","debugLogs","exclude","include","iterate"]),l=n?console.log:function(){},e&&l("Received data payload of length ".concat(e.length,".")),f=a(e,{exclude:o,include:u}),m=Gt(f,c,postMessage),p=m.runComputation,g=m.runIterations,!h){v.next=9;break}g(),v.next=11;break;case 9:return v.next=11,i.a.awrap(p());case 11:case"end":return v.stop()}})}onmessage=function(){Ht.apply(void 0,arguments).catch(function(t){postMessage({type:"UMAP_ERROR",payload:{error:t.message}})})}},function(t,r,e){"use strict";function n(t,r,e){var n=0;const i=e(r);for(var o=0;o<t.x.length;o++)n+=Math.abs(t.y[o]-i(t.x[o]));return n}e.r(r);var i=e(0),o=e.n(i);var s=function(t){if(!o()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r};var a=function(t){if(!o()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r};var u=function(t){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==e.output){if(!o()(e.output))throw new TypeError("output option must be an array if specified");r=e.output}else r=new Array(t.length);var n=a(t),i=s(t);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var u=e.min,h=void 0===u?e.autoMinMax?n:0:u,c=e.max,l=void 0===c?e.autoMinMax?i:1:c;if(h>=l)throw new RangeError("min option must be smaller than max option");for(var f=(l-h)/(i-n),m=0;m<t.length;m++)r[m]=(t[m]-n)*f+h;return r};class h{constructor(t){var r,e,n,i,o,s,a,u,h,c=(t=C.checkMatrix(t)).clone(),l=c.rows,f=c.columns,m=new Array(l),p=1;for(r=0;r<l;r++)m[r]=r;for(u=new Array(l),e=0;e<f;e++){for(r=0;r<l;r++)u[r]=c.get(r,e);for(r=0;r<l;r++){for(h=Math.min(r,e),o=0,n=0;n<h;n++)o+=c.get(r,n)*u[n];u[r]-=o,c.set(r,e,u[r])}for(i=e,r=e+1;r<l;r++)Math.abs(u[r])>Math.abs(u[i])&&(i=r);if(i!==e){for(n=0;n<f;n++)s=c.get(i,n),c.set(i,n,c.get(e,n)),c.set(e,n,s);a=m[i],m[i]=m[e],m[e]=a,p=-p}if(e<l&&0!==c.get(e,e))for(r=e+1;r<l;r++)c.set(r,e,c.get(r,e)/c.get(e,e))}this.LU=c,this.pivotVector=m,this.pivotSign=p}isSingular(){for(var t=this.LU,r=t.columns,e=0;e<r;e++)if(0===t[e][e])return!0;return!1}solve(t){t=P.checkMatrix(t);var r=this.LU;if(r.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var e,n,i,o=t.columns,s=t.subMatrixRow(this.pivotVector,0,o-1),a=r.columns;for(i=0;i<a;i++)for(e=i+1;e<a;e++)for(n=0;n<o;n++)s[e][n]-=s[i][n]*r[e][i];for(i=a-1;i>=0;i--){for(n=0;n<o;n++)s[i][n]/=r[i][i];for(e=0;e<i;e++)for(n=0;n<o;n++)s[e][n]-=s[i][n]*r[e][i]}return s}get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var r=this.pivotSign,e=t.columns,n=0;n<e;n++)r*=t[n][n];return r}get lowerTriangularMatrix(){for(var t=this.LU,r=t.rows,e=t.columns,n=new P(r,e),i=0;i<r;i++)for(var o=0;o<e;o++)n[i][o]=i>o?t[i][o]:i===o?1:0;return n}get upperTriangularMatrix(){for(var t=this.LU,r=t.rows,e=t.columns,n=new P(r,e),i=0;i<r;i++)for(var o=0;o<e;o++)n[i][o]=i<=o?t[i][o]:0;return n}get pivotPermutationVector(){return this.pivotVector.slice()}}function c(t,r){var e=0;return Math.abs(t)>Math.abs(r)?(e=r/t,Math.abs(t)*Math.sqrt(1+e*e)):0!==r?(e=t/r,Math.abs(r)*Math.sqrt(1+e*e)):0}function l(t,r,e){for(var n=new Array(t),i=0;i<t;i++){n[i]=new Array(r);for(var o=0;o<r;o++)n[i][o]=e}return n}class f{constructor(t,r={}){var e=(t=C.checkMatrix(t)).rows,n=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=r;var a,u=Boolean(i),h=Boolean(o),f=!1;if(e<n)if(s){e=(a=t.transpose()).rows,n=a.columns,f=!0;var m=u;u=h,h=m}else a=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else a=t.clone();var p=Math.min(e,n),g=Math.min(e+1,n),v=new Array(g),d=l(e,p,0),w=l(n,n,0),y=new Array(n),b=new Array(e),x=new Array(g);for(let t=0;t<g;t++)x[t]=t;var M=Math.min(e-1,n),S=Math.max(0,Math.min(n-2,e)),E=Math.max(M,S);for(let t=0;t<E;t++){if(t<M){v[t]=0;for(let r=t;r<e;r++)v[t]=c(v[t],a[r][t]);if(0!==v[t]){a[t][t]<0&&(v[t]=-v[t]);for(let r=t;r<e;r++)a[r][t]/=v[t];a[t][t]+=1}v[t]=-v[t]}for(let r=t+1;r<n;r++){if(t<M&&0!==v[t]){let n=0;for(let i=t;i<e;i++)n+=a[i][t]*a[i][r];n=-n/a[t][t];for(let i=t;i<e;i++)a[i][r]+=n*a[i][t]}y[r]=a[t][r]}if(u&&t<M)for(let r=t;r<e;r++)d[r][t]=a[r][t];if(t<S){y[t]=0;for(let r=t+1;r<n;r++)y[t]=c(y[t],y[r]);if(0!==y[t]){y[t+1]<0&&(y[t]=0-y[t]);for(let r=t+1;r<n;r++)y[r]/=y[t];y[t+1]+=1}if(y[t]=-y[t],t+1<e&&0!==y[t]){for(let r=t+1;r<e;r++)b[r]=0;for(let r=t+1;r<e;r++)for(let e=t+1;e<n;e++)b[r]+=y[e]*a[r][e];for(let r=t+1;r<n;r++){let n=-y[r]/y[t+1];for(let i=t+1;i<e;i++)a[i][r]+=n*b[i]}}if(h)for(let r=t+1;r<n;r++)w[r][t]=y[r]}}let k=Math.min(n,e+1);if(M<n&&(v[M]=a[M][M]),e<k&&(v[k-1]=0),S+1<k&&(y[S]=a[S][k-1]),y[k-1]=0,u){for(let t=M;t<p;t++){for(let r=0;r<e;r++)d[r][t]=0;d[t][t]=1}for(let t=M-1;t>=0;t--)if(0!==v[t]){for(let r=t+1;r<p;r++){let n=0;for(let i=t;i<e;i++)n+=d[i][t]*d[i][r];n=-n/d[t][t];for(let i=t;i<e;i++)d[i][r]+=n*d[i][t]}for(let r=t;r<e;r++)d[r][t]=-d[r][t];d[t][t]=1+d[t][t];for(let r=0;r<t-1;r++)d[r][t]=0}else{for(let r=0;r<e;r++)d[r][t]=0;d[t][t]=1}}if(h)for(let t=n-1;t>=0;t--){if(t<S&&0!==y[t])for(let r=t+1;r<n;r++){let e=0;for(let i=t+1;i<n;i++)e+=w[i][t]*w[i][r];e=-e/w[t+1][t];for(let i=t+1;i<n;i++)w[i][r]+=e*w[i][t]}for(let r=0;r<n;r++)w[r][t]=0;w[t][t]=1}for(var N=k-1,R=Number.EPSILON;k>0;){let t,r;for(t=k-2;t>=-1&&-1!==t;t--){const r=Number.MIN_VALUE+R*Math.abs(v[t]+Math.abs(v[t+1]));if(Math.abs(y[t])<=r||Number.isNaN(y[t])){y[t]=0;break}}if(t===k-2)r=4;else{let e;for(e=k-1;e>=t&&e!==t;e--){let r=(e!==k?Math.abs(y[e]):0)+(e!==t+1?Math.abs(y[e-1]):0);if(Math.abs(v[e])<=R*r){v[e]=0;break}}e===t?r=3:e===k-1?r=1:(r=2,t=e)}switch(t++,r){case 1:{let r=y[k-2];y[k-2]=0;for(let e=k-2;e>=t;e--){let i=c(v[e],r),o=v[e]/i,s=r/i;if(v[e]=i,e!==t&&(r=-s*y[e-1],y[e-1]=o*y[e-1]),h)for(let t=0;t<n;t++)i=o*w[t][e]+s*w[t][k-1],w[t][k-1]=-s*w[t][e]+o*w[t][k-1],w[t][e]=i}break}case 2:{let r=y[t-1];y[t-1]=0;for(let n=t;n<k;n++){let i=c(v[n],r),o=v[n]/i,s=r/i;if(v[n]=i,r=-s*y[n],y[n]=o*y[n],u)for(let r=0;r<e;r++)i=o*d[r][n]+s*d[r][t-1],d[r][t-1]=-s*d[r][n]+o*d[r][t-1],d[r][n]=i}break}case 3:{const r=Math.max(Math.abs(v[k-1]),Math.abs(v[k-2]),Math.abs(y[k-2]),Math.abs(v[t]),Math.abs(y[t])),i=v[k-1]/r,o=v[k-2]/r,s=y[k-2]/r,a=v[t]/r,l=y[t]/r,f=((o+i)*(o-i)+s*s)/2,m=i*s*(i*s);let p=0;0===f&&0===m||(p=m/(f+(p=f<0?0-Math.sqrt(f*f+m):Math.sqrt(f*f+m))));let g=(a+i)*(a-i)+p,b=a*l;for(let r=t;r<k-1;r++){let i=c(g,b);0===i&&(i=Number.MIN_VALUE);let o=g/i,s=b/i;if(r!==t&&(y[r-1]=i),g=o*v[r]+s*y[r],y[r]=o*y[r]-s*v[r],b=s*v[r+1],v[r+1]=o*v[r+1],h)for(let t=0;t<n;t++)i=o*w[t][r]+s*w[t][r+1],w[t][r+1]=-s*w[t][r]+o*w[t][r+1],w[t][r]=i;if(0===(i=c(g,b))&&(i=Number.MIN_VALUE),o=g/i,s=b/i,v[r]=i,g=o*y[r]+s*v[r+1],v[r+1]=-s*y[r]+o*v[r+1],b=s*y[r+1],y[r+1]=o*y[r+1],u&&r<e-1)for(let t=0;t<e;t++)i=o*d[t][r]+s*d[t][r+1],d[t][r+1]=-s*d[t][r]+o*d[t][r+1],d[t][r]=i}y[k-2]=g,1;break}case 4:if(v[t]<=0&&(v[t]=v[t]<0?-v[t]:0,h))for(let r=0;r<=N;r++)w[r][t]=-w[r][t];for(;t<N&&!(v[t]>=v[t+1]);){let r=v[t];if(v[t]=v[t+1],v[t+1]=r,h&&t<n-1)for(let e=0;e<n;e++)r=w[e][t+1],w[e][t+1]=w[e][t],w[e][t]=r;if(u&&t<e-1)for(let n=0;n<e;n++)r=d[n][t+1],d[n][t+1]=d[n][t],d[n][t]=r;t++}0,k--}}if(f){var A=w;w=d,d=A}this.m=e,this.n=n,this.s=v,this.U=d,this.V=w}solve(t){var r=t,e=this.threshold,n=this.s.length,i=P.zeros(n,n);for(let t=0;t<n;t++)Math.abs(this.s[t])<=e?i[t][t]=0:i[t][t]=1/this.s[t];var o=this.U,s=this.rightSingularVectors,a=s.mmul(i),u=s.rows,h=o.length,c=P.zeros(u,h);for(let t=0;t<u;t++)for(let r=0;r<h;r++){let e=0;for(let i=0;i<n;i++)e+=a[t][i]*o[r][i];c[t][r]=e}return c.mmul(r)}solveForDiagonal(t){return this.solve(P.diag(t))}inverse(){var t=this.V,r=this.threshold,e=t.length,n=t[0].length,i=new P(e,this.s.length);for(let o=0;o<e;o++)for(let e=0;e<n;e++)Math.abs(this.s[e])>r?i[o][e]=t[o][e]/this.s[e]:i[o][e]=0;var o=this.U,s=o.length,a=o[0].length,u=new P(e,s);for(let t=0;t<e;t++)for(let r=0;r<s;r++){let e=0;for(let n=0;n<a;n++)e+=i[t][n]*o[r][n];u[t][r]=e}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,e=this.s,n=0,i=e.length;n<i;n++)e[n]>t&&r++;return r}get diagonal(){return this.s}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return P.isMatrix(this.U)||(this.U=new P(this.U)),this.U}get rightSingularVectors(){return P.isMatrix(this.V)||(this.V=new P(this.V)),this.V}get diagonalMatrix(){return P.diag(this.s)}}function m(t,r,e){var n=e?t.rows:t.rows-1;if(r<0||r>n)throw new RangeError("Row index out of range")}function p(t,r,e){var n=e?t.columns:t.columns-1;if(r<0||r>n)throw new RangeError("Column index out of range")}function g(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function v(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function d(t,r,e){return{row:w(t,r),column:y(t,e)}}function w(t,r){if("object"!=typeof r)throw new TypeError("unexpected type for row indices");if(r.some(r=>r<0||r>=t.rows))throw new RangeError("row indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function y(t,r){if("object"!=typeof r)throw new TypeError("unexpected type for column indices");if(r.some(r=>r<0||r>=t.columns))throw new RangeError("column indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function b(t,r,e,n,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(x("startRow",r),x("endRow",e),x("startColumn",n),x("endColumn",i),r>e||n>i||r<0||r>=t.rows||e<0||e>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function x(t,r){if("number"!=typeof r)throw new TypeError(`${t} must be a number`)}class M extends(_()){constructor(t,r,e){super(),this.matrix=t,this.rows=r,this.columns=e}static get[Symbol.species](){return P}}class S extends M{constructor(t){super(t,t.columns,t.rows)}set(t,r,e){return this.matrix.set(r,t,e),this}get(t,r){return this.matrix.get(r,t)}}class E extends M{constructor(t,r){super(t,1,t.columns),this.row=r}set(t,r,e){return this.matrix.set(this.row,r,e),this}get(t,r){return this.matrix.get(this.row,r)}}class k extends M{constructor(t,r,e,n,i){b(t,r,e,n,i),super(t,e-r+1,i-n+1),this.startRow=r,this.startColumn=n}set(t,r,e){return this.matrix.set(this.startRow+t,this.startColumn+r,e),this}get(t,r){return this.matrix.get(this.startRow+t,this.startColumn+r)}}class N extends M{constructor(t,r,e){var n=d(t,r,e);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,r,e){return this.matrix.set(this.rowIndices[t],this.columnIndices[r],e),this}get(t,r){return this.matrix.get(this.rowIndices[t],this.columnIndices[r])}}class R extends M{constructor(t,r){super(t,(r=w(t,r)).length,t.columns),this.rowIndices=r}set(t,r,e){return this.matrix.set(this.rowIndices[t],r,e),this}get(t,r){return this.matrix.get(this.rowIndices[t],r)}}class A extends M{constructor(t,r){r=y(t,r),super(t,t.rows,r.length),this.columnIndices=r}set(t,r,e){return this.matrix.set(t,this.columnIndices[r],e),this}get(t,r){return this.matrix.get(t,this.columnIndices[r])}}class O extends M{constructor(t,r){super(t,t.rows,1),this.column=r}set(t,r,e){return this.matrix.set(t,this.column,e),this}get(t){return this.matrix.get(t,this.column)}}class j extends M{constructor(t){super(t,t.rows,t.columns)}set(t,r,e){return this.matrix.set(this.rows-t-1,r,e),this}get(t,r){return this.matrix.get(this.rows-t-1,r)}}class z extends M{constructor(t){super(t,t.rows,t.columns)}set(t,r,e){return this.matrix.set(t,this.columns-r-1,e),this}get(t,r){return this.matrix.get(t,this.columns-r-1)}}function _(t){void 0===t&&(t=Object);class r extends t{static get[Symbol.species](){return this}static from1DArray(t,r,e){if(t*r!==e.length)throw new RangeError("Data length does not match given dimensions");for(var n=new this(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)n.set(i,o,e[i*r+o]);return n}static rowVector(t){for(var r=new this(1,t.length),e=0;e<t.length;e++)r.set(0,e,t[e]);return r}static columnVector(t){for(var r=new this(t.length,1),e=0;e<t.length;e++)r.set(e,0,t[e]);return r}static empty(t,r){return new this(t,r)}static zeros(t,r){return this.empty(t,r).fill(0)}static ones(t,r){return this.empty(t,r).fill(1)}static rand(t,r,e){void 0===e&&(e=Math.random);for(var n=this.empty(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)n.set(i,o,e());return n}static randInt(t,r,e,n){void 0===e&&(e=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,r),o=0;o<t;o++)for(var s=0;s<r;s++){var a=Math.floor(n()*e);i.set(o,s,a)}return i}static eye(t,r,e){void 0===r&&(r=t),void 0===e&&(e=1);for(var n=Math.min(t,r),i=this.zeros(t,r),o=0;o<n;o++)i.set(o,o,e);return i}static diag(t,r,e){var n=t.length;void 0===r&&(r=n),void 0===e&&(e=r);for(var i=Math.min(n,r,e),o=this.zeros(r,e),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var e=t.rows,n=t.columns,i=new this(e,n),o=0;o<e;o++)for(var s=0;s<n;s++)i.set(o,s,Math.min(t.get(o,s),r.get(o,s)));return i}static max(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var e=t.rows,n=t.columns,i=new this(e,n),o=0;o<e;o++)for(var s=0;s<n;s++)i.set(o,s,Math.max(t.get(o,s),r.get(o,s)));return i}static checkMatrix(t){return r.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var r=this.rows,e=this.columns,n=0;n<r;n++)for(var i=0;i<e;i++)t.call(this,n,i);return this}to1DArray(){for(var t=new Array(this.size),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t[r*this.columns+e]=this.get(r,e);return t}to2DArray(){for(var t=new Array(this.rows),r=0;r<this.rows;r++){t[r]=new Array(this.columns);for(var e=0;e<this.columns;e++)t[r][e]=this.get(r,e)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}isEchelonForm(){let t=0,r=0,e=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(r=0,i=!1;r<this.columns&&!1===i;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(i=!0,e=r):(n=!1,i=!0);t++}return n}isReducedEchelonForm(){let t=0,r=0,e=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(r=0,i=!1;r<this.columns&&!1===i;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(i=!0,e=r):(n=!1,i=!0);for(let e=r+1;e<this.rows;e++)0!==this.get(t,e)&&(n=!1);t++}return n}set(t,r,e){throw new Error("set method is unimplemented")}get(t,r){throw new Error("get method is unimplemented")}repeat(t,r){t=t||1,r=r||1;for(var e=new this.constructor[Symbol.species](this.rows*t,this.columns*r),n=0;n<t;n++)for(var i=0;i<r;i++)e.setSubMatrix(this,this.rows*n,this.columns*i);return e}fill(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,t);return this}neg(){return this.mulS(-1)}getRow(t){m(this,t);for(var r=new Array(this.columns),e=0;e<this.columns;e++)r[e]=this.get(t,e);return r}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,r){m(this,t),r=g(this,r);for(var e=0;e<this.columns;e++)this.set(t,e,r[e]);return this}swapRows(t,r){m(this,t),m(this,r);for(var e=0;e<this.columns;e++){var n=this.get(t,e);this.set(t,e,this.get(r,e)),this.set(r,e,n)}return this}getColumn(t){p(this,t);for(var r=new Array(this.rows),e=0;e<this.rows;e++)r[e]=this.get(e,t);return r}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,r){p(this,t),r=v(this,r);for(var e=0;e<this.rows;e++)this.set(e,t,r[e]);return this}swapColumns(t,r){p(this,t),p(this,r);for(var e=0;e<this.rows;e++){var n=this.get(e,t);this.set(e,t,this.get(e,r)),this.set(e,r,n)}return this}addRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)+t[e]);return this}subRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)-t[e]);return this}mulRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*t[e]);return this}divRowVector(t){t=g(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)/t[e]);return this}addColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)+t[r]);return this}subColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)-t[r]);return this}mulColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*t[r]);return this}divColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)/t[r]);return this}mulRow(t,r){m(this,t);for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)*r);return this}mulColumn(t,r){p(this,t);for(var e=0;e<this.rows;e++)this.set(e,t,this.get(e,t)*r);return this}max(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.get(r,e)>t&&(t=this.get(r,e));return t}maxIndex(){for(var t=this.get(0,0),r=[0,0],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n),r[0]=e,r[1]=n);return r}min(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.get(r,e)<t&&(t=this.get(r,e));return t}minIndex(){for(var t=this.get(0,0),r=[0,0],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n),r[0]=e,r[1]=n);return r}maxRow(t){m(this,t);for(var r=this.get(t,0),e=1;e<this.columns;e++)this.get(t,e)>r&&(r=this.get(t,e));return r}maxRowIndex(t){m(this,t);for(var r=this.get(t,0),e=[t,0],n=1;n<this.columns;n++)this.get(t,n)>r&&(r=this.get(t,n),e[1]=n);return e}minRow(t){m(this,t);for(var r=this.get(t,0),e=1;e<this.columns;e++)this.get(t,e)<r&&(r=this.get(t,e));return r}minRowIndex(t){m(this,t);for(var r=this.get(t,0),e=[t,0],n=1;n<this.columns;n++)this.get(t,n)<r&&(r=this.get(t,n),e[1]=n);return e}maxColumn(t){p(this,t);for(var r=this.get(0,t),e=1;e<this.rows;e++)this.get(e,t)>r&&(r=this.get(e,t));return r}maxColumnIndex(t){p(this,t);for(var r=this.get(0,t),e=[0,t],n=1;n<this.rows;n++)this.get(n,t)>r&&(r=this.get(n,t),e[0]=n);return e}minColumn(t){p(this,t);for(var r=this.get(0,t),e=1;e<this.rows;e++)this.get(e,t)<r&&(r=this.get(e,t));return r}minColumnIndex(t){p(this,t);for(var r=this.get(0,t),e=[0,t],n=1;n<this.rows;n++)this.get(n,t)<r&&(r=this.get(n,t),e[0]=n);return e}diag(){for(var t=Math.min(this.rows,this.columns),r=new Array(t),e=0;e<t;e++)r[e]=this.get(e,e);return r}sum(t){switch(t){case"row":return function(t){for(var r=P.zeros(t.rows,1),e=0;e<t.rows;++e)for(var n=0;n<t.columns;++n)r.set(e,0,r.get(e,0)+t.get(e,n));return r}(this);case"column":return function(t){for(var r=P.zeros(1,t.columns),e=0;e<t.rows;++e)for(var n=0;n<t.columns;++n)r.set(0,n,r.get(0,n)+t.get(e,n));return r}(this);default:return function(t){for(var r=0,e=0;e<t.rows;e++)for(var n=0;n<t.columns;n++)r+=t.get(e,n);return r}(this)}}mean(){return this.sum()/this.size}prod(){for(var t=1,r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t*=this.get(r,e);return t}norm(t="frobenius"){var r=0;if("max"===t)return this.max();if("frobenius"===t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)r+=this.get(e,n)*this.get(e,n);return Math.sqrt(r)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){for(var t=0,r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t+=this.get(r,e),this.set(r,e,t);return this}dot(t){r.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,i=0;i<e.length;i++)n+=e[i]*t[i];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var r=this.rows,e=this.columns,n=t.columns,i=new this.constructor[Symbol.species](r,n),o=new Array(e),s=0;s<n;s++){for(var a=0;a<e;a++)o[a]=t.get(a,s);for(var u=0;u<r;u++){var h=0;for(a=0;a<e;a++)h+=this.get(u,a)*o[a];i.set(u,s,h)}}return i}strassen2x2(t){var r=new this.constructor[Symbol.species](2,2);const e=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),h=t.get(1,1),c=(e+u)*(n+h),l=(s+u)*n,f=e*(o-h),m=u*(a-n),p=(e+i)*h,g=c+m-p+(i-u)*(a+h),v=f+p,d=l+m,w=c-l+f+(s-e)*(n+o);return r.set(0,0,g),r.set(0,1,v),r.set(1,0,d),r.set(1,1,w),r}strassen3x3(t){var r=new this.constructor[Symbol.species](3,3);const e=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),h=this.get(2,1),c=this.get(2,2),l=t.get(0,0),f=t.get(0,1),m=t.get(0,2),p=t.get(1,0),g=t.get(1,1),v=t.get(1,2),d=t.get(2,0),w=t.get(2,1),y=t.get(2,2),b=(e-o)*(-f+g),x=(-e+o+s)*(l-f+g),M=(o+s)*(-l+f),S=e*l,E=(-e+u+h)*(l-m+v),k=(-e+u)*(m-v),N=(u+h)*(-l+m),R=(-i+h+c)*(g+d-w),A=(i-c)*(g-w),O=i*d,j=(h+c)*(-d+w),z=(-i+s+a)*(v+d-y),_=(i-a)*(v-y),P=(s+a)*(-d+y),C=S+O+n*p,I=(e+n+i-o-s-h-c)*g+x+M+S+R+O+j,L=S+E+N+(e+n+i-s-a-u-h)*v+O+z+P,V=b+s*(-l+f+p-g-v-d+y)+x+S+O+z+_,D=b+x+M+S+a*w,F=O+z+_+P+o*m,T=S+E+k+h*(-l+m+p-g-v-d+w)+R+A+O,q=R+A+O+j+u*f,U=S+E+k+N+c*y;return r.set(0,0,C),r.set(0,1,I),r.set(0,2,L),r.set(1,0,V),r.set(1,1,D),r.set(1,2,F),r.set(2,0,T),r.set(2,1,q),r.set(2,2,U),r}mmulStrassen(t){var e=this.clone(),n=e.rows,i=e.columns,o=t.rows,s=t.columns;function a(t,e,n){var i=t.rows,o=t.columns;if(i===e&&o===n)return t;var s=r.zeros(e,n);return s=s.setSubMatrix(t,0,0)}i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var u=Math.max(n,o),h=Math.max(i,s);return function t(e,n,i,o){if(i<=512||o<=512)return e.mmul(n);i%2==1&&o%2==1?(e=a(e,i+1,o+1),n=a(n,i+1,o+1)):i%2==1?(e=a(e,i+1,o),n=a(n,i+1,o)):o%2==1&&(e=a(e,i,o+1),n=a(n,i,o+1));var s=parseInt(e.rows/2,10),u=parseInt(e.columns/2,10),h=e.subMatrix(0,s-1,0,u-1),c=n.subMatrix(0,s-1,0,u-1),l=e.subMatrix(0,s-1,u,e.columns-1),f=n.subMatrix(0,s-1,u,n.columns-1),m=e.subMatrix(s,e.rows-1,0,u-1),p=n.subMatrix(s,n.rows-1,0,u-1),g=e.subMatrix(s,e.rows-1,u,e.columns-1),v=n.subMatrix(s,n.rows-1,u,n.columns-1),d=t(r.add(h,g),r.add(c,v),s,u),w=t(r.add(m,g),c,s,u),y=t(h,r.sub(f,v),s,u),b=t(g,r.sub(p,c),s,u),x=t(r.add(h,l),v,s,u),M=t(r.sub(m,h),r.add(c,f),s,u),S=t(r.sub(l,g),r.add(p,v),s,u),E=r.add(d,b);E.sub(x),E.add(S);var k=r.add(y,x),N=r.add(w,b),R=r.sub(d,w);R.add(y),R.add(M);var A=r.zeros(2*E.rows,2*E.columns);return(A=(A=(A=(A=A.setSubMatrix(E,0,0)).setSubMatrix(k,E.rows,0)).setSubMatrix(N,0,E.columns)).setSubMatrix(R,E.rows,E.columns)).subMatrix(0,i-1,0,o-1)}(e=a(e,u,h),t=a(t,u,h),u,h)}scaleRows(t,r){if((t=void 0===t?0:t)>=(r=void 0===r?1:r))throw new RangeError("min should be strictly smaller than max");for(var e=this.constructor.empty(this.rows,this.columns),n=0;n<this.rows;n++){var i=u(this.getRow(n),{min:t,max:r});e.setRow(n,i)}return e}scaleColumns(t,r){if((t=void 0===t?0:t)>=(r=void 0===r?1:r))throw new RangeError("min should be strictly smaller than max");for(var e=this.constructor.empty(this.rows,this.columns),n=0;n<this.columns;n++){var i=u(this.getColumn(n),{min:t,max:r});e.setColumn(n,i)}return e}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var r=this.rows,e=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](r*n,e*i),s=0;s<r;s++)for(var a=0;a<e;a++)for(var u=0;u<n;u++)for(var h=0;h<i;h++)o[n*s+u][i*a+h]=this.get(s,a)*t.get(u,h);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.set(e,r,this.get(r,e));return t}sortRows(t){void 0===t&&(t=e);for(var r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(t));return this}sortColumns(t){void 0===t&&(t=e);for(var r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(t));return this}subMatrix(t,r,e,n){b(this,t,r,e,n);for(var i=new this.constructor[Symbol.species](r-t+1,n-e+1),o=t;o<=r;o++)for(var s=e;s<=n;s++)i[o-t][s-e]=this.get(o,s);return i}subMatrixRow(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.columns-1),r>e||r<0||r>=this.columns||e<0||e>=this.columns)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](t.length,e-r+1),i=0;i<t.length;i++)for(var o=r;o<=e;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);n.set(i,o-r,this.get(t[i],o))}return n}subMatrixColumn(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.rows-1),r>e||r<0||r>=this.rows||e<0||e>=this.rows)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](e-r+1,t.length),i=0;i<t.length;i++)for(var o=r;o<=e;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);n.set(o-r,i,this.get(o,t[i]))}return n}setSubMatrix(t,r,e){b(this,r,r+(t=this.constructor.checkMatrix(t)).rows-1,e,e+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[r+n][e+i]=t.get(n,i);return this}selection(t,r){for(var e=d(this,t,r),n=new this.constructor[Symbol.species](t.length,r.length),i=0;i<e.row.length;i++)for(var o=e.row[i],s=0;s<e.column.length;s++){var a=e.column[s];n[i][s]=this.get(o,a)}return n}trace(){for(var t=Math.min(this.rows,this.columns),r=0,e=0;e<t;e++)r+=this.get(e,e);return r}transposeView(){return new S(this)}rowView(t){return m(this,t),new E(this,t)}columnView(t){return p(this,t),new O(this,t)}flipRowView(){return new j(this)}flipColumnView(){return new z(this)}subMatrixView(t,r,e,n){return new k(this,t,r,e,n)}selectionView(t,r){return new N(this,t,r)}rowSelectionView(t){return new R(this,t)}columnSelectionView(t){return new A(this,t)}det(){var t,r,e,n,i,o;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),r=this.get(0,1),e=this.get(1,0),t*this.get(1,1)-r*e):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),o=this.selectionView([1,2],[0,1]),t=this.get(0,0),r=this.get(0,1),e=this.get(0,2),t*n.det()-r*i.det()+e*o.det()):new h(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=Number.EPSILON);for(var r=new f(this,{autoTranspose:!0}),e=r.leftSingularVectors,n=r.rightSingularVectors,i=r.diagonal,o=0;o<i.length;o++)Math.abs(i[o])>t?i[o]=1/i[o]:i[o]=0;return i=this.constructor[Symbol.species].diag(i),n.mmul(i.mmul(e.transposeView()))}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.set(r,e,this.get(r,e));return t}}function e(t,r){return t-r}r.prototype.klass="Matrix",r.random=r.rand,r.diagonal=r.diag,r.prototype.diagonal=r.prototype.diag,r.identity=r.eye,r.prototype.negate=r.prototype.neg,r.prototype.tensorProduct=r.prototype.kroneckerProduct,r.prototype.determinant=r.prototype.det;var n,i="\\n(function %name%(matrix, %args%) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(%args%);\\n})\\n",o=eval;for(var s of[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]]){var a=o($("\\n(function %name%(value) {\\n    if (typeof value === \'number\') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n",{name:s[1],op:s[0]})),c=o($("\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% value);\\n        }\\n    }\\n    return this;\\n})\\n",{name:`${s[1]}S`,op:s[0]})),l=o($("\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    if (this.rows !== matrix.rows ||\\n        this.columns !== matrix.columns) {\\n        throw new RangeError(\'Matrices dimensions must be equal\');\\n    }\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\\n        }\\n    }\\n    return this;\\n})\\n",{name:`${s[1]}M`,op:s[0]})),w=o($("\\n(function %name%(matrix, value) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(value);\\n})\\n",{name:s[1]}));for(n=1;n<s.length;n++)r.prototype[s[n]]=a,r.prototype[`${s[n]}S`]=c,r.prototype[`${s[n]}M`]=l,r[s[n]]=w}var y=[["~","not"]];for(var x of(["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){y.push([`Math.${t}`,t])}),y)){var M=o($("\\n(function %name%() {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n",{name:x[1],method:x[0]})),_=o($("\\n(function %name%(matrix) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%();\\n})\\n",{name:x[1]}));for(n=1;n<x.length;n++)r.prototype[x[n]]=M,r[x[n]]=_}for(var C of[["Math.pow",1,"pow"]]){var I="arg0";for(n=1;n<C[1];n++)I+=`, arg${n}`;if(1!==C[1]){var L=o($("\\n(function %name%(%args%) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), %args%));\\n        }\\n    }\\n    return this;\\n})\\n",{name:C[2],method:C[0],args:I})),V=o($(i,{name:C[2],args:I}));for(n=2;n<C.length;n++)r.prototype[C[n]]=L,r[C[n]]=V}else{var D={name:C[2],args:I,method:C[0]},F=o($("\\n(function %name%(value) {\\n    if (typeof value === \'number\') return this.%name%S(value);\\n    return this.%name%M(value);\\n})\\n",D)),T=o($("\\n(function %name%S(value) {\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), value));\\n        }\\n    }\\n    return this;\\n})\\n",D)),q=o($("\\n(function %name%M(matrix) {\\n    matrix = this.constructor.checkMatrix(matrix);\\n    if (this.rows !== matrix.rows ||\\n        this.columns !== matrix.columns) {\\n        throw new RangeError(\'Matrices dimensions must be equal\');\\n    }\\n    for (var i = 0; i < this.rows; i++) {\\n        for (var j = 0; j < this.columns; j++) {\\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\\n        }\\n    }\\n    return this;\\n})\\n",D)),U=o($("\\n(function %name%(matrix, %args%) {\\n    var newMatrix = new this[Symbol.species](matrix);\\n    return newMatrix.%name%(%args%);\\n})\\n",D));for(n=2;n<C.length;n++)r.prototype[C[n]]=F,r.prototype[`${C[n]}M`]=q,r.prototype[`${C[n]}S`]=T,r[C[n]]=U}}function $(t,r){for(var e in r)t=t.replace(new RegExp(`%${e}%`,"g"),r[e]);return t}return r}class P extends(_(Array)){constructor(t,r){var e;if(1===arguments.length&&"number"==typeof t)return new Array(t);if(P.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>0){if(super(t),!(Number.isInteger(r)&&r>0))throw new TypeError("nColumns must be a positive integer");for(e=0;e<t;e++)this[e]=new Array(r)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if(t=n.length,"number"!=typeof(r=n[0].length)||0===r)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),e=0;e<t;e++){if(n[e].length!==r)throw new RangeError("Inconsistent array dimensions");this[e]=[].concat(n[e])}}}return this.rows=t,this.columns=r,this}set(t,r,e){return this[t][r]=e,this}get(t,r){return this[t][r]}removeRow(t){if(m(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,r){return void 0===r&&(r=t,t=this.rows),m(this,t,!0),r=g(this,r),this.splice(t,0,r),this.rows+=1,this}removeColumn(t){if(p(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var r=0;r<this.rows;r++)this[r].splice(t,1);return this.columns-=1,this}addColumn(t,r){void 0===r&&(r=t,t=this.columns),p(this,t,!0),r=v(this,r);for(var e=0;e<this.rows;e++)this[e].splice(t,0,r[e]);return this.columns+=1,this}}class C extends(_()){constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,r,e){return this.data[t][r]=e,this}get(t,r){return this.data[t][r]}static get[Symbol.species](){return P}}class I{constructor(t){var r,e,n,i,o=(t=C.checkMatrix(t)).clone(),s=t.rows,a=t.columns,u=new Array(a);for(n=0;n<a;n++){var h=0;for(r=n;r<s;r++)h=c(h,o.get(r,n));if(0!==h){for(o.get(n,n)<0&&(h=-h),r=n;r<s;r++)o.set(r,n,o.get(r,n)/h);for(o.set(n,n,o.get(n,n)+1),e=n+1;e<a;e++){for(i=0,r=n;r<s;r++)i+=o.get(r,n)*o.get(r,e);for(i=-i/o.get(n,n),r=n;r<s;r++)o.set(r,e,o.get(r,e)+i*o.get(r,n))}}u[n]=-h}this.QR=o,this.Rdiag=u}solve(t){t=P.checkMatrix(t);var r=this.QR,e=r.rows;if(t.rows!==e)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var n,i,o,s,a=t.columns,u=t.clone(),h=r.columns;for(o=0;o<h;o++)for(i=0;i<a;i++){for(s=0,n=o;n<e;n++)s+=r[n][o]*u[n][i];for(s=-s/r[o][o],n=o;n<e;n++)u[n][i]+=s*r[n][o]}for(o=h-1;o>=0;o--){for(i=0;i<a;i++)u[o][i]/=this.Rdiag[o];for(n=0;n<o;n++)for(i=0;i<a;i++)u[n][i]-=u[o][i]*r[n][o]}return u.subMatrix(0,h-1,0,a-1)}isFullRank(){for(var t=this.QR.columns,r=0;r<t;r++)if(0===this.Rdiag[r])return!1;return!0}get upperTriangularMatrix(){var t,r,e=this.QR,n=e.columns,i=new P(n,n);for(t=0;t<n;t++)for(r=0;r<n;r++)i[t][r]=t<r?e[t][r]:t===r?this.Rdiag[t]:0;return i}get orthogonalMatrix(){var t,r,e,n,i=this.QR,o=i.rows,s=i.columns,a=new P(o,s);for(e=s-1;e>=0;e--){for(t=0;t<o;t++)a[t][e]=0;for(a[e][e]=1,r=e;r<s;r++)if(0!==i[e][e]){for(n=0,t=e;t<o;t++)n+=i[t][e]*a[t][r];for(n=-n/i[e][e],t=e;t<o;t++)a[t][r]+=n*i[t][e]}}return a}}function L(t,r=!1){return t=C.checkMatrix(t),r?new f(t).inverse():function(t,r,e=!1){return t=C.checkMatrix(t),r=C.checkMatrix(r),e?new f(t).solve(r):t.isSquare()?new h(t).solve(r):new I(t).solve(r)}(t,P.eye(t.rows))}function V(t,r,e,n,i){var o=e*n*n,s=P.eye(r.length,r.length,o);const a=i(r);var u=t.x.map(t=>a(t)),h=function(t,r,e,n,i){const o=e.length,s=t.x.length;for(var a=new Array(o),u=0;u<o;u++){a[u]=new Array(s);var h=e.concat();h[u]+=n;for(var c=i(h),l=0;l<s;l++)a[u][l]=r[l]-c(t.x[l])}return new P(a)}(t,u,r,n,i),c=function(t,r){const e=t.x.length;for(var n=new Array(e),i=0;i<e;i++)n[i]=[t.y[i]-r[i]];return new P(n)}(t,u),l=L(s.add(h.mmul(h.transpose())));return(r=(r=new P([r])).sub(l.mmul(h).mmul(c).mul(n).transpose())).to1DArray()}function D(t,r,e={}){let{maxIterations:i=100,gradientDifference:o=.1,damping:s=0,errorTolerance:a=.01,minValues:u,maxValues:h,initialValues:c}=e;if(s<=0)throw new Error("The damping option must be a positive number");if(!t.x||!t.y)throw new Error("The data parameter must have x and y elements");if(!Array.isArray(t.x)||t.x.length<2||!Array.isArray(t.y)||t.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(t.x.length!==t.y.length)throw new Error("The data parameter elements must have the same size");var l=c||new Array(r.length).fill(1);let f=l.length;if(h=h||new Array(f).fill(Number.MAX_SAFE_INTEGER),u=u||new Array(f).fill(Number.MIN_SAFE_INTEGER),h.length!==u.length)throw new Error("minValues and maxValues must be the same size");if(!Array.isArray(l))throw new Error("initialValues must be an array");for(var m=n(t,l,r),p=m<=a,g=0;g<i&&!p;g++){l=V(t,l,s,o,r);for(let t=0;t<f;t++)l[t]=Math.min(Math.max(u[t],l[t]),h[t]);if(m=n(t,l,r),isNaN(m))break;p=m<=a}return{parameterValues:l,parameterError:m,iterations:g}}e.d(r,"default",function(){return D})}]);\n//# sourceMappingURL=a8de8a13e6c4f521ca7d.worker.js.map',null)}},function(t,r){t.exports=function(t){if(Array.isArray(t))return t}},function(t,r){t.exports=function(t,r){var e=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(e.push(a.value),!r||e.length!==r);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return e}},function(t,r){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,r,e){var n=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,r,e,n){var i=r&&r.prototype instanceof p?r:p,o=Object.create(i.prototype),a=new O(n||[]);return o._invoke=function(t,r,e){var n=h;return function(i,o){if(n===f)throw new Error("Generator is already running");if(n===m){if("throw"===i)throw o;return R()}for(e.method=i,e.arg=o;;){var a=e.delegate;if(a){var s=k(a,e);if(s){if(s===g)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===h)throw n=m,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=f;var u=c(t,r,e);if("normal"===u.type){if(n=e.done?m:l,u.arg===g)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=m,e.method="throw",e.arg=u.arg)}}}(t,e,a),o}function c(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h="suspendedStart",l="suspendedYield",f="executing",m="completed",g={};function p(){}function v(){}function d(){}var w={};w[o]=function(){return this};var y=Object.getPrototypeOf,b=y&&y(y(j([])));b&&b!==e&&n.call(b,o)&&(w=b);var M=d.prototype=p.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(r){t[r]=function(t){return this._invoke(r,t)}}))}function S(t){var r;this._invoke=function(e,i){function o(){return new Promise((function(r,o){!function r(e,i,o,a){var s=c(t[e],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?Promise.resolve(h.__await).then((function(t){r("next",t,o,a)}),(function(t){r("throw",t,o,a)})):Promise.resolve(h).then((function(t){u.value=t,o(u)}),(function(t){return r("throw",t,o,a)}))}a(s.arg)}(e,i,r,o)}))}return r=r?r.then(o,o):o()}}function k(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,k(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=c(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function N(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:R}}function R(){return{value:r,done:!0}}return v.prototype=M.constructor=d,d.constructor=v,d[s]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(M),t},t.awrap=function(t){return{__await:t}},x(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(r,e,n,i){var o=new S(u(r,e,n,i));return t.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(M),M[s]="Generator",M[o]=function(){return this},M.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),g},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),N(e),g}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var i=n.arg;N(e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,r){t.exports=function(t){if(Array.isArray(t)){for(var r=0,e=new Array(t.length);r<t.length;r++)e[r]=t[r];return e}}},function(t,r){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,r){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,r,e){"use strict";e.r(r);var n=e(6),i=e.n(n),o=e(2),a=e.n(o),s=e(3),u=e.n(s),c=e(1),h=e.n(c),l=e(0),f="EMBEDDER_INITIALIZED",m="COMPUTED_UMAP_N_EPOCHS",g="UMAP_ITERATIVE_COMPUTED_COORDINATES",p="UMAP_ERROR",v="UMAP_FINAL_COMPUTED_COORDINATES",d=[{opt:"nComponents",prop:"dimensions"},{opt:"nNeighbors",prop:"neighbors"},{opt:"minDist",prop:"minDist"},{opt:"spread",prop:"spread"},{opt:"random",prop:"random"}],w=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?r.exclude?t.map((function(t){for(var e=Object.keys(t),n={},i=function(i){-1===r.exclude.findIndex((function(t){return t===e[i]}))&&(n[e[i]]=t[e[i]])},o=0;o<e.length;++o)i(o);return Object.values(n)})):r.include?t.map((function(t){for(var e=Object.keys(t),n={},i=function(i){-1!==r.include.findIndex((function(t){return t===e[i]}))&&(n[e[i]]=t[e[i]])},o=0;o<e.length;++o)i(o);return Object.values(n)})):t.map((function(t){return Object.values(t)})):null},y=e(4),b=e.n(y),M=e(5),x=e.n(M),S=e(8),k=e(9),E=e(10);function N(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?N(e,!0).forEach((function(r){a()(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):N(e).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function j(t){var r={};return d.forEach((function(e){var n=e.opt,i=e.prop;t[i]&&(r[n]=t[i])})),r}function R(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,e=["x","y","z"].slice(0,r).reduce((function(r,e,n){var i,o,a;return r.push((i=t.map((function(t){return t[n]})),o=[Math.min.apply(Math,x()(i)),Math.max.apply(Math,x()(i))],a=Object(k.scaleLinear)().domain(o).range([0,1]),i.map((function(t){return a(t)})))),r}),[]),n=[];return t.forEach((function(t,i){return Object(S.range)(r).forEach((function(t){n.push(e[t][i])}))})),n}var A=e(11),C=e.n(A);function P(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function z(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?P(e,!0).forEach((function(r){a()(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):P(e).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function _(t){var r=t.data,e=t.debugLogs,n=void 0===e||e,i=t.exclude,o=t.include,a=t.iterate,s=void 0===a||a,c=t.params,d=t.worker,y=void 0===d||d,M=Object(l.useMemo)((function(){return n?console.log:function(){}}),[n]),x=Object(l.useState)(!0),S=h()(x,2),k=S[0],N=S[1],A=Object(l.useState)(new ArrayBuffer(0)),P=h()(A,2),_=P[0],L=P[1],T=Object(l.useState)(null),I=h()(T,2),D=I[0],F=I[1],V=Object(l.useState)(s?null:void 0),U=h()(V,2),q=U[0],$=U[1],H=Object(l.useState)(null),Y=h()(H,2),G=Y[0],W=Y[1];return Object(l.useEffect)((function(){if(y){var t=new C.a;return t.onmessage=function(t){var r=t.data,e=r.type,n=r.payload;switch(M(e),M(n),e){case f:var i=u()({},n);M("Initialized UMAP with opts:"),M(i);break;case m:var o=n.nEpochs;W(o);break;case g:var a=n.coordinates,s=n.iteration;L(a),$(s);break;case v:var c=n.coordinates,h=n.iteration;L(c),$(h),N(!1);break;case p:var l=n.error;F(l);break;default:M("Message type ".concat(e," not recognized!"))}},t.onerror=function(t){F(t.message)},t.postMessage({payload:z({data:r,debugLogs:n,exclude:i,include:o,iterate:s},c)}),function(){t.terminate()}}var e=function(t,r,e){var n=new E.UMAP(j(r));return e({type:f,payload:O({},j(r))}),{runComputation:function(){var i,o;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.awrap(n.fitAsync(t));case 2:i=a.sent,o=new Float32Array(R(i,r.dimensions)),e({type:v,payload:{coordinates:o.buffer}},o.buffer);case 5:case"end":return a.stop()}}))},runIterations:function(){var i=n.initializeFit(t);e({type:m,payload:{nEpochs:i}});for(var o=0;o<i;++o){n.step();var a=R(n.getEmbedding(),r.dimensions),s=new Float32Array(a);e({type:o===i-1?v:g,payload:{coordinates:s.buffer,iteration:o}},s.buffer)}}}}(w(r,{exclude:i,include:o}),c||{},(function(t){return function(t){var r=t.type,e=t.payload;switch(M(r),M(e),r){case f:var n=u()({},e);M("Initialized UMAP with opts:"),M(n);break;case m:var i=e.nEpochs;W(i);break;case g:var o=e.coordinates,a=e.iteration;L(o),$(a);break;case v:var s=e.coordinates,c=e.iteration;L(s),$(c),N(!1);break;case p:var h=e.error;F(h);break;default:M("Message type ".concat(r," not recognized!"))}}(t)})),a=e.runComputation,h=e.runIterations;s?h():a()}),[r,n,i,o,s,M,c,y]),{computing:k,coordinates:_,error:D,iteration:q,nEpochs:G}}e.d(r,"RenderWorker",(function(){return i.a})),e.d(r,"useUMAP",(function(){return _}))}])},576:function(t,r,e){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e(562));function o(t,r){var e=function(e){return i.empty(t).map((function(){return i.filled(r,e)}))},n=[];return n.push(e(-1)),n.push(e(1/0)),n.push(e(0)),n}function a(t,r,e,n,i){r=Math.floor(r);var o=t[0][r],a=t[1][r];t[2][r];if(e>=a[0])return 0;for(var u=0;u<o.length;u++)if(n===o[u])return 0;return s(t,r,e,n,i)}function s(t,r,e,n,i){var o=t[0][r],a=t[1][r],s=t[2][r];if(e>=a[0])return 0;a[0]=e,o[0]=n,s[0]=i;for(var u=0,c=0;;){var h=2*u+1,l=h+1,f=t[0][0].length;if(h>=f)break;if(l>=f){if(!(a[h]>e))break;c=h}else if(a[h]>=a[l]){if(!(e<a[h]))break;c=h}else{if(!(e<a[l]))break;c=l}a[u]=a[c],o[u]=o[c],s[u]=s[c],u=c}return a[u]=e,o[u]=n,s[u]=i,1}function u(t,r,e,n){for(;2*n+1<e;){var i=2*n+1,o=i+1,a=n;if(t[a]<t[i]&&(a=i),o<e&&t[a]<t[o]&&(a=o),a===n)break;var s=t[n];t[n]=t[a],t[a]=s;var u=r[n];r[n]=r[a],r[a]=u,n=a}}r.makeHeap=o,r.rejectionSample=function(t,r,e){for(var n=i.zeros(t),o=0;o<t;o++){for(var a=!0,s=0;a;){s=i.tauRandInt(r,e);for(var u=!1,c=0;c<o;c++)if(s===n[c]){u=!0;break}u||(a=!1)}n[o]=s}return n},r.heapPush=a,r.uncheckedHeapPush=s,r.buildCandidates=function(t,r,e,n,s){for(var u=o(r,n),c=0;c<r;c++)for(var h=0;h<e;h++)if(!(t[0][c][h]<0)){var l=t[0][c][h],f=t[2][c][h],m=i.tauRand(s);a(u,c,m,l,f),a(u,l,m,c,f),t[2][c][h]=0}return u},r.deheapSort=function(t){for(var r=t[0],e=t[1],n=0;n<r.length;n++)for(var i=r[n],o=e[n],a=0;a<i.length-1;a++){var s=i.length-a-1,c=o.length-a-1,h=i[0];i[0]=i[s],i[s]=h;var l=o[0];o[0]=o[c],o[c]=l,u(o,i,c,0)}return{indices:r,weights:e}},r.smallestFlagged=function(t,r){for(var e=t[0][r],n=t[1][r],i=t[2][r],o=1/0,a=-1,s=0;s>e.length;s++)1===i[s]&&n[s]<o&&(o=n[s],a=s);return a>=0?(i[a]=0,Math.floor(e[a])):-1}},577:function(t,r,e){"use strict";var n,i=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),a=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(i(arguments[r]));return t},a=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var u=s(e(562)),c=function(){function t(t,r,e,n){this.entries=new Map,this.nRows=0,this.nCols=0,this.rows=o(t),this.cols=o(r),this.values=o(e);for(var i=0;i<e.length;i++){var a=this.makeKey(this.rows[i],this.cols[i]);this.entries.set(a,i)}this.nRows=n[0],this.nCols=n[1]}return t.prototype.makeKey=function(t,r){return t+":"+r},t.prototype.checkDims=function(t,r){if(!(t<this.nRows&&r<this.nCols))throw new Error("array index out of bounds")},t.prototype.set=function(t,r,e){this.checkDims(t,r);var n=this.makeKey(t,r);if(this.entries.has(n)){var i=this.entries.get(n);this.values[i]=e}else this.rows.push(t),this.cols.push(r),this.values.push(e),this.entries.set(n,this.values.length-1)},t.prototype.get=function(t,r,e){void 0===e&&(e=0),this.checkDims(t,r);var n=this.makeKey(t,r);if(this.entries.has(n)){var i=this.entries.get(n);return this.values[i]}return e},t.prototype.getDims=function(){return[this.nRows,this.nCols]},t.prototype.getRows=function(){return o(this.rows)},t.prototype.getCols=function(){return o(this.cols)},t.prototype.getValues=function(){return o(this.values)},t.prototype.forEach=function(t){for(var r=0;r<this.values.length;r++)t(this.values[r],this.rows[r],this.cols[r])},t.prototype.map=function(r){for(var e=[],n=0;n<this.values.length;n++)e.push(r(this.values[n],this.rows[n],this.cols[n]));var i=[this.nRows,this.nCols];return new t(this.rows,this.cols,e,i)},t.prototype.toArray=function(){for(var t=this,r=u.empty(this.nRows).map((function(){return u.zeros(t.nCols)})),e=0;e<this.values.length;e++)r[this.rows[e]][this.cols[e]]=this.values[e];return r},t}();r.SparseMatrix=c,r.transpose=function(t){var r=[],e=[],n=[];t.forEach((function(t,i,o){r.push(i),e.push(o),n.push(t)}));var i=[t.nCols,t.nRows];return new c(e,r,n,i)},r.identity=function(t){for(var r=i(t,1)[0],e=new c([],[],[],t),n=0;n<r;n++)e.set(n,n,1);return e},r.pairwiseMultiply=function(t,r){return l(t,r,(function(t,r){return t*r}))},r.add=function(t,r){return l(t,r,(function(t,r){return t+r}))},r.subtract=function(t,r){return l(t,r,(function(t,r){return t-r}))},r.maximum=function(t,r){return l(t,r,(function(t,r){return t>r?t:r}))},r.multiplyScalar=function(t,r){return t.map((function(t){return t*r}))},r.eliminateZeros=function(t){for(var r=new Set,e=t.getValues(),n=t.getRows(),i=t.getCols(),o=0;o<e.length;o++)0===e[o]&&r.add(o);var a=function(t,e){return!r.has(e)},s=e.filter(a),u=n.filter(a),h=i.filter(a);return new c(u,h,s,t.getDims())},r.normalize=function(t,r){var e,n;void 0===r&&(r="l2");var i=h[r],o=new Map;t.forEach((function(t,r,e){var n=o.get(r)||[];n.push(e),o.set(r,n)}));var s=new c([],[],[],t.getDims()),u=function(r){for(var e=o.get(r).sort(),n=e.map((function(e){return t.get(r,e)})),a=i(n),u=0;u<a.length;u++)s.set(r,e[u],a[u])};try{for(var l=a(o.keys()),f=l.next();!f.done;f=l.next()){u(f.value)}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s};var h=((n={}).max=function(t){for(var r=-1/0,e=0;e<t.length;e++)r=t[e]>r?t[e]:r;return t.map((function(t){return t/r}))},n.l1=function(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return t.map((function(t){return t/r}))},n.l2=function(t){for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return t.map((function(t){return Math.sqrt(Math.pow(t,2)/r)}))},n);function l(t,r,e){for(var n=new Set,i=[],o=[],a=[],s=function(n,s){i.push(n),o.push(s);var u=e(t.get(n,s),r.get(n,s));a.push(u)},u=t.getValues(),h=t.getRows(),l=t.getCols(),f=0;f<u.length;f++){var m=(d=h[f])+":"+(w=l[f]);n.add(m),s(d,w)}var g=r.getValues(),p=r.getRows(),v=r.getCols();for(f=0;f<g.length;f++){var d,w;m=(d=p[f])+":"+(w=v[f]);n.has(m)||s(d,w)}var y=[t.nRows,t.nCols];return new c(i,o,a,y)}r.getCSR=function(t){var r=[];t.forEach((function(t,e,n){r.push({value:t,row:e,col:n})})),r.sort((function(t,r){return t.row===r.row?t.col-r.col:t.row-r.col}));for(var e=[],n=[],i=[],o=-1,a=0;a<r.length;a++){var s=r[a],u=s.row,c=s.col,h=s.value;u!==o&&(o=u,i.push(a)),e.push(c),n.push(h)}return{indices:e,values:n,indptr:i}}},578:function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),a=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var s=a(e(562)),u=function(t,r,e,n){this.hyperplanes=t,this.offsets=r,this.children=e,this.indices=n};function c(t,r,e,n){for(var i=r,o=0;o<e.length;o++)i+=t[o]*e[o];return 0===i?s.tauRandInt(2,n):i>0?0:1}r.FlatTree=u,r.makeForest=function(t,r,e,n){var o=Math.max(10,r);return s.range(e).map((function(r,e){return function(t,r,e,n){void 0===r&&(r=30);var i=s.range(t.length);return function t(r,e,n,i,o){void 0===n&&(n=30);if(e.length>n){var a=function(t,r,e){var n=t[0].length,i=s.tauRandInt(r.length,e),o=s.tauRandInt(r.length,e);o=(o+=i===o?1:0)%r.length;for(var a=r[i],u=r[o],c=0,h=s.zeros(n),l=0;l<h.length;l++)h[l]=t[a][l]-t[u][l],c-=h[l]*(t[a][l]+t[u][l])/2;var f=0,m=0,g=s.zeros(r.length);for(l=0;l<r.length;l++){for(var p=c,v=0;v<n;v++)p+=h[v]*t[r[l]][v];0===p?(g[l]=s.tauRandInt(2,e),0===g[l]?f+=1:m+=1):p>0?(g[l]=0,f+=1):(g[l]=1,m+=1)}var d=s.zeros(f),w=s.zeros(m);for(var l in f=0,m=0,s.range(g.length))0===g[l]?(d[f]=r[l],f+=1):(w[m]=r[l],m+=1);return{indicesLeft:d,indicesRight:w,hyperplane:h,offset:c}}(r,e,o),u=a.indicesLeft,c=a.indicesRight,h=a.hyperplane,l=a.offset,f=t(r,u,n,i+1,o),m=t(r,c,n,i+1,o);return{leftChild:f,rightChild:m,isLeaf:!1,hyperplane:h,offset:l}}return{indices:e,isLeaf:!0}}(t,i,r,e,n)}(t,o,e,n)})).map((function(t){return function(t,r){var e=function t(r){return r.isLeaf?1:1+t(r.leftChild)+t(r.rightChild)}(t),n=function t(r){return r.isLeaf?1:t(r.leftChild)+t(r.rightChild)}(t),o=s.range(e).map((function(){return s.zeros(t.hyperplane.length)})),a=s.zeros(e),c=s.range(e).map((function(){return[-1,-1]})),h=s.range(n).map((function(){return s.range(r).map((function(){return-1}))}));return function t(r,e,n,o,a,s,u){var c;if(r.isLeaf)return o[s][0]=-u,(c=a[u]).splice.apply(c,i([0,r.indices.length],r.indices)),{nodeNum:s,leafNum:u+=1};e[s]=r.hyperplane,n[s]=r.offset,o[s][0]=s+1;var h=s,l=t(r.leftChild,e,n,o,a,s+1,u);return s=l.nodeNum,u=l.leafNum,o[h][1]=s+1,{nodeNum:(l=t(r.rightChild,e,n,o,a,s+1,u)).nodeNum,leafNum:l.leafNum}}(t,o,a,c,h,0,0),new u(o,a,c,h)}(t,o)}))},r.makeLeafArray=function(t){var r,e;if(t.length>0){var n=[];try{for(var a=o(t),s=a.next();!s.done;s=a.next()){var u=s.value;n.push.apply(n,i(u.indices))}}catch(t){r={error:t}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return n}return[[-1]]},r.searchFlatTree=function(t,r,e){for(var n=0;r.children[n][0]>0;){n=0===c(r.hyperplanes[n],r.offsets[n],t,e)?r.children[n][0]:r.children[n][1]}var i=-1*r.children[n][0];return r.indices[i]}},591:function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(592);r.UMAP=n.UMAP},592:function(t,r,e){"use strict";var n=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new e((function(r){r(t.value)})).then(a,s)}u((n=n.apply(t,r||[])).next())}))},i=this&&this.__generator||function(t,r){var e,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(t,a)}catch(t){o=[6,t],n=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__read||function(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,i,o=e.call(t),a=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(o(arguments[r]));return t},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var c=s(e(576)),h=s(e(577)),l=s(e(593)),f=s(e(578)),m=s(e(562)),g=u(e(594)),p=function(){function t(t){void 0===t&&(t={});var r=this;this.learningRate=1,this.localConnectivity=1,this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.negativeSampleRate=5,this.random=Math.random,this.repulsionStrength=1,this.setOpMixRatio=1,this.spread=1,this.transformQueueSize=4,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=v,this.isInitialized=!1,this.rpForest=[],this.embedding=[],this.optimizationState=new d;var e=function(e){void 0!==t[e]&&(r[e]=t[e])};e("distanceFn"),e("learningRate"),e("localConnectivity"),e("minDist"),e("nComponents"),e("nEpochs"),e("nNeighbors"),e("negativeSampleRate"),e("random"),e("repulsionStrength"),e("setOpMixRatio"),e("spread"),e("transformQueueSize")}return t.prototype.fit=function(t){return this.initializeFit(t),this.optimizeLayout(),this.embedding},t.prototype.fitAsync=function(t,r){return void 0===r&&(r=function(){return!0}),n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.initializeFit(t),[4,this.optimizeLayoutAsync(r)];case 1:return e.sent(),[2,this.embedding]}}))}))},t.prototype.setSupervisedProjection=function(t,r){void 0===r&&(r={}),this.Y=t,this.targetMetric=r.targetMetric||this.targetMetric,this.targetWeight=r.targetWeight||this.targetWeight,this.targetNNeighbors=r.targetNNeighbors||this.targetNNeighbors},t.prototype.setPrecomputedKNN=function(t,r){this.knnIndices=t,this.knnDistances=r},t.prototype.initializeFit=function(t){if(this.X===t&&this.isInitialized)return this.getNEpochs();if(this.X=t,!this.knnIndices&&!this.knnDistances){var r=this.nearestNeighbors(t);this.knnIndices=r.knnIndices,this.knnDistances=r.knnDistances}this.graph=this.fuzzySimplicialSet(t,this.nNeighbors,this.setOpMixRatio),this.makeSearchFns(),this.searchGraph=this.makeSearchGraph(t),this.processGraphForSupervisedProjection();var e=this.initializeSimplicialSetEmbedding(),n=e.head,i=e.tail,o=e.epochsPerSample;return this.optimizationState.head=n,this.optimizationState.tail=i,this.optimizationState.epochsPerSample=o,this.initializeOptimization(),this.prepareForOptimizationLoop(),this.isInitialized=!0,this.getNEpochs()},t.prototype.makeSearchFns=function(){var t=l.makeInitializations(this.distanceFn),r=t.initFromTree,e=t.initFromRandom;this.initFromTree=r,this.initFromRandom=e,this.search=l.makeInitializedNNSearch(this.distanceFn)},t.prototype.makeSearchGraph=function(t){for(var r=this.knnIndices,e=this.knnDistances,n=[t.length,t.length],i=new h.SparseMatrix([],[],[],n),o=0;o<r.length;o++)for(var a=r[o],s=e[o],u=0;u<a.length;u++){var c=a[u],l=s[u];l>0&&i.set(o,c,l)}var f=h.transpose(i);return h.maximum(i,f)},t.prototype.transform=function(t){var r=this,e=this.X;if(void 0===e||0===e.length)throw new Error("No data has been fit.");var n=Math.floor(this.nNeighbors*this.transformQueueSize),i=l.initializeSearch(this.rpForest,e,t,n,this.initFromRandom,this.initFromTree,this.random),o=this.search(e,this.searchGraph,i,t),a=c.deheapSort(o),s=a.indices,u=a.weights;s=s.map((function(t){return t.slice(0,r.nNeighbors)})),u=u.map((function(t){return t.slice(0,r.nNeighbors)}));var f=Math.max(0,this.localConnectivity-1),g=this.smoothKNNDistance(u,this.nNeighbors,f),p=g.sigmas,v=g.rhos,d=this.computeMembershipStrengths(s,u,p,v),w=d.rows,y=d.cols,b=d.vals,M=[t.length,e.length],x=new h.SparseMatrix(w,y,b,M),k=h.normalize(x,"l1"),E=h.getCSR(k),N=t.length,O=S(m.reshape2d(E.indices,N,this.nNeighbors),m.reshape2d(E.values,N,this.nNeighbors),this.embedding),j=this.nEpochs?this.nEpochs/3:x.nRows<=1e4?100:30,R=x.getValues().reduce((function(t,r){return r>t?r:t}),0);x=x.map((function(t){return t<R/j?0:t})),x=h.eliminateZeros(x);var A=this.makeEpochsPerSample(x.getValues(),j),C=x.getRows(),P=x.getCols();return this.assignOptimizationStateParameters({headEmbedding:O,tailEmbedding:this.embedding,head:C,tail:P,currentEpoch:0,nEpochs:j,nVertices:x.getDims()[1],epochsPerSample:A}),this.prepareForOptimizationLoop(),this.optimizeLayout()},t.prototype.processGraphForSupervisedProjection=function(){var t=this.Y,r=this.X;if(t){if(t.length!==r.length)throw new Error("Length of X and y must be equal");if("categorical"===this.targetMetric){var e=this.targetWeight<1?1/(1-this.targetWeight)*2.5:1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,t,e)}}},t.prototype.step=function(){var t=this.optimizationState.currentEpoch;return t<this.getNEpochs()&&this.optimizeLayoutStep(t),this.optimizationState.currentEpoch},t.prototype.getEmbedding=function(){return this.embedding},t.prototype.nearestNeighbors=function(t){var r,e=this.distanceFn,n=this.nNeighbors,i=l.makeNNDescent(e,this.random),o=5+Math.floor(.5===(r=Math.pow(t.length,.5)/20)?0:Math.round(r)),a=Math.max(5,Math.floor(Math.round(function(t){return Math.log(t)/Math.log(2)}(t.length))));this.rpForest=f.makeForest(t,n,o,this.random);var s=i(t,f.makeLeafArray(this.rpForest),n,a);return{knnIndices:s.indices,knnDistances:s.weights}},t.prototype.fuzzySimplicialSet=function(t,r,e){void 0===e&&(e=1);var n=this.knnIndices,i=void 0===n?[]:n,o=this.knnDistances,a=void 0===o?[]:o,s=this.localConnectivity,u=this.smoothKNNDistance(a,r,s),c=u.sigmas,l=u.rhos,f=this.computeMembershipStrengths(i,a,c,l),m=f.rows,g=f.cols,p=f.vals,v=[t.length,t.length],d=new h.SparseMatrix(m,g,p,v),w=h.transpose(d),y=h.pairwiseMultiply(d,w),b=h.subtract(h.add(d,w),y),M=h.multiplyScalar(b,e),x=h.multiplyScalar(y,1-e);return h.add(M,x)},t.prototype.categoricalSimplicialSetIntersection=function(t,r,e,n){void 0===n&&(n=1);var i=M(t,r,n,e);return x(i=h.eliminateZeros(i))},t.prototype.smoothKNNDistance=function(t,r,e,n,i){void 0===e&&(e=1),void 0===n&&(n=64),void 0===i&&(i=1);for(var o=Math.log(r)/Math.log(2)*i,a=m.zeros(t.length),s=m.zeros(t.length),u=0;u<t.length;u++){var c=0,h=1/0,l=1,f=t[u],g=f.filter((function(t){return t>0}));if(g.length>=e){var p=Math.floor(e),v=e-p;p>0?(a[u]=g[p-1],v>1e-5&&(a[u]+=v*(g[p]-g[p-1]))):a[u]=v*g[0]}else g.length>0&&(a[u]=m.max(g));for(var d=0;d<n;d++){for(var w=0,y=1;y<t[u].length;y++){var b=t[u][y]-a[u];w+=b>0?Math.exp(-b/l):1}if(Math.abs(w-o)<1e-5)break;w>o?l=(c+(h=l))/2:(c=l,h===1/0?l*=2:l=(c+h)/2)}if(s[u]=l,a[u]>0){var M=m.mean(f);s[u]<.001*M&&(s[u]=.001*M)}else{var x=m.mean(t.map(m.mean));s[u]<.001*x&&(s[u]=.001*x)}}return{sigmas:s,rhos:a}},t.prototype.computeMembershipStrengths=function(t,r,e,n){for(var i=t.length,o=t[0].length,a=m.zeros(i*o),s=m.zeros(i*o),u=m.zeros(i*o),c=0;c<i;c++)for(var h=0;h<o;h++){var l=0;-1!==t[c][h]&&(l=t[c][h]===c?0:r[c][h]-n[c]<=0?1:Math.exp(-(r[c][h]-n[c])/e[c]),a[c*o+h]=c,s[c*o+h]=t[c][h],u[c*o+h]=l)}return{rows:a,cols:s,vals:u}},t.prototype.initializeSimplicialSetEmbedding=function(){for(var t=this,r=this.getNEpochs(),e=this.nComponents,n=this.graph.getValues(),i=0,o=0;o<n.length;o++){var a=n[o];i<n[o]&&(i=a)}var s=this.graph.map((function(t){return t<i/r?0:t}));this.embedding=m.zeros(s.nRows).map((function(){return m.zeros(e).map((function(){return 20*m.tauRand(t.random)-10}))}));var u=[],c=[],h=[];for(o=0;o<s.nRows;o++)for(var l=0;l<s.nCols;l++){(a=s.get(o,l))&&(u.push(a),h.push(o),c.push(l))}return{head:c,tail:h,epochsPerSample:this.makeEpochsPerSample(u,r)}},t.prototype.makeEpochsPerSample=function(t,r){var e=m.filled(t.length,-1),n=m.max(t),i=t.map((function(t){return t/n*r}));return i.forEach((function(t,n){t>0&&(e[n]=r/i[n])})),e},t.prototype.assignOptimizationStateParameters=function(t){Object.assign(this.optimizationState,t)},t.prototype.prepareForOptimizationLoop=function(){var t=this.repulsionStrength,r=this.learningRate,e=this.negativeSampleRate,n=this.optimizationState,i=n.epochsPerSample,o=n.headEmbedding,s=n.tailEmbedding,u=o[0].length,c=o.length===s.length,h=i.map((function(t){return t/e})),l=a(h),f=a(i);this.assignOptimizationStateParameters({epochOfNextSample:f,epochOfNextNegativeSample:l,epochsPerNegativeSample:h,moveOther:c,initialAlpha:r,alpha:r,gamma:t,dim:u})},t.prototype.initializeOptimization=function(){var t=this.embedding,r=this.embedding,e=this.optimizationState,n=e.head,i=e.tail,o=e.epochsPerSample,a=this.getNEpochs(),s=this.graph.nCols,u=b(this.spread,this.minDist),c=u.a,h=u.b;this.assignOptimizationStateParameters({headEmbedding:t,tailEmbedding:r,head:n,tail:i,epochsPerSample:o,a:c,b:h,nEpochs:a,nVertices:s})},t.prototype.optimizeLayoutStep=function(t){for(var r=this.optimizationState,e=r.head,n=r.tail,i=r.headEmbedding,o=r.tailEmbedding,a=r.epochsPerSample,s=r.epochOfNextSample,u=r.epochOfNextNegativeSample,c=r.epochsPerNegativeSample,h=r.moveOther,l=r.initialAlpha,f=r.alpha,g=r.gamma,p=r.a,v=r.b,d=r.dim,b=r.nEpochs,M=r.nVertices,x=0;x<a.length;x++)if(!(s[x]>t)){var S=e[x],k=n[x],E=i[S],N=o[k],O=y(E,N),j=0;O>0&&(j=-2*p*v*Math.pow(O,v-1),j/=p*Math.pow(O,v)+1);for(var R=0;R<d;R++){var A=w(j*(E[R]-N[R]),4);E[R]+=A*f,h&&(N[R]+=-A*f)}s[x]+=a[x];for(var C=Math.floor((t-u[x])/c[x]),P=0;P<C;P++){var z=m.tauRandInt(M,this.random),_=o[z],L=y(E,_),T=0;if(L>0)T=2*g*v,T/=(.001+L)*(p*Math.pow(L,v)+1);else if(S===z)continue;for(R=0;R<d;R++){A=4;T>0&&(A=w(T*(E[R]-_[R]),4)),E[R]+=A*f}}u[x]+=C*c[x]}return r.alpha=l*(1-t/b),r.currentEpoch+=1,i},t.prototype.optimizeLayoutAsync=function(t){var r=this;return void 0===t&&(t=function(){return!0}),new Promise((function(e,o){var a=function(){return n(r,void 0,void 0,(function(){var r,n,s,u,c,h;return i(this,(function(i){try{if(r=this.optimizationState,n=r.nEpochs,s=r.currentEpoch,this.embedding=this.optimizeLayoutStep(s),u=this.optimizationState.currentEpoch,c=!1===t(u),h=u===n,c||h)return[2,e(h)];a()}catch(t){o(t)}return[2]}))}))};a()}))},t.prototype.optimizeLayout=function(t){void 0===t&&(t=function(){return!0});for(var r=!1,e=[];!r;){var n=this.optimizationState,i=n.nEpochs,o=n.currentEpoch;e=this.optimizeLayoutStep(o);var a=this.optimizationState.currentEpoch,s=!1===t(a);r=a===i||s}return e},t.prototype.getNEpochs=function(){var t=this.graph;if(this.nEpochs>0)return this.nEpochs;var r=t.nRows;return r<=2500?500:r<=5e3?400:r<=7500?300:200},t}();function v(t,r){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n]-r[n],2);return Math.sqrt(e)}r.UMAP=p,r.euclidean=v,r.cosine=function(t,r){for(var e=0,n=0,i=0,o=0;o<t.length;o++)e+=t[o]*r[o],n+=Math.pow(t[o],2),i+=Math.pow(r[o],2);return 0===n&&0===i?0:0===n||0===i?1:1-e/Math.sqrt(n*i)};var d=function(){this.currentEpoch=0,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0};function w(t,r){return t>r?r:t<-r?-r:t}function y(t,r){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n]-r[n],2);return e}function b(t,r){var e=m.linear(0,3*t,300).map((function(t){return t<r?1:t})),n=m.zeros(e.length).map((function(n,i){return e[i]>=r?Math.exp(-(e[i]-r)/t):n})),i={x:e,y:n},a={damping:1.5,initialValues:[.5,.5],gradientDifference:.1,maxIterations:100,errorTolerance:.01},s=g.default(i,(function(t){var r=o(t,2),e=r[0],n=r[1];return function(t){return 1/(1+e*Math.pow(t,2*n))}}),a).parameterValues,u=o(s,2);return{a:u[0],b:u[1]}}function M(t,r,e,n){return void 0===e&&(e=1),void 0===n&&(n=5),t.map((function(t,i,o){return-1===r[i]||-1===r[o]?t*Math.exp(-e):r[i]!==r[o]?t*Math.exp(-n):t}))}function x(t){t=h.normalize(t,"max");var r=h.transpose(t),e=h.pairwiseMultiply(r,t);return t=h.add(t,h.subtract(r,e)),h.eliminateZeros(t)}function S(t,r,e){for(var n=m.zeros(t.length).map((function(t){return m.zeros(e[0].length)})),i=0;i<t.length;i++)for(var o=0;o<t[0].length;o++)for(var a=0;a<e[0].length;a++){var s=t[i][o];n[i][a]+=r[i][o]*e[s][a]}return n}r.findABParams=b,r.fastIntersection=M,r.resetLocalConnectivity=x,r.initTransform=S},593:function(t,r,e){"use strict";var n=this&&this.__values||function(t){var r="function"==typeof Symbol&&t[Symbol.iterator],e=0;return r?r.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var o=i(e(576)),a=i(e(577)),s=i(e(578)),u=i(e(562));r.makeNNDescent=function(t,r){return function(e,n,i,a,s,c,h,l){void 0===a&&(a=10),void 0===s&&(s=50),void 0===c&&(c=.001),void 0===h&&(h=.5),void 0===l&&(l=!0);for(var f=e.length,m=o.makeHeap(e.length,i),g=0;g<e.length;g++)for(var p=o.rejectionSample(i,e.length,r),v=0;v<p.length;v++){var d=t(e[g],e[p[v]]);o.heapPush(m,g,d,p[v],1),o.heapPush(m,p[v],d,g,1)}if(l)for(var w=0;w<n.length;w++)for(g=0;g<n[w].length&&!(n[w][g]<0);g++)for(v=g+1;v<n[w].length&&!(n[w][v]<0);v++){d=t(e[n[w][g]],e[n[w][v]]);o.heapPush(m,n[w][g],d,n[w][v],1),o.heapPush(m,n[w][v],d,n[w][g],1)}for(w=0;w<a;w++){var y=o.buildCandidates(m,f,i,s,r),b=0;for(g=0;g<f;g++)for(v=0;v<s;v++){var M=Math.floor(y[0][g][v]);if(!(M<0||u.tauRand(r)<h))for(var x=0;x<s;x++){var S=Math.floor(y[0][g][x]),k=y[2][g][v],E=y[2][g][x];if(!(S<0||!k&&!E)){d=t(e[M],e[S]);b+=o.heapPush(m,M,d,S,1),b+=o.heapPush(m,S,d,M,1)}}}if(b<=c*i*e.length)break}return o.deheapSort(m)}},r.makeInitializations=function(t){return{initFromRandom:function(r,e,n,i,a){for(var s=0;s<n.length;s++)for(var c=u.rejectionSample(r,e.length,a),h=0;h<c.length;h++)if(!(c[h]<0)){var l=t(e[c[h]],n[s]);o.heapPush(i,s,l,c[h],1)}},initFromTree:function(r,e,n,i,a){for(var u=0;u<n.length;u++)for(var c=s.searchFlatTree(n[u],r,a),h=0;h<c.length;h++){if(c[h]<0)return;var l=t(e[c[h]],n[u]);o.heapPush(i,u,l,c[h],1)}}}},r.makeInitializedNNSearch=function(t){return function(r,e,i,s){for(var u,c,h=a.getCSR(e),l=h.indices,f=h.indptr,m=0;m<s.length;m++)for(var g=new Set(i[0][m]);;){var p=o.smallestFlagged(i,m);if(-1===p)break;var v=l.slice(f[p],f[p+1]);try{for(var d=n(v),w=d.next();!w.done;w=d.next()){var y=w.value;if(y!==p&&-1!==y&&!g.has(y)){var b=t(r[y],s[m]);o.uncheckedHeapPush(i,m,b,y,1),g.add(y)}}}catch(t){u={error:t}}finally{try{w&&!w.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}}return i}},r.initializeSearch=function(t,r,e,i,a,s,u){var c,h,l=o.makeHeap(e.length,i);if(a(i,r,e,l,u),t)try{for(var f=n(t),m=f.next();!m.done;m=f.next()){s(m.value,r,e,l,u)}}catch(t){c={error:t}}finally{try{m&&!m.done&&(h=f.return)&&h.call(f)}finally{if(c)throw c.error}}return l}},594:function(t,r,e){"use strict";function n(t,r,e){var n=0;const i=e(r);for(var o=0;o<t.x.length;o++)n+=Math.abs(t.y[o]-i(t.x[o]));return n}e.r(r);var i=e(571),o=e.n(i);var a=function(t){if(!o()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r};var s=function(t){if(!o()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r};var u=function(t){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==e.output){if(!o()(e.output))throw new TypeError("output option must be an array if specified");r=e.output}else r=new Array(t.length);var n=s(t),i=a(t);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var u=e.min,c=void 0===u?e.autoMinMax?n:0:u,h=e.max,l=void 0===h?e.autoMinMax?i:1:h;if(c>=l)throw new RangeError("min option must be smaller than max option");for(var f=(l-c)/(i-n),m=0;m<t.length;m++)r[m]=(t[m]-n)*f+c;return r};class c{constructor(t){var r,e,n,i,o,a,s,u,c,h=(t=_.checkMatrix(t)).clone(),l=h.rows,f=h.columns,m=new Array(l),g=1;for(r=0;r<l;r++)m[r]=r;for(u=new Array(l),e=0;e<f;e++){for(r=0;r<l;r++)u[r]=h.get(r,e);for(r=0;r<l;r++){for(c=Math.min(r,e),o=0,n=0;n<c;n++)o+=h.get(r,n)*u[n];u[r]-=o,h.set(r,e,u[r])}for(i=e,r=e+1;r<l;r++)Math.abs(u[r])>Math.abs(u[i])&&(i=r);if(i!==e){for(n=0;n<f;n++)a=h.get(i,n),h.set(i,n,h.get(e,n)),h.set(e,n,a);s=m[i],m[i]=m[e],m[e]=s,g=-g}if(e<l&&0!==h.get(e,e))for(r=e+1;r<l;r++)h.set(r,e,h.get(r,e)/h.get(e,e))}this.LU=h,this.pivotVector=m,this.pivotSign=g}isSingular(){for(var t=this.LU,r=t.columns,e=0;e<r;e++)if(0===t[e][e])return!0;return!1}solve(t){t=z.checkMatrix(t);var r=this.LU;if(r.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var e,n,i,o=t.columns,a=t.subMatrixRow(this.pivotVector,0,o-1),s=r.columns;for(i=0;i<s;i++)for(e=i+1;e<s;e++)for(n=0;n<o;n++)a[e][n]-=a[i][n]*r[e][i];for(i=s-1;i>=0;i--){for(n=0;n<o;n++)a[i][n]/=r[i][i];for(e=0;e<i;e++)for(n=0;n<o;n++)a[e][n]-=a[i][n]*r[e][i]}return a}get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var r=this.pivotSign,e=t.columns,n=0;n<e;n++)r*=t[n][n];return r}get lowerTriangularMatrix(){for(var t=this.LU,r=t.rows,e=t.columns,n=new z(r,e),i=0;i<r;i++)for(var o=0;o<e;o++)n[i][o]=i>o?t[i][o]:i===o?1:0;return n}get upperTriangularMatrix(){for(var t=this.LU,r=t.rows,e=t.columns,n=new z(r,e),i=0;i<r;i++)for(var o=0;o<e;o++)n[i][o]=i<=o?t[i][o]:0;return n}get pivotPermutationVector(){return this.pivotVector.slice()}}function h(t,r){var e=0;return Math.abs(t)>Math.abs(r)?(e=r/t,Math.abs(t)*Math.sqrt(1+e*e)):0!==r?(e=t/r,Math.abs(r)*Math.sqrt(1+e*e)):0}function l(t,r,e){for(var n=new Array(t),i=0;i<t;i++){n[i]=new Array(r);for(var o=0;o<r;o++)n[i][o]=e}return n}class f{constructor(t,r={}){var e=(t=_.checkMatrix(t)).rows,n=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=r;var s,u=Boolean(i),c=Boolean(o),f=!1;if(e<n)if(a){e=(s=t.transpose()).rows,n=s.columns,f=!0;var m=u;u=c,c=m}else s=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=t.clone();var g=Math.min(e,n),p=Math.min(e+1,n),v=new Array(p),d=l(e,g,0),w=l(n,n,0),y=new Array(n),b=new Array(e),M=new Array(p);for(let t=0;t<p;t++)M[t]=t;var x=Math.min(e-1,n),S=Math.max(0,Math.min(n-2,e)),k=Math.max(x,S);for(let t=0;t<k;t++){if(t<x){v[t]=0;for(let r=t;r<e;r++)v[t]=h(v[t],s[r][t]);if(0!==v[t]){s[t][t]<0&&(v[t]=-v[t]);for(let r=t;r<e;r++)s[r][t]/=v[t];s[t][t]+=1}v[t]=-v[t]}for(let r=t+1;r<n;r++){if(t<x&&0!==v[t]){let n=0;for(let i=t;i<e;i++)n+=s[i][t]*s[i][r];n=-n/s[t][t];for(let i=t;i<e;i++)s[i][r]+=n*s[i][t]}y[r]=s[t][r]}if(u&&t<x)for(let r=t;r<e;r++)d[r][t]=s[r][t];if(t<S){y[t]=0;for(let r=t+1;r<n;r++)y[t]=h(y[t],y[r]);if(0!==y[t]){y[t+1]<0&&(y[t]=0-y[t]);for(let r=t+1;r<n;r++)y[r]/=y[t];y[t+1]+=1}if(y[t]=-y[t],t+1<e&&0!==y[t]){for(let r=t+1;r<e;r++)b[r]=0;for(let r=t+1;r<e;r++)for(let e=t+1;e<n;e++)b[r]+=y[e]*s[r][e];for(let r=t+1;r<n;r++){let n=-y[r]/y[t+1];for(let i=t+1;i<e;i++)s[i][r]+=n*b[i]}}if(c)for(let r=t+1;r<n;r++)w[r][t]=y[r]}}let E=Math.min(n,e+1);if(x<n&&(v[x]=s[x][x]),e<E&&(v[E-1]=0),S+1<E&&(y[S]=s[S][E-1]),y[E-1]=0,u){for(let t=x;t<g;t++){for(let r=0;r<e;r++)d[r][t]=0;d[t][t]=1}for(let t=x-1;t>=0;t--)if(0!==v[t]){for(let r=t+1;r<g;r++){let n=0;for(let i=t;i<e;i++)n+=d[i][t]*d[i][r];n=-n/d[t][t];for(let i=t;i<e;i++)d[i][r]+=n*d[i][t]}for(let r=t;r<e;r++)d[r][t]=-d[r][t];d[t][t]=1+d[t][t];for(let r=0;r<t-1;r++)d[r][t]=0}else{for(let r=0;r<e;r++)d[r][t]=0;d[t][t]=1}}if(c)for(let t=n-1;t>=0;t--){if(t<S&&0!==y[t])for(let r=t+1;r<n;r++){let e=0;for(let i=t+1;i<n;i++)e+=w[i][t]*w[i][r];e=-e/w[t+1][t];for(let i=t+1;i<n;i++)w[i][r]+=e*w[i][t]}for(let r=0;r<n;r++)w[r][t]=0;w[t][t]=1}for(var N=E-1,O=Number.EPSILON;E>0;){let t,r;for(t=E-2;t>=-1&&-1!==t;t--){const r=Number.MIN_VALUE+O*Math.abs(v[t]+Math.abs(v[t+1]));if(Math.abs(y[t])<=r||Number.isNaN(y[t])){y[t]=0;break}}if(t===E-2)r=4;else{let e;for(e=E-1;e>=t&&e!==t;e--){let r=(e!==E?Math.abs(y[e]):0)+(e!==t+1?Math.abs(y[e-1]):0);if(Math.abs(v[e])<=O*r){v[e]=0;break}}e===t?r=3:e===E-1?r=1:(r=2,t=e)}switch(t++,r){case 1:{let r=y[E-2];y[E-2]=0;for(let e=E-2;e>=t;e--){let i=h(v[e],r),o=v[e]/i,a=r/i;if(v[e]=i,e!==t&&(r=-a*y[e-1],y[e-1]=o*y[e-1]),c)for(let t=0;t<n;t++)i=o*w[t][e]+a*w[t][E-1],w[t][E-1]=-a*w[t][e]+o*w[t][E-1],w[t][e]=i}break}case 2:{let r=y[t-1];y[t-1]=0;for(let n=t;n<E;n++){let i=h(v[n],r),o=v[n]/i,a=r/i;if(v[n]=i,r=-a*y[n],y[n]=o*y[n],u)for(let r=0;r<e;r++)i=o*d[r][n]+a*d[r][t-1],d[r][t-1]=-a*d[r][n]+o*d[r][t-1],d[r][n]=i}break}case 3:{const r=Math.max(Math.abs(v[E-1]),Math.abs(v[E-2]),Math.abs(y[E-2]),Math.abs(v[t]),Math.abs(y[t])),i=v[E-1]/r,o=v[E-2]/r,a=y[E-2]/r,s=v[t]/r,l=y[t]/r,f=((o+i)*(o-i)+a*a)/2,m=i*a*(i*a);let g=0;0===f&&0===m||(g=f<0?0-Math.sqrt(f*f+m):Math.sqrt(f*f+m),g=m/(f+g));let p=(s+i)*(s-i)+g,b=s*l;for(let r=t;r<E-1;r++){let i=h(p,b);0===i&&(i=Number.MIN_VALUE);let o=p/i,a=b/i;if(r!==t&&(y[r-1]=i),p=o*v[r]+a*y[r],y[r]=o*y[r]-a*v[r],b=a*v[r+1],v[r+1]=o*v[r+1],c)for(let t=0;t<n;t++)i=o*w[t][r]+a*w[t][r+1],w[t][r+1]=-a*w[t][r]+o*w[t][r+1],w[t][r]=i;if(i=h(p,b),0===i&&(i=Number.MIN_VALUE),o=p/i,a=b/i,v[r]=i,p=o*y[r]+a*v[r+1],v[r+1]=-a*y[r]+o*v[r+1],b=a*y[r+1],y[r+1]=o*y[r+1],u&&r<e-1)for(let t=0;t<e;t++)i=o*d[t][r]+a*d[t][r+1],d[t][r+1]=-a*d[t][r]+o*d[t][r+1],d[t][r]=i}y[E-2]=p,1;break}case 4:if(v[t]<=0&&(v[t]=v[t]<0?-v[t]:0,c))for(let r=0;r<=N;r++)w[r][t]=-w[r][t];for(;t<N&&!(v[t]>=v[t+1]);){let r=v[t];if(v[t]=v[t+1],v[t+1]=r,c&&t<n-1)for(let e=0;e<n;e++)r=w[e][t+1],w[e][t+1]=w[e][t],w[e][t]=r;if(u&&t<e-1)for(let n=0;n<e;n++)r=d[n][t+1],d[n][t+1]=d[n][t],d[n][t]=r;t++}0,E--}}if(f){var j=w;w=d,d=j}this.m=e,this.n=n,this.s=v,this.U=d,this.V=w}solve(t){var r=t,e=this.threshold,n=this.s.length,i=z.zeros(n,n);for(let t=0;t<n;t++)Math.abs(this.s[t])<=e?i[t][t]=0:i[t][t]=1/this.s[t];var o=this.U,a=this.rightSingularVectors,s=a.mmul(i),u=a.rows,c=o.length,h=z.zeros(u,c);for(let t=0;t<u;t++)for(let r=0;r<c;r++){let e=0;for(let i=0;i<n;i++)e+=s[t][i]*o[r][i];h[t][r]=e}return h.mmul(r)}solveForDiagonal(t){return this.solve(z.diag(t))}inverse(){var t=this.V,r=this.threshold,e=t.length,n=t[0].length,i=new z(e,this.s.length);for(let o=0;o<e;o++)for(let e=0;e<n;e++)Math.abs(this.s[e])>r?i[o][e]=t[o][e]/this.s[e]:i[o][e]=0;var o=this.U,a=o.length,s=o[0].length,u=new z(e,a);for(let t=0;t<e;t++)for(let r=0;r<a;r++){let e=0;for(let n=0;n<s;n++)e+=i[t][n]*o[r][n];u[t][r]=e}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,e=this.s,n=0,i=e.length;n<i;n++)e[n]>t&&r++;return r}get diagonal(){return this.s}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return z.isMatrix(this.U)||(this.U=new z(this.U)),this.U}get rightSingularVectors(){return z.isMatrix(this.V)||(this.V=new z(this.V)),this.V}get diagonalMatrix(){return z.diag(this.s)}}function m(t,r,e){var n=e?t.rows:t.rows-1;if(r<0||r>n)throw new RangeError("Row index out of range")}function g(t,r,e){var n=e?t.columns:t.columns-1;if(r<0||r>n)throw new RangeError("Column index out of range")}function p(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function v(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function d(t,r,e){return{row:w(t,r),column:y(t,e)}}function w(t,r){if("object"!=typeof r)throw new TypeError("unexpected type for row indices");if(r.some(r=>r<0||r>=t.rows))throw new RangeError("row indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function y(t,r){if("object"!=typeof r)throw new TypeError("unexpected type for column indices");if(r.some(r=>r<0||r>=t.columns))throw new RangeError("column indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function b(t,r,e,n,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(M("startRow",r),M("endRow",e),M("startColumn",n),M("endColumn",i),r>e||n>i||r<0||r>=t.rows||e<0||e>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function M(t,r){if("number"!=typeof r)throw new TypeError(`${t} must be a number`)}class x extends(P()){constructor(t,r,e){super(),this.matrix=t,this.rows=r,this.columns=e}static get[Symbol.species](){return z}}class S extends x{constructor(t){super(t,t.columns,t.rows)}set(t,r,e){return this.matrix.set(r,t,e),this}get(t,r){return this.matrix.get(r,t)}}class k extends x{constructor(t,r){super(t,1,t.columns),this.row=r}set(t,r,e){return this.matrix.set(this.row,r,e),this}get(t,r){return this.matrix.get(this.row,r)}}class E extends x{constructor(t,r,e,n,i){b(t,r,e,n,i),super(t,e-r+1,i-n+1),this.startRow=r,this.startColumn=n}set(t,r,e){return this.matrix.set(this.startRow+t,this.startColumn+r,e),this}get(t,r){return this.matrix.get(this.startRow+t,this.startColumn+r)}}class N extends x{constructor(t,r,e){var n=d(t,r,e);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,r,e){return this.matrix.set(this.rowIndices[t],this.columnIndices[r],e),this}get(t,r){return this.matrix.get(this.rowIndices[t],this.columnIndices[r])}}class O extends x{constructor(t,r){super(t,(r=w(t,r)).length,t.columns),this.rowIndices=r}set(t,r,e){return this.matrix.set(this.rowIndices[t],r,e),this}get(t,r){return this.matrix.get(this.rowIndices[t],r)}}class j extends x{constructor(t,r){r=y(t,r),super(t,t.rows,r.length),this.columnIndices=r}set(t,r,e){return this.matrix.set(t,this.columnIndices[r],e),this}get(t,r){return this.matrix.get(t,this.columnIndices[r])}}class R extends x{constructor(t,r){super(t,t.rows,1),this.column=r}set(t,r,e){return this.matrix.set(t,this.column,e),this}get(t){return this.matrix.get(t,this.column)}}class A extends x{constructor(t){super(t,t.rows,t.columns)}set(t,r,e){return this.matrix.set(this.rows-t-1,r,e),this}get(t,r){return this.matrix.get(this.rows-t-1,r)}}class C extends x{constructor(t){super(t,t.rows,t.columns)}set(t,r,e){return this.matrix.set(t,this.columns-r-1,e),this}get(t,r){return this.matrix.get(t,this.columns-r-1)}}function P(t){void 0===t&&(t=Object);class r extends t{static get[Symbol.species](){return this}static from1DArray(t,r,e){if(t*r!==e.length)throw new RangeError("Data length does not match given dimensions");for(var n=new this(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)n.set(i,o,e[i*r+o]);return n}static rowVector(t){for(var r=new this(1,t.length),e=0;e<t.length;e++)r.set(0,e,t[e]);return r}static columnVector(t){for(var r=new this(t.length,1),e=0;e<t.length;e++)r.set(e,0,t[e]);return r}static empty(t,r){return new this(t,r)}static zeros(t,r){return this.empty(t,r).fill(0)}static ones(t,r){return this.empty(t,r).fill(1)}static rand(t,r,e){void 0===e&&(e=Math.random);for(var n=this.empty(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)n.set(i,o,e());return n}static randInt(t,r,e,n){void 0===e&&(e=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,r),o=0;o<t;o++)for(var a=0;a<r;a++){var s=Math.floor(n()*e);i.set(o,a,s)}return i}static eye(t,r,e){void 0===r&&(r=t),void 0===e&&(e=1);for(var n=Math.min(t,r),i=this.zeros(t,r),o=0;o<n;o++)i.set(o,o,e);return i}static diag(t,r,e){var n=t.length;void 0===r&&(r=n),void 0===e&&(e=r);for(var i=Math.min(n,r,e),o=this.zeros(r,e),a=0;a<i;a++)o.set(a,a,t[a]);return o}static min(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var e=t.rows,n=t.columns,i=new this(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)i.set(o,a,Math.min(t.get(o,a),r.get(o,a)));return i}static max(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var e=t.rows,n=t.columns,i=new this(e,n),o=0;o<e;o++)for(var a=0;a<n;a++)i.set(o,a,Math.max(t.get(o,a),r.get(o,a)));return i}static checkMatrix(t){return r.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var r=this.rows,e=this.columns,n=0;n<r;n++)for(var i=0;i<e;i++)t.call(this,n,i);return this}to1DArray(){for(var t=new Array(this.size),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t[r*this.columns+e]=this.get(r,e);return t}to2DArray(){for(var t=new Array(this.rows),r=0;r<this.rows;r++){t[r]=new Array(this.columns);for(var e=0;e<this.columns;e++)t[r][e]=this.get(r,e)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}isEchelonForm(){let t=0,r=0,e=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(r=0,i=!1;r<this.columns&&!1===i;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(i=!0,e=r):(n=!1,i=!0);t++}return n}isReducedEchelonForm(){let t=0,r=0,e=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(r=0,i=!1;r<this.columns&&!1===i;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>e?(i=!0,e=r):(n=!1,i=!0);for(let e=r+1;e<this.rows;e++)0!==this.get(t,e)&&(n=!1);t++}return n}set(t,r,e){throw new Error("set method is unimplemented")}get(t,r){throw new Error("get method is unimplemented")}repeat(t,r){t=t||1,r=r||1;for(var e=new this.constructor[Symbol.species](this.rows*t,this.columns*r),n=0;n<t;n++)for(var i=0;i<r;i++)e.setSubMatrix(this,this.rows*n,this.columns*i);return e}fill(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,t);return this}neg(){return this.mulS(-1)}getRow(t){m(this,t);for(var r=new Array(this.columns),e=0;e<this.columns;e++)r[e]=this.get(t,e);return r}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,r){m(this,t),r=p(this,r);for(var e=0;e<this.columns;e++)this.set(t,e,r[e]);return this}swapRows(t,r){m(this,t),m(this,r);for(var e=0;e<this.columns;e++){var n=this.get(t,e);this.set(t,e,this.get(r,e)),this.set(r,e,n)}return this}getColumn(t){g(this,t);for(var r=new Array(this.rows),e=0;e<this.rows;e++)r[e]=this.get(e,t);return r}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,r){g(this,t),r=v(this,r);for(var e=0;e<this.rows;e++)this.set(e,t,r[e]);return this}swapColumns(t,r){g(this,t),g(this,r);for(var e=0;e<this.rows;e++){var n=this.get(e,t);this.set(e,t,this.get(e,r)),this.set(e,r,n)}return this}addRowVector(t){t=p(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)+t[e]);return this}subRowVector(t){t=p(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)-t[e]);return this}mulRowVector(t){t=p(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*t[e]);return this}divRowVector(t){t=p(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)/t[e]);return this}addColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)+t[r]);return this}subColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)-t[r]);return this}mulColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*t[r]);return this}divColumnVector(t){t=v(this,t);for(var r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)/t[r]);return this}mulRow(t,r){m(this,t);for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)*r);return this}mulColumn(t,r){g(this,t);for(var e=0;e<this.rows;e++)this.set(e,t,this.get(e,t)*r);return this}max(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.get(r,e)>t&&(t=this.get(r,e));return t}maxIndex(){for(var t=this.get(0,0),r=[0,0],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n),r[0]=e,r[1]=n);return r}min(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)this.get(r,e)<t&&(t=this.get(r,e));return t}minIndex(){for(var t=this.get(0,0),r=[0,0],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n),r[0]=e,r[1]=n);return r}maxRow(t){m(this,t);for(var r=this.get(t,0),e=1;e<this.columns;e++)this.get(t,e)>r&&(r=this.get(t,e));return r}maxRowIndex(t){m(this,t);for(var r=this.get(t,0),e=[t,0],n=1;n<this.columns;n++)this.get(t,n)>r&&(r=this.get(t,n),e[1]=n);return e}minRow(t){m(this,t);for(var r=this.get(t,0),e=1;e<this.columns;e++)this.get(t,e)<r&&(r=this.get(t,e));return r}minRowIndex(t){m(this,t);for(var r=this.get(t,0),e=[t,0],n=1;n<this.columns;n++)this.get(t,n)<r&&(r=this.get(t,n),e[1]=n);return e}maxColumn(t){g(this,t);for(var r=this.get(0,t),e=1;e<this.rows;e++)this.get(e,t)>r&&(r=this.get(e,t));return r}maxColumnIndex(t){g(this,t);for(var r=this.get(0,t),e=[0,t],n=1;n<this.rows;n++)this.get(n,t)>r&&(r=this.get(n,t),e[0]=n);return e}minColumn(t){g(this,t);for(var r=this.get(0,t),e=1;e<this.rows;e++)this.get(e,t)<r&&(r=this.get(e,t));return r}minColumnIndex(t){g(this,t);for(var r=this.get(0,t),e=[0,t],n=1;n<this.rows;n++)this.get(n,t)<r&&(r=this.get(n,t),e[0]=n);return e}diag(){for(var t=Math.min(this.rows,this.columns),r=new Array(t),e=0;e<t;e++)r[e]=this.get(e,e);return r}sum(t){switch(t){case"row":return function(t){for(var r=z.zeros(t.rows,1),e=0;e<t.rows;++e)for(var n=0;n<t.columns;++n)r.set(e,0,r.get(e,0)+t.get(e,n));return r}(this);case"column":return function(t){for(var r=z.zeros(1,t.columns),e=0;e<t.rows;++e)for(var n=0;n<t.columns;++n)r.set(0,n,r.get(0,n)+t.get(e,n));return r}(this);default:return function(t){for(var r=0,e=0;e<t.rows;e++)for(var n=0;n<t.columns;n++)r+=t.get(e,n);return r}(this)}}mean(){return this.sum()/this.size}prod(){for(var t=1,r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t*=this.get(r,e);return t}norm(t="frobenius"){var r=0;if("max"===t)return this.max();if("frobenius"===t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)r+=this.get(e,n)*this.get(e,n);return Math.sqrt(r)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){for(var t=0,r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t+=this.get(r,e),this.set(r,e,t);return this}dot(t){r.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,i=0;i<e.length;i++)n+=e[i]*t[i];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var r=this.rows,e=this.columns,n=t.columns,i=new this.constructor[Symbol.species](r,n),o=new Array(e),a=0;a<n;a++){for(var s=0;s<e;s++)o[s]=t.get(s,a);for(var u=0;u<r;u++){var c=0;for(s=0;s<e;s++)c+=this.get(u,s)*o[s];i.set(u,a,c)}}return i}strassen2x2(t){var r=new this.constructor[Symbol.species](2,2);const e=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),h=(e+u)*(n+c),l=(a+u)*n,f=e*(o-c),m=u*(s-n),g=(e+i)*c,p=h+m-g+(i-u)*(s+c),v=f+g,d=l+m,w=h-l+f+(a-e)*(n+o);return r.set(0,0,p),r.set(0,1,v),r.set(1,0,d),r.set(1,1,w),r}strassen3x3(t){var r=new this.constructor[Symbol.species](3,3);const e=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),h=this.get(2,2),l=t.get(0,0),f=t.get(0,1),m=t.get(0,2),g=t.get(1,0),p=t.get(1,1),v=t.get(1,2),d=t.get(2,0),w=t.get(2,1),y=t.get(2,2),b=(e-o)*(-f+p),M=(-e+o+a)*(l-f+p),x=(o+a)*(-l+f),S=e*l,k=(-e+u+c)*(l-m+v),E=(-e+u)*(m-v),N=(u+c)*(-l+m),O=(-i+c+h)*(p+d-w),j=(i-h)*(p-w),R=i*d,A=(c+h)*(-d+w),C=(-i+a+s)*(v+d-y),P=(i-s)*(v-y),z=(a+s)*(-d+y),_=S+R+n*g,L=(e+n+i-o-a-c-h)*p+M+x+S+O+R+A,T=S+k+N+(e+n+i-a-s-u-c)*v+R+C+z,I=b+a*(-l+f+g-p-v-d+y)+M+S+R+C+P,D=b+M+x+S+s*w,F=R+C+P+z+o*m,V=S+k+E+c*(-l+m+g-p-v-d+w)+O+j+R,U=O+j+R+A+u*f,q=S+k+E+N+h*y;return r.set(0,0,_),r.set(0,1,L),r.set(0,2,T),r.set(1,0,I),r.set(1,1,D),r.set(1,2,F),r.set(2,0,V),r.set(2,1,U),r.set(2,2,q),r}mmulStrassen(t){var e=this.clone(),n=e.rows,i=e.columns,o=t.rows,a=t.columns;function s(t,e,n){var i=t.rows,o=t.columns;if(i===e&&o===n)return t;var a=r.zeros(e,n);return a=a.setSubMatrix(t,0,0)}i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${a} matrix: dimensions do not match.`);var u=Math.max(n,o),c=Math.max(i,a);return function t(e,n,i,o){if(i<=512||o<=512)return e.mmul(n);i%2==1&&o%2==1?(e=s(e,i+1,o+1),n=s(n,i+1,o+1)):i%2==1?(e=s(e,i+1,o),n=s(n,i+1,o)):o%2==1&&(e=s(e,i,o+1),n=s(n,i,o+1));var a=parseInt(e.rows/2,10),u=parseInt(e.columns/2,10),c=e.subMatrix(0,a-1,0,u-1),h=n.subMatrix(0,a-1,0,u-1),l=e.subMatrix(0,a-1,u,e.columns-1),f=n.subMatrix(0,a-1,u,n.columns-1),m=e.subMatrix(a,e.rows-1,0,u-1),g=n.subMatrix(a,n.rows-1,0,u-1),p=e.subMatrix(a,e.rows-1,u,e.columns-1),v=n.subMatrix(a,n.rows-1,u,n.columns-1),d=t(r.add(c,p),r.add(h,v),a,u),w=t(r.add(m,p),h,a,u),y=t(c,r.sub(f,v),a,u),b=t(p,r.sub(g,h),a,u),M=t(r.add(c,l),v,a,u),x=t(r.sub(m,c),r.add(h,f),a,u),S=t(r.sub(l,p),r.add(g,v),a,u),k=r.add(d,b);k.sub(M),k.add(S);var E=r.add(y,M),N=r.add(w,b),O=r.sub(d,w);O.add(y),O.add(x);var j=r.zeros(2*k.rows,2*k.columns);return(j=(j=(j=(j=j.setSubMatrix(k,0,0)).setSubMatrix(E,k.rows,0)).setSubMatrix(N,0,k.columns)).setSubMatrix(O,k.rows,k.columns)).subMatrix(0,i-1,0,o-1)}(e=s(e,u,c),t=s(t,u,c),u,c)}scaleRows(t,r){if((t=void 0===t?0:t)>=(r=void 0===r?1:r))throw new RangeError("min should be strictly smaller than max");for(var e=this.constructor.empty(this.rows,this.columns),n=0;n<this.rows;n++){var i=u(this.getRow(n),{min:t,max:r});e.setRow(n,i)}return e}scaleColumns(t,r){if((t=void 0===t?0:t)>=(r=void 0===r?1:r))throw new RangeError("min should be strictly smaller than max");for(var e=this.constructor.empty(this.rows,this.columns),n=0;n<this.columns;n++){var i=u(this.getColumn(n),{min:t,max:r});e.setColumn(n,i)}return e}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var r=this.rows,e=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](r*n,e*i),a=0;a<r;a++)for(var s=0;s<e;s++)for(var u=0;u<n;u++)for(var c=0;c<i;c++)o[n*a+u][i*s+c]=this.get(a,s)*t.get(u,c);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.set(e,r,this.get(r,e));return t}sortRows(t){void 0===t&&(t=e);for(var r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(t));return this}sortColumns(t){void 0===t&&(t=e);for(var r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(t));return this}subMatrix(t,r,e,n){b(this,t,r,e,n);for(var i=new this.constructor[Symbol.species](r-t+1,n-e+1),o=t;o<=r;o++)for(var a=e;a<=n;a++)i[o-t][a-e]=this.get(o,a);return i}subMatrixRow(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.columns-1),r>e||r<0||r>=this.columns||e<0||e>=this.columns)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](t.length,e-r+1),i=0;i<t.length;i++)for(var o=r;o<=e;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);n.set(i,o-r,this.get(t[i],o))}return n}subMatrixColumn(t,r,e){if(void 0===r&&(r=0),void 0===e&&(e=this.rows-1),r>e||r<0||r>=this.rows||e<0||e>=this.rows)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](e-r+1,t.length),i=0;i<t.length;i++)for(var o=r;o<=e;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);n.set(o-r,i,this.get(o,t[i]))}return n}setSubMatrix(t,r,e){b(this,r,r+(t=this.constructor.checkMatrix(t)).rows-1,e,e+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[r+n][e+i]=t.get(n,i);return this}selection(t,r){for(var e=d(this,t,r),n=new this.constructor[Symbol.species](t.length,r.length),i=0;i<e.row.length;i++)for(var o=e.row[i],a=0;a<e.column.length;a++){var s=e.column[a];n[i][a]=this.get(o,s)}return n}trace(){for(var t=Math.min(this.rows,this.columns),r=0,e=0;e<t;e++)r+=this.get(e,e);return r}transposeView(){return new S(this)}rowView(t){return m(this,t),new k(this,t)}columnView(t){return g(this,t),new R(this,t)}flipRowView(){return new A(this)}flipColumnView(){return new C(this)}subMatrixView(t,r,e,n){return new E(this,t,r,e,n)}selectionView(t,r){return new N(this,t,r)}rowSelectionView(t){return new O(this,t)}columnSelectionView(t){return new j(this,t)}det(){var t,r,e,n,i,o;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),r=this.get(0,1),e=this.get(1,0),t*this.get(1,1)-r*e):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),o=this.selectionView([1,2],[0,1]),t=this.get(0,0),r=this.get(0,1),e=this.get(0,2),t*n.det()-r*i.det()+e*o.det()):new c(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=Number.EPSILON);for(var r=new f(this,{autoTranspose:!0}),e=r.leftSingularVectors,n=r.rightSingularVectors,i=r.diagonal,o=0;o<i.length;o++)Math.abs(i[o])>t?i[o]=1/i[o]:i[o]=0;return i=this.constructor[Symbol.species].diag(i),n.mmul(i.mmul(e.transposeView()))}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),r=0;r<this.rows;r++)for(var e=0;e<this.columns;e++)t.set(r,e,this.get(r,e));return t}}function e(t,r){return t-r}r.prototype.klass="Matrix",r.random=r.rand,r.diagonal=r.diag,r.prototype.diagonal=r.prototype.diag,r.identity=r.eye,r.prototype.negate=r.prototype.neg,r.prototype.tensorProduct=r.prototype.kroneckerProduct,r.prototype.determinant=r.prototype.det;var n,i="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",o=eval;for(var a of[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]]){var s=o($("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",{name:a[1],op:a[0]})),h=o($("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",{name:`${a[1]}S`,op:a[0]})),l=o($("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",{name:`${a[1]}M`,op:a[0]})),w=o($("\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",{name:a[1]}));for(n=1;n<a.length;n++)r.prototype[a[n]]=s,r.prototype[`${a[n]}S`]=h,r.prototype[`${a[n]}M`]=l,r[a[n]]=w}var y=[["~","not"]];for(var M of(["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach((function(t){y.push([`Math.${t}`,t])})),y)){var x=o($("\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",{name:M[1],method:M[0]})),P=o($("\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",{name:M[1]}));for(n=1;n<M.length;n++)r.prototype[M[n]]=x,r[M[n]]=P}for(var _ of[["Math.pow",1,"pow"]]){var L="arg0";for(n=1;n<_[1];n++)L+=`, arg${n}`;if(1!==_[1]){var T=o($("\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",{name:_[2],method:_[0],args:L})),I=o($(i,{name:_[2],args:L}));for(n=2;n<_.length;n++)r.prototype[_[n]]=T,r[_[n]]=I}else{var D={name:_[2],args:L,method:_[0]},F=o($("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",D)),V=o($("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",D)),U=o($("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",D)),q=o($("\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",D));for(n=2;n<_.length;n++)r.prototype[_[n]]=F,r.prototype[`${_[n]}M`]=U,r.prototype[`${_[n]}S`]=V,r[_[n]]=q}}function $(t,r){for(var e in r)t=t.replace(new RegExp(`%${e}%`,"g"),r[e]);return t}return r}class z extends(P(Array)){constructor(t,r){var e;if(1===arguments.length&&"number"==typeof t)return new Array(t);if(z.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>0){if(super(t),!(Number.isInteger(r)&&r>0))throw new TypeError("nColumns must be a positive integer");for(e=0;e<t;e++)this[e]=new Array(r)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if(t=n.length,"number"!=typeof(r=n[0].length)||0===r)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),e=0;e<t;e++){if(n[e].length!==r)throw new RangeError("Inconsistent array dimensions");this[e]=[].concat(n[e])}}}return this.rows=t,this.columns=r,this}set(t,r,e){return this[t][r]=e,this}get(t,r){return this[t][r]}removeRow(t){if(m(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,r){return void 0===r&&(r=t,t=this.rows),m(this,t,!0),r=p(this,r),this.splice(t,0,r),this.rows+=1,this}removeColumn(t){if(g(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var r=0;r<this.rows;r++)this[r].splice(t,1);return this.columns-=1,this}addColumn(t,r){void 0===r&&(r=t,t=this.columns),g(this,t,!0),r=v(this,r);for(var e=0;e<this.rows;e++)this[e].splice(t,0,r[e]);return this.columns+=1,this}}P();class _ extends(P()){constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,r,e){return this.data[t][r]=e,this}get(t,r){return this.data[t][r]}static get[Symbol.species](){return z}}class L{constructor(t){var r,e,n,i,o=(t=_.checkMatrix(t)).clone(),a=t.rows,s=t.columns,u=new Array(s);for(n=0;n<s;n++){var c=0;for(r=n;r<a;r++)c=h(c,o.get(r,n));if(0!==c){for(o.get(n,n)<0&&(c=-c),r=n;r<a;r++)o.set(r,n,o.get(r,n)/c);for(o.set(n,n,o.get(n,n)+1),e=n+1;e<s;e++){for(i=0,r=n;r<a;r++)i+=o.get(r,n)*o.get(r,e);for(i=-i/o.get(n,n),r=n;r<a;r++)o.set(r,e,o.get(r,e)+i*o.get(r,n))}}u[n]=-c}this.QR=o,this.Rdiag=u}solve(t){t=z.checkMatrix(t);var r=this.QR,e=r.rows;if(t.rows!==e)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var n,i,o,a,s=t.columns,u=t.clone(),c=r.columns;for(o=0;o<c;o++)for(i=0;i<s;i++){for(a=0,n=o;n<e;n++)a+=r[n][o]*u[n][i];for(a=-a/r[o][o],n=o;n<e;n++)u[n][i]+=a*r[n][o]}for(o=c-1;o>=0;o--){for(i=0;i<s;i++)u[o][i]/=this.Rdiag[o];for(n=0;n<o;n++)for(i=0;i<s;i++)u[n][i]-=u[o][i]*r[n][o]}return u.subMatrix(0,c-1,0,s-1)}isFullRank(){for(var t=this.QR.columns,r=0;r<t;r++)if(0===this.Rdiag[r])return!1;return!0}get upperTriangularMatrix(){var t,r,e=this.QR,n=e.columns,i=new z(n,n);for(t=0;t<n;t++)for(r=0;r<n;r++)i[t][r]=t<r?e[t][r]:t===r?this.Rdiag[t]:0;return i}get orthogonalMatrix(){var t,r,e,n,i=this.QR,o=i.rows,a=i.columns,s=new z(o,a);for(e=a-1;e>=0;e--){for(t=0;t<o;t++)s[t][e]=0;for(s[e][e]=1,r=e;r<a;r++)if(0!==i[e][e]){for(n=0,t=e;t<o;t++)n+=i[t][e]*s[t][r];for(n=-n/i[e][e],t=e;t<o;t++)s[t][r]+=n*i[t][e]}}return s}}function T(t,r=!1){return t=_.checkMatrix(t),r?new f(t).inverse():function(t,r,e=!1){return t=_.checkMatrix(t),r=_.checkMatrix(r),e?new f(t).solve(r):t.isSquare()?new c(t).solve(r):new L(t).solve(r)}(t,z.eye(t.rows))}function I(t,r,e,n,i){var o=e*n*n,a=z.eye(r.length,r.length,o);const s=i(r);var u=t.x.map(t=>s(t)),c=function(t,r,e,n,i){const o=e.length,a=t.x.length;for(var s=new Array(o),u=0;u<o;u++){s[u]=new Array(a);var c=e.concat();c[u]+=n;for(var h=i(c),l=0;l<a;l++)s[u][l]=r[l]-h(t.x[l])}return new z(s)}(t,u,r,n,i),h=function(t,r){const e=t.x.length;for(var n=new Array(e),i=0;i<e;i++)n[i]=[t.y[i]-r[i]];return new z(n)}(t,u),l=T(a.add(c.mmul(c.transpose())));return(r=(r=new z([r])).sub(l.mmul(c).mmul(h).mul(n).transpose())).to1DArray()}function D(t,r,e={}){let{maxIterations:i=100,gradientDifference:o=.1,damping:a=0,errorTolerance:s=.01,minValues:u,maxValues:c,initialValues:h}=e;if(a<=0)throw new Error("The damping option must be a positive number");if(!t.x||!t.y)throw new Error("The data parameter must have x and y elements");if(!Array.isArray(t.x)||t.x.length<2||!Array.isArray(t.y)||t.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(t.x.length!==t.y.length)throw new Error("The data parameter elements must have the same size");var l=h||new Array(r.length).fill(1);let f=l.length;if(c=c||new Array(f).fill(Number.MAX_SAFE_INTEGER),u=u||new Array(f).fill(Number.MIN_SAFE_INTEGER),c.length!==u.length)throw new Error("minValues and maxValues must be the same size");if(!Array.isArray(l))throw new Error("initialValues must be an array");for(var m=n(t,l,r),g=m<=s,p=0;p<i&&!g;p++){l=I(t,l,a,o,r);for(let t=0;t<f;t++)l[t]=Math.min(Math.max(u[t],l[t]),c[t]);if(m=n(t,l,r),isNaN(m))break;g=m<=s}return{parameterValues:l,parameterError:m,iterations:p}}e.d(r,"default",(function(){return D}))}}]);