import { Image } from "@mdx-deck/components"
import { Split } from "@mdx-deck/layouts"

import { TSNEonMNIST } from "./examples.bundle.js"
import { UMAPonMNIST } from "./examples.bundle.js"

import SingleMNISTDigit from "./components/SingleMNISTDigit"
import StitchFixLogo from "./components/StitchFixLogo"
import Team from "./components/Team"
import TeamOrg from "./components/TeamOrg"

# Data science in the browser:

# DX & UX

## @ DinosaurJS

### June 20th, 2019

---

## Jana Beck

### data visualization engineer

<StitchFixLogo />

## @ Stitch Fix

---

# what's Stitch Fix?

<div style={{display: "flex"}}>

<img
  src=" /assets/img/stitchfix_womens_box.png"
  style={{ paddingRight: "4rem" }}
/>

<ul>
<li style={{lineHeight: 1.6}}>style profile</li>

<li style={{ lineHeight: 1.6 }}>stylist picks 5 things (a.k.a. a "fix")</li>

<li style={{ lineHeight: 1.6 }}>try on at home üè†</li>

<li style={{lineHeight: 1.6}}>pay üí∏ for what you keep</li>
</ul>

</div>

---

# where's the data science? (1/2)

- warehouse assignment
- recommendation systems
- client-stylist matching
- human computation

---

# where's the data science? (2/2)

- logistics (optimization)
- demand modeling
- inventory management
- new style development

---

<Image
  src="/assets/img/supreme.png"
  style={{
    alignItems: "center",
    backgroundColor: "white",
    color: "black",
    display: "flex",
    flexDirection: "column",
    justifyContent: "center",
  }}
>

### to learn more...

[take the Stitch Fix Algo tour!](http://algorithms-tour.stitchfix.com/)

</Image>

---

# context

---

<Team />

---

<TeamOrg />

---

# (the team)

- ["full stack" data scientists](https://multithreaded.stitchfix.com/blog/2019/03/11/FullStackDS-Generalists/)
- ...but not with frontend web dev

---

# front end in Algo

- co-dev w/data scientists
- reusable React component library
  - DataWarehouseFetch
  - (generalized) Fetch
  - Save/Fetch/Delete from common data store
  - & more...
- - a wrapper around create-react-app

---

# I thought we were going to talk about data science in the browser?!

---

# dimensionality reduction

# components!

---

# t-SNE

### and

# UMAP

---

# what _is_

# ‚ú® dimensionality reduction ‚ú®

# tho??? ü§î

---

| emoji | weight | calories |
| ----- | ------ | -------- |
| üçà    | 552    | 186      |
| üçá    | 2.4    | 2        |
| üçâ    | 4518   | 1371     |
| üçä    | 88     | 47       |
| üçã    | 58     | 17       |

---

TODO: x-y scatter plot

<!-- TODO: x-y scatter plot of foods' weight vs. calorie content -->
<!-- maybe TODO: calculate and show R-squared correlation? -->

---

| emoji | carbs | protein | fat |
| ----- | ----- | ------- | --- |
| üçà    | 8     | 0.8     | 0.2 |
| üçá    | 17    | 0.6     | 0.4 |
| üçâ    | 8     | 0.6     | 0.2 |
| üçä    | 13    | 0.8     | 0.3 |
| üçã    | 9     | 1.1     | 0.3 |

---

TODO: x-y-z scatter plot

<!-- TODO: Three.js 3d scatter plot of expanded dataset -->

---

# t-SNE

### and

# UMAP

---

<Image
  src="/assets/img/MNIST_digits.png">

<div
  style={{
    alignItems: "center",
    display: "flex",
    flexDirection: "column",
    height: "100vh",
    justifyContent: "center",
    margin: 0,
    width: "100vw",
  }}
>
  <div
    style={{
      backgroundColor: "ghostwhite",
      padding: "3rem 2rem",
    }}
  >
    <h2 style={{ margin: 0 }}>some MNIST ‚úçÔ∏è digits</h2>
  </div>
</div>

</Image>

---

<div
  style={{
    backgroundColor: "ghostwhite",
    padding: "3rem 2rem",
  }}
>
  <h1 style={{ margin: 0 }}>one digit</h1>
</div>

## 28 x 28 pixels

## = 28 <span>&times;</span> 28 = 784 dimensions

---

<SingleMNISTDigit />

---

<SingleMNISTDigit overlay />

---

<SingleMNISTDigit coordinates overlay />

---

<Split>

<SingleMNISTDigit coordinates highlight={[8, 7]} overlay />

<div style={{ padding: '1rem' }}>

|       | ... | 8,7   | 9,7 | ... |
| ----- | --- | ----- | --- | --- |
| img_0 | ... | **0** | 1   | ... |
| img_1 | ... | ...   | ... | ... |

</div>

</Split>

---

<Split>

<SingleMNISTDigit coordinates highlight={[9, 7]} overlay />

<div style={{ padding: '1rem' }}>

|       | ... | 8,7 | 9,7   | ... |
| ----- | --- | --- | ----- | --- |
| img_0 | ... | 0   | **1** | ... |
| img_1 | ... | ... | ...   | ... |

</div>

</Split>

---

# the @tensorflow/tfjs-tsne result

<img
  src="/assets/img/tfjs-tsne-mnist-demo.png"
  style={{ maxHeight: "65vh", maxWidth: "80vw" }}
/>

---

<img src="/assets/img/better_living_thru.png" />

---

<img src="/assets/img/better_living_thru.png" />

<div style={{ position: "fixed", bottom: "25rem", right: "27.5rem" }}>
  <h1 style={{ color: "#5DB968", fontStyle: "italic" }}>
    <span role="img" aria-label="computer emoji">
      üíª
    </span>
    &nbsp;&nbsp;<span style={{ textDecoration: "underline" }}>compute</span> components!
  </h1>
</div>

---

# `<ComputeTSNE/>` on MNIST

<TSNEonMNIST cache iterations={1000} />

---

# `<ComputeUMAP/>` on MNIST

<UMAPonMNIST cache />
